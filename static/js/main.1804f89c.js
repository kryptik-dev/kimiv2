/*! For license information please see main.1804f89c.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+A(l,0):o,_(s)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),O(s,t,i,"",function(e){return e})):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var u=0;u<e.length;u++){var c=o+A(a=e[u],u);l+=O(a,t,i,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=O(a=a.value,t,i,c=o+A(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return O(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},N={transition:null},M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)x.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(829)),o=r(n(736));class s{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new i.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let a;const l=new URL("".concat(this.url,"/rpc/").concat(e));let u;n||r?(a=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(a="POST",u=t);const c=new Headers(this.headers);return i&&c.set("Prefer","count=".concat(i)),new o.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}}t.default=s},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,N(x);else{var t=r(c);null!==t&&M(_,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(C),C=-1),f=!0;var o=p;try{for(w(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!O());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(u)&&i(u),w(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&M(_,d.startTime-n),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,T=null,C=-1,k=5,A=-1;function O(){return!(t.unstable_now()-A<k)}function I(){if(null!==T){var e=t.unstable_now();A=e;var n=!0;try{n=T(!0,e)}finally{n?S():(E=!1,T=null)}}else E=!1}if("function"===typeof b)S=function(){b(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=I,S=function(){R.postMessage(null)}}else S=function(){v(I,0)};function N(e){T=e,E||(E=!0,S())}function M(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(y(C),C=-1):g=!0,M(_,o-s))):(e.sortIndex=a,n(u,e),m||f||(m=!0,N(x))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},286:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(630)),o=r(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,i;let s=null,a=null,l=null,u=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(a="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const i=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),o=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");i&&o&&o.length>1&&(l=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:"Results contain ".concat(a.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(a=[],s=null,u=200,c="OK")}catch(d){404===e.status&&""===t?(u=204,c="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(i=null===s||void 0===s?void 0:s.details)||void 0===i?void 0:i.includes("0 rows"))&&(s=null,u=200,c="OK"),s&&this.shouldThrowOnError)throw new o.default(s)}return{error:s,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(286));class o extends i.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=i?"".concat(i,".order"):"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,"".concat(s?"".concat(s,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof r?"offset":"".concat(r,".offset"),o="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(o,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.get("Accept"))&&void 0!==s?s:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(o,'; for="').concat(l,'"; options=').concat(a,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=o},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>s,Request:()=>a,Response:()=>l,default:()=>o,fetch:()=>i});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const i=r.fetch,o=r.fetch.bind(r),s=r.Headers,a=r.Request,l=r.Response},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var j,L=Object.assign;function U(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,Ee=null;function Te(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),xe(e.stateNode,e.type,t))}}function Ce(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function ke(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function Oe(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ae(e,t,n)}finally{Ie=!1,(null!==Se||null!==Ee)&&(Oe(),ke())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(c)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ce){Ne=!1}function De(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var je=!1,Le=null,Ue=!1,Fe=null,Be={onError:function(e){je=!0,Le=e}};function Ve(e,t,n,r,i,o,s,a,l){je=!1,Le=null,De.apply(Be,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Je=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,xt,St,Et,Tt,Ct=!1,kt=[],At=null,Ot=null,It=null,Pt=new Map,Rt=new Map,Nt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Tt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Ct=!1,null!==At&&Ut(At)&&(At=null),null!==Ot&&Ut(Ot)&&(Ot=null),null!==It&&Ut(It)&&(It=null),Pt.forEach(Ft),Rt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function qt(e){function t(t){return Vt(t,e)}if(0<kt.length){Vt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==Ot&&Vt(Ot,e),null!==It&&Vt(It,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Nt.shift()}var zt=w.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=bt,o=zt.transition;zt.transition=null;try{bt=1,Jt(e,t,n,r)}finally{bt=i,zt.transition=o}}function Wt(e,t,n,r){var i=bt,o=zt.transition;zt.transition=null;try{bt=4,Jt(e,t,n,r)}finally{bt=i,zt.transition=o}}function Jt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=jt(At,e,t,n,r,i),!0;case"dragenter":return Ot=jt(Ot,e,t,n,r,i),!0;case"mouseover":return It=jt(It,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,jt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,jt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,n,r))&&Hr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=_e(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,r=n.length,i="value"in $t?$t.value:$t.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),dn=L({},un,{view:0,detail:0}),hn=on(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(L({},pn,{dataTransfer:0})),gn=on(L({},dn,{relatedTarget:0})),vn=on(L({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(L({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return En}var Cn=L({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=on(Cn),An=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=on(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),In=on(L({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Pn),Nn=[9,13,27,32],Mn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var jn=c&&"TextEvent"in window&&!Dn,Ln=c&&(!Mn||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Jn=null;function Kn(e){Ur(e,0)}function Yn(e){if(J(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(c){var Qn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Jn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Jn)){var t=[];Gn(t,Jn,e,_e(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Jn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Jn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var s=cr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Er={};function Tr(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Tr("animationend"),kr=Tr("animationiteration"),Ar=Tr("animationstart"),Or=Tr("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Nr=0;Nr<Pr.length;Nr++){var Mr=Pr[Nr];Rr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(kr,"onAnimationIteration"),Rr(Ar,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Or,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,u){if(Ve.apply(this,arguments),je){if(!je)throw Error(o(198));var c=Le;je=!1,Le=null,Ue||(Ue=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,u),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,u),o=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,s.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe(function(){var r=o,i=_e(n),s=[];e:{var a=Ir.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Cr:case kr:case Ar:l=vn;break;case Or:l=In;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==a?a+"Capture":null:a;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&c.push(Gr(f,m,p)))),d)break;f=f.return}0<c.length&&(a=new l(a,u,null,n,i),s.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:wi(l),p=null==u?a:wi(u),(a=new c(m,f+"leave",l,n,i)).target=d,a.relatedTarget=p,m=null,yi(i)===r&&((c=new c(h,f+"enter",u,n,i)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,f=0,p=c=l;p;p=Jr(p))f++;for(p=0,m=h;m;m=Jr(m))p++;for(;0<f-p;)c=Jr(c),f--;for(;0<p-f;)h=Jr(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=Jr(c),h=Jr(h)}c=null}else c=null;null!==l&&Kr(s,a,l,c,!1),null!==u&&null!==d&&Kr(s,d,u,c,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Hn(a))if($n)g=sr;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=en()):(Qt="value"in($t=i)?$t.value:$t.textContent,qn=!0)),0<(v=Wr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),Zt=Qt=$t=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Ur(s,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Re(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Re(n,o))&&s.unshift(Gr(n,l,a)):i||null!=(l=Re(n,o))&&s.push(Gr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Qr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[pi]||null}var xi=[],Si=-1;function Ei(e){return{current:e}}function Ti(e){0>Si||(e.current=xi[Si],xi[Si]=null,Si--)}function Ci(e,t){Si++,xi[Si]=e.current,e.current=t}var ki={},Ai=Ei(ki),Oi=Ei(!1),Ii=ki;function Pi(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ti(Oi),Ti(Ai)}function Mi(e,t,n){if(Ai.current!==ki)throw Error(o(168));Ci(Ai,t),Ci(Oi,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,z(e)||"Unknown",i));return L({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ii=Ai.current,Ci(Ai,e),Ci(Oi,Oi.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ti(Oi),Ti(Ai),Ci(Ai,e)):Ti(Oi),Ci(Oi,n)}var Ui=null,Fi=!1,Bi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Je(Ze,qi),i}finally{bt=t,Bi=!1}}return null}var zi=[],Hi=0,Gi=null,Wi=0,Ji=[],Ki=0,Yi=null,Xi=1,$i="";function Qi(e,t){zi[Hi++]=Wi,zi[Hi++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Ji[Ki++]=Xi,Ji[Ki++]=$i,Ji[Ki++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-st(t)+i|n<<i|r,$i=o+e}else Xi=1<<o|n<<i|r,$i=e}function eo(e){null!==e.return&&(Qi(e,1),Zi(e,1,0))}function to(e){for(;e===Gi;)Gi=zi[--Hi],zi[Hi]=null,Wi=zi[--Hi],zi[Hi]=null;for(;e===Yi;)Yi=Ji[--Ki],Ji[Ki]=null,$i=Ji[--Ki],Ji[Ki]=null,Xi=Ji[--Ki],Ji[Ki]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=ui(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ui(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&bo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Mu(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Du(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mu(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case x:return(t=Uu(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Du(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,l){for(var u=null,c=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=s(v,o,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===a.length)return n(i,d),io&&Qi(i,m),u;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===c?u=d:c.sibling=d,c=d);return io&&Qi(i,m),u}for(d=r(i,d);m<a.length;m++)null!==(g=f(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),io&&Qi(i,m),u}function g(i,a,l,u){var c=D(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var d=c=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),io&&Qi(i,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,u))&&(a=s(y,a,g),null===d?c=y:d.sibling=y,d=y);return io&&Qi(i,g),c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),io&&Qi(i,g),c}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,s.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&bo(u)===c.type){n(r,c.sibling),(o=i(c,s.props)).ref=vo(r,c,s),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===S?((o=Du(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Mu(s.type,s.key,s.props,null,r.mode,l)).ref=vo(r,o,s),l.return=r,r=l)}return a(r);case x:e:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Uu(s,r.mode,l)).return=r,r=o}return a(r);case R:return e(r,o,(c=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(D(s))return g(r,o,s,l);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Lu(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var _o=wo(!0),xo=wo(!1),So=Ei(null),Eo=null,To=null,Co=null;function ko(){Co=To=Eo=null}function Ao(e){var t=So.current;Ti(So),e._currentValue=t}function Oo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t){Eo=e,Co=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===Eo)throw Error(o(308));To=e,Eo.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Ro=null;function No(e){null===Ro?Ro=[e]:Ro.push(e)}function Mo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,No(t)):(n.next=i.next,i.next=n),t.interleaved=n,Do(e,r)}function Do(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jo=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Do(e,n)}return null===(i=r.interleaved)?(t.next=t,No(r)):(t.next=i.next,i.next=t),r.interleaved=t,Do(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function qo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var i=e.updateQueue;jo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,c=u=l=null,a=o;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:jo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jl|=s,e.lanes=s,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Wo=Ei(Go),Jo=Ei(Go),Ko=Ei(Go);function Yo(e){if(e===Go)throw Error(o(174));return e}function Xo(e,t){switch(Ci(Ko,t),Ci(Jo,e),Ci(Wo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Wo),Ci(Wo,t)}function $o(){Ti(Wo),Ti(Jo),Ti(Ko)}function Qo(e){Yo(Ko.current);var t=Yo(Wo.current),n=le(t,e.type);t!==n&&(Ci(Jo,e),Ci(Wo,n))}function Zo(e){Jo.current===e&&(Ti(Wo),Ti(Jo))}var es=Ei(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=w.ReactCurrentDispatcher,os=w.ReactCurrentBatchConfig,ss=0,as=null,ls=null,us=null,cs=!1,ds=!1,hs=0,ps=0;function fs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Zs:ea,e=n(r,i),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,us=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(ds)}if(is.current=Qs,t=null!==ls&&null!==ls.next,ss=0,us=ls=as=null,cs=!1,t)throw Error(o(300));return e}function vs(){var e=0!==hs;return hs=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===us?as.memoizedState=us=e:us=us.next=e,us}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===us?as.memoizedState:us.next;if(null!==t)us=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===us?as.memoizedState=us=e:us=us.next=e}return us}function ws(e,t){return"function"===typeof t?t(e):t}function _s(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,u=null,c=s;do{var d=c.lane;if((ss&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,a=r):u=u.next=h,as.lanes|=d,jl|=d}c=c.next}while(null!==c&&c!==s);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,jl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xs(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function Es(e,t){var n=as,r=bs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,js(ks.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==us&&1&us.memoizedState.tag){if(n.flags|=2048,Ps(9,Cs.bind(null,n,r,i,t),void 0,null),null===Ol)throw Error(o(349));0!==(30&ss)||Ts(n,t,i)}return i}function Ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Cs(e,t,n,r){t.value=n,t.getSnapshot=r,As(t)&&Os(e)}function ks(e,t,n){return n(function(){As(t)&&Os(e)})}function As(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Os(e){var t=Do(e,1);null!==t&&nu(t,e,1,-1)}function Is(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,as,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rs(){return bs().memoizedState}function Ns(e,t,n,r){var i=ys();as.flags|=e,i.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Ms(e,t,n,r){var i=bs();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ps(t,n,o,r))}as.flags|=e,i.memoizedState=Ps(1|t,n,o,r)}function Ds(e,t){return Ns(8390656,8,e,t)}function js(e,t){return Ms(2048,8,e,t)}function Ls(e,t){return Ms(4,2,e,t)}function Us(e,t){return Ms(4,4,e,t)}function Fs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ms(4,4,Fs.bind(null,t,e),n)}function Vs(){}function qs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,jl|=n,e.baseState=!0),t)}function Gs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{bt=n,os.transition=r}}function Ws(){return bs().memoizedState}function Js(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Xs(t,n);else if(null!==(n=Mo(e,t,n,r))){nu(n,e,r,eu()),$s(n,t,r)}}function Ks(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Xs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,No(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Mo(e,t,i,r))&&(nu(n,e,r,i=eu()),$s(n,t,r))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function Xs(e,t){ds=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $s(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qs={readContext:Po,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Zs={readContext:Po,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ns(4194308,4,Fs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ns(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Js.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Is,useDebugValue:Vs,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Is(!1),t=e[0];return e=Gs.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ol)throw Error(o(349));0!==(30&ss)||Ts(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ds(ks.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,Cs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Ol.identifierPrefix;if(io){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Po,useCallback:qs,useContext:Po,useEffect:js,useImperativeHandle:Bs,useInsertionEffect:Ls,useLayoutEffect:Us,useMemo:zs,useReducer:_s,useRef:Rs,useState:function(){return _s(ws)},useDebugValue:Vs,useDeferredValue:function(e){return Hs(bs(),ls.memoizedState,e)},useTransition:function(){return[_s(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Es,useId:Ws,unstable_isNewReconciler:!1},ta={readContext:Po,useCallback:qs,useContext:Po,useEffect:js,useImperativeHandle:Bs,useInsertionEffect:Ls,useLayoutEffect:Us,useMemo:zs,useReducer:xs,useRef:Rs,useState:function(){return xs(ws)},useDebugValue:Vs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:Hs(t,ls.memoizedState,e)},useTransition:function(){return[xs(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Es,useId:Ws,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=Fo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nu(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=Fo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nu(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Fo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Bo(e,i,r))&&(nu(t,e,r,n),Vo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Ri(t)?Ii:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Ri(t)?Ii:Ai.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),da(0,t)},n}function fa(e,t,n){(n=Fo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,Bo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?xo(t,null,n,r):_o(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var o=t.ref;return Io(t,i),r=gs(e,t,n,r,o,i),n=vs(),null===e||ba?(io&&n&&eo(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function xa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ru(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Nu(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Nl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Nl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Nl,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Nl,Rl),Rl|=r;return wa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var o=Ri(n)?Ii:Ai.current;return o=Pi(t,o),Io(t,i),n=gs(e,t,n,r,o,i),r=vs(),null===e||ba?(io&&r&&eo(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function ka(e,t,n,r,i){if(Ri(n)){var o=!0;ji(t)}else o=!1;if(Io(t,i),null===t.stateNode)za(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=Po(u):u=Pi(t,u=Ri(n)?Ii:Ai.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&aa(t,s,r,u),jo=!1;var h=t.memoizedState;s.state=h,zo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Oi.current||jo?("function"===typeof c&&(ra(t,n,c,r),l=t.memoizedState),(a=jo||oa(t,n,a,r,h,l,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:na(t.type,a),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(t,l=Ri(n)?Ii:Ai.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),jo=!1,h=t.memoizedState,s.state=h,zo(t,r,s,i);var f=t.memoizedState;a!==d||h!==f||Oi.current||jo?("function"===typeof p&&(ra(t,n,p,r),f=t.memoizedState),(u=jo||oa(t,n,u,r,h,f,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,o,i)}function Aa(e,t,n,r,i,o){Ta(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Ha(e,t,o);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,a,o)):wa(e,t,a,o),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Xo(e,t.containerInfo)}function Ia(e,t,n,r,i){return fo(),mo(i),t.flags|=256,wa(e,t,n,r),t.child}var Pa,Ra,Na,Ma,Da={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(es,1&s),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=ju(l,i,0,null),e=Du(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=Da,e):Ua(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,r=ca(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ju({mode:"visible",children:r.children},i,0,null),(s=Du(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_o(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=Da,s);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fa(e,t,a,r=ca(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Do(e,i),nu(r,e,i,-1))}return mu(),Fa(e,t,a,r=ca(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=ku.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ji[Ki++]=Xi,Ji[Ki++]=$i,Ji[Ki++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Nu(r,a):(a=Du(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Nu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=ju({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,r){return null!==r&&mo(r),_o(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Oo(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function za(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Ri(t.type)&&Ni(),Wa(t),null;case 3:return r=t.stateNode,$o(),Ti(Oi),Ti(Ai),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(su(oo),oo=null))),Ra(e,t),Wa(t),null;case 5:Zo(t);var i=Yo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Wa(t),null}if(e=Yo(Wo.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,s,!0);break;case"textarea":W(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ye(n,i),u=i)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?ge(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Fr("scroll",e):null!=c&&b(e,s,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Ko.current),Yo(Wo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ti(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),s=!1}else null!==oo&&(su(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ml&&(Ml=3):mu())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return $o(),Ra(e,t),null===e&&qr(t.stateNode.containerInfo),Wa(t),null;case 10:return Ao(t.type._context),Wa(t),null;case 19:if(Ti(es),null===(s=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ga(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Ga(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&$e()>ql&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Wa(t),null}else 2*$e()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,n=es.current,Ci(es,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ka(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $o(),Ti(Oi),Ti(Ai),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ti(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(es),null;case 4:return $o(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Na=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Wo.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Xa=!1,$a="function"===typeof WeakSet?WeakSet:Set,Qa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Eu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Eu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||Za(n,t);case 6:var r=cl,i=dl;cl=null,hl(e,t,n),dl=i,null!==(cl=r)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),qt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,hl(e,t,n),cl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xa&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Eu(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,hl(e,t,n),Xa=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach(function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(o(160));pl(s,a,i),cl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Eu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Eu(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Eu(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Eu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(i,s),be(l,a);var c=be(l,s);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,c)}switch(l){case"input":Q(i,s);break;case"textarea":oe(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){Eu(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Eu(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Eu(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=$e())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(c=Xa)||d,ml(t,e),Xa=c):ml(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Qa=e,d=e.child;null!==d;){for(h=Qa=d;null!==Qa;){switch(f=(p=Qa).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Eu(r,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==f?(f.return=p,Qa=f):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){Eu(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Eu(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Eu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Qa;){var i=Qa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var u=Xa;if(Ya=s,(Xa=l)&&!u)for(Qa=i;null!==Qa;)l=(s=Qa).child,22===s.tag&&null!==s.memoizedState?xl(i):null!==l?(l.return=s,Qa=l):xl(i);for(;null!==o;)Qa=o,bl(o,t,n),o=o.sibling;Qa=i,Ya=a,Xa=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qa=o):wl(e)}}function wl(e){for(;null!==Qa;){var t=Qa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(o(163))}Xa||512&t.flags&&il(t)}catch(p){Eu(t,t.return,p)}}if(t===e){Qa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qa=n;break}Qa=t.return}}function _l(e){for(;null!==Qa;){var t=Qa;if(t===e){Qa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qa=n;break}Qa=t.return}}function xl(e){for(;null!==Qa;){var t=Qa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Eu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Eu(t,i,l)}}var o=t.return;try{il(t)}catch(l){Eu(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){Eu(t,s,l)}}}catch(l){Eu(t,t.return,l)}if(t===e){Qa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Qa=a;break}Qa=t.return}}var Sl,El=Math.ceil,Tl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,kl=w.ReactCurrentBatchConfig,Al=0,Ol=null,Il=null,Pl=0,Rl=0,Nl=Ei(0),Ml=0,Dl=null,jl=0,Ll=0,Ul=0,Fl=null,Bl=null,Vl=0,ql=1/0,zl=null,Hl=!1,Gl=null,Wl=null,Jl=!1,Kl=null,Yl=0,Xl=0,$l=null,Ql=-1,Zl=0;function eu(){return 0!==(6&Al)?$e():-1!==Ql?Ql:Ql=$e()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nu(e,t,n,r){if(50<Xl)throw Xl=0,$l=null,Error(o(185));vt(e,n,r),0!==(2&Al)&&e===Ol||(e===Ol&&(0===(2&Al)&&(Ll|=n),4===Ml&&au(e,Pl)),ru(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=$e()+500,Fi&&qi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Ol?Pl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(lu.bind(null,e)):Vi(lu.bind(null,e)),si(function(){0===(6&Al)&&qi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ou(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Ql=-1,Zl=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=ht(e,e===Ol?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Al;Al|=2;var s=fu();for(Ol===e&&Pl===t||(zl=null,ql=$e()+500,hu(e,t));;)try{yu();break}catch(l){pu(e,l)}ko(),Tl.current=s,Al=i,null!==Il?t=0:(Ol=null,Pl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ou(e,i))),1===t)throw n=Dl,hu(e,0),au(e,r),ru(e,$e()),n;if(6===t)au(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(s=ft(e))&&(r=s,t=ou(e,s))),1===t))throw n=Dl,hu(e,0),au(e,r),ru(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_u(e,Bl,zl);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=Vl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_u.bind(null,e,Bl,zl),t);break}_u(e,Bl,zl);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(_u.bind(null,e,Bl,zl),r);break}_u(e,Bl,zl);break;default:throw Error(o(329))}}}return ru(e,$e()),e.callbackNode===n?iu.bind(null,e):null}function ou(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Bl,Bl=n,null!==t&&su(t)),e}function su(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function au(e,t){for(t&=~Ul,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Al))throw Error(o(327));xu();var t=ht(e,0);if(0===(1&t))return ru(e,$e()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Dl,hu(e,0),au(e,t),ru(e,$e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Bl,zl),ru(e,$e()),null}function uu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=$e()+500,Fi&&qi())}}function cu(e){null!==Kl&&0===Kl.tag&&0===(6&Al)&&xu();var t=Al;Al|=1;var n=kl.transition,r=bt;try{if(kl.transition=null,bt=1,e)return e()}finally{bt=r,kl.transition=n,0===(6&(Al=t))&&qi()}}function du(){Rl=Nl.current,Ti(Nl)}function hu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:$o(),Ti(Oi),Ti(Ai),rs();break;case 5:Zo(r);break;case 4:$o();break;case 13:case 19:Ti(es);break;case 10:Ao(r.type._context);break;case 22:case 23:du()}n=n.return}if(Ol=e,Il=e=Nu(e.current,null),Pl=Rl=t,Ml=0,Dl=null,Ul=Ll=jl=0,Bl=Fl=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(r=(n=Ro[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Ro=null}return e}function pu(e,t){for(;;){var n=Il;try{if(ko(),is.current=Qs,cs){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}cs=!1}if(ss=0,us=ls=as=null,ds=!1,hs=0,Cl.current=null,null===n||null===n.return){Ml=1,Dl=t,Il=null;break}e:{var s=e,a=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(s,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ma(s,c,t),mu();break e}u=Error(o(426))}else if(io&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),mo(ua(u,l));break e}}s=u=ua(u,l),4!==Ml&&(Ml=2),null===Fl?Fl=[s]:Fl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,qo(s,pa(0,u,t));break e;case 1:l=u;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,qo(s,fa(s,l,t));break e}}s=s.return}while(null!==s)}wu(n)}catch(w){t=w,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function fu(){var e=Tl.current;return Tl.current=Qs,null===e?Qs:e}function mu(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Ol||0===(268435455&jl)&&0===(268435455&Ll)||au(Ol,Pl)}function gu(e,t){var n=Al;Al|=2;var r=fu();for(Ol===e&&Pl===t||(zl=null,hu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(ko(),Al=n,Tl.current=r,null!==Il)throw Error(o(261));return Ol=null,Pl=0,Ml}function vu(){for(;null!==Il;)bu(Il)}function yu(){for(;null!==Il&&!Ye();)bu(Il)}function bu(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?wu(e):Il=t,Cl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Rl)))return void(Il=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ml=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ml&&(Ml=5)}function _u(e,t,n){var r=bt,i=kl.transition;try{kl.transition=null,bt=1,function(e,t,n,r){do{xu()}while(null!==Kl);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Ol&&(Il=Ol=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Ou(tt,function(){return xu(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=kl.transition,kl.transition=null;var a=bt;bt=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(u=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===i&&(l=a),p===s&&++d===r&&(u=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Qa=t;null!==Qa;)if(e=(t=Qa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qa=e;else for(;null!==Qa;){t=Qa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(_){Eu(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Qa=e;break}Qa=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Xe(),Al=l,bt=a,kl.transition=s}else e.current=n;if(Jl&&(Jl=!1,Kl=e,Yl=i),s=e.pendingLanes,0===s&&(Wl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&xu(),s=e.pendingLanes,0!==(1&s)?e===$l?Xl++:(Xl=0,$l=e):Xl=0,qi()}(e,t,n,r)}finally{kl.transition=i,bt=r}return null}function xu(){if(null!==Kl){var e=wt(Yl),t=kl.transition,n=bt;try{if(kl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Qa=e.current;null!==Qa;){var s=Qa,a=s.child;if(0!==(16&Qa.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qa=c;null!==Qa;){var d=Qa;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Qa=h;else for(;null!==Qa;){var p=(d=Qa).sibling,f=d.return;if(ol(d),d===c){Qa=null;break}if(null!==p){p.return=f,Qa=p;break}Qa=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Qa=a;else e:for(;null!==Qa;){if(0!==(2048&(s=Qa).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Qa=y;break e}Qa=s.return}}var b=e.current;for(Qa=b;null!==Qa;){var w=(a=Qa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Qa=w;else e:for(a=b;null!==Qa;){if(0!==(2048&(l=Qa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Eu(l,l.return,x)}if(l===a){Qa=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Qa=_;break e}Qa=l.return}}if(Al=i,qi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,kl.transition=t}}return!1}function Su(e,t,n){e=Bo(e,t=pa(0,t=ua(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Eu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Bo(t,e=fa(t,e=ua(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Pl&n)===n&&(4===Ml||3===Ml&&(130023424&Pl)===Pl&&500>$e()-Vl?hu(e,0):Ul|=n),ru(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Do(e,t))&&(vt(e,t,n),ru(e,n))}function ku(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cu(e,n)}function Ou(e,t){return Je(e,t)}function Iu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Iu(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mu(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Ru(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Du(n.children,i,s,t);case E:a=8,i|=8;break;case T:return(e=Pu(12,n,t,2|i)).elementType=T,e.lanes=s,e;case O:return(e=Pu(13,n,t,i)).elementType=O,e.lanes=s,e;case I:return(e=Pu(19,n,t,i)).elementType=I,e.lanes=s,e;case N:return ju(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case k:a=9;break e;case A:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pu(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Du(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function ju(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Lu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,i,o,s,a,l){return e=new Fu(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Vu(e){if(!e)return ki;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Di(e,n,t)}return t}function qu(e,t,n,r,i,o,s,a,l){return(e=Bu(n,r,!0,e,0,o,0,a,l)).context=Vu(null),n=e.current,(o=Fo(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Bo(n,o,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function zu(e,t,n,r){var i=t.current,o=eu(),s=tu(i);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bo(i,t,s))&&(nu(e,i,s,o),Vo(e,i,s)),s}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),fo();break;case 5:Qo(t);break;case 1:Ri(t.type)&&ji(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(Ci(es,1&es.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ci(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;za(e,t),e=t.pendingProps;var i=Pi(t,Ai.current);Io(t,n),i=gs(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(s=!0,ji(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Aa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(za(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=xa(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Oa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),zo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ia(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ia(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Ha(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Qo(t),null===e&&uo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ta(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&uo(t),null;case 13:return La(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ci(So,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Oi.current){t=Ha(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Fo(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Oo(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Oo(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Io(t,n),r=r(i=Po(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),xa(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),za(e,t),t.tag=1,Ri(r)?(e=!0,ji(t)):e=!1,Io(t,n),sa(t,r,i),la(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ea(e,t,n)}throw Error(o(156,t.tag))};var Ju="function"===typeof reportError?reportError:function(e){console.error(e)};function Ku(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function Zu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Hu(s);a.call(e)}}zu(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hu(s);o.call(e)}}var s=qu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=s,e[fi]=s.current,qr(8===e.nodeType?e.parentNode:e),cu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hu(l);a.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[fi]=l.current,qr(8===e.nodeType?e.parentNode:e),cu(function(){zu(t,l,n,r)}),l}(n,t,e,i,r);return Hu(s)}Yu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));zu(e,t,null,null)},Yu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu(function(){zu(null,e,null,null)}),t[fi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Lt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,$e()),0===(6&Al)&&(ql=$e()+500,qi()))}break;case 13:cu(function(){var t=Do(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}}),Wu(e,1)}},xt=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)nu(t,e,134217728,eu());Wu(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=Do(e,t);if(null!==n)nu(n,e,t,eu());Wu(e,t)}},Et=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));J(r),Q(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uu,Oe=cu;var ec={usingClientEntryPoint:!1,Events:[bi,wi,_i,Ce,ke,uu]},tc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),ot=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xu(e))throw Error(o(299));var n=!1,r="",i=Ju;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Ku(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!$u(t))throw Error(o(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Ju;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!$u(t))throw Error(o(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(o(40));return!!e._reactRootContainer&&(cu(function(){Zu(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(374));class o extends i.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(i,"fts").concat(o,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=o},829:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:i}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let o=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",s),n&&this.headers.append("Prefer","count=".concat(n)),new i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer","count=".concat(r)),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=r(n(210));t.PostgrestClient=i.default;const o=r(n(829));t.PostgrestQueryBuilder=o.default;const s=r(n(736));t.PostgrestFilterBuilder=s.default;const a=r(n(374));t.PostgrestTransformBuilder=a.default;const l=r(n(286));t.PostgrestBuilder=l.default;const u=r(n(611));t.PostgrestError=u.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),i=n(391);function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function l(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=["sri"],h=["page"],p=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function y(){return T(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return x("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:S(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function _(e,t){return{usr:e.state,key:e.key,idx:t}}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?E(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function E(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function T(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=d();function d(){return(s.state||{idx:null}).idx}function h(){a="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:a,location:f.location,delta:t})}function p(e){return C(e)}null==u&&(u=0,s.replaceState(c(c({},s.state),{},{idx:u}),""));let f={get action(){return a},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(v,h),l=e,()=>{i.removeEventListener(v,h),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let r=x(f.location,e,t);n&&n(r,e),u=d()+1;let c=_(r,u),h=f.createHref(r);try{s.pushState(c,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(h)}o&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a="REPLACE";let r=x(f.location,e,t);n&&n(r,e),u=d();let i=_(r,u),c=f.createHref(r);s.replaceState(i,"",c),o&&l&&l({action:a,location:f.location,delta:0})},go:e=>s.go(e)};return f}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:S(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function k(e,t){return A(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function A(e,t,n,r){let i=z(("string"===typeof t?E(t):t).pathname||"/",n);if(null==i)return null;let o=O(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=q(i);s=F(o[a],e,r)}return s}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;b(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let u=K([r,l.relativePath]),c=n.concat(l);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(u,'".')),O(e.children,t,c,u,s)),(null!=e.path||e.index)&&t.push({path:u,score:U(u,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of I(e.path))o(e,t,!0,r);else o(e,t)}),t}function I(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=I(r.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),i&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var P=/^:[\w-]+$/,R=3,N=2,M=1,D=10,j=-2,L=e=>"*"===e;function U(e,t){let n=e.split("/"),r=n.length;return n.some(L)&&(r+=j),t&&(r+=N),n.filter(e=>!L(e)).reduce((e,t)=>e+(P.test(t)?R:""===t?M:D),r)}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,u="/"===o?t:t.slice(o.length)||"/",c=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),d=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),s.push({params:i,pathname:K([o,c.pathname]),pathnameBase:Y(K([o,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(o=K([o,c.pathnameBase]))}return s}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=V(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:s,pattern:e}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function q(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return w(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function H(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function G(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function W(e){let t=G(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function J(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=E(e):(r=c({},e),b(!r.pathname||!r.pathname.includes("?"),H("?","pathname","search",r)),b(!r.pathname||!r.pathname.includes("#"),H("#","pathname","hash",r)),b(!r.search||!r.search.includes("#"),H("#","search","hash",r)));let o,s=""===e||""===r.pathname,a=s?"/":r.pathname;if(null==a)o=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?E(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:X(r),hash:$(i)}}(r,o),u=a&&"/"!==a&&a.endsWith("/"),d=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var K=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],ee=(new Set(Z),["GET",...Z]);new Set(ee),Symbol("ResetLoaderData");var te=r.createContext(null);te.displayName="DataRouter";var ne=r.createContext(null);ne.displayName="DataRouterState";var re=r.createContext(!1);var ie=r.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var oe=r.createContext(new Map);oe.displayName="Fetchers";var se=r.createContext(null);se.displayName="Await";var ae=r.createContext(null);ae.displayName="Navigation";var le=r.createContext(null);le.displayName="Location";var ue=r.createContext({outlet:null,matches:[],isDataRoute:!1});ue.displayName="Route";var ce=r.createContext(null);ce.displayName="RouteError";function de(){return null!=r.useContext(le)}function he(){return b(de(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(le).location}var pe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fe(e){r.useContext(ae).static||r.useLayoutEffect(e)}function me(){let{isDataRoute:e}=r.useContext(ue);return e?function(){let{router:e}=Ee("useNavigate"),t=Ce("useNavigate"),n=r.useRef(!1);fe(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(n.current,pe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,c({fromRouteId:t},i)))},[e,t]);return i}():function(){b(de(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(te),{basename:t,navigator:n}=r.useContext(ae),{matches:i}=r.useContext(ue),{pathname:o}=he(),s=JSON.stringify(W(i)),a=r.useRef(!1);fe(()=>{a.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(w(a.current,pe),!a.current)return;if("number"===typeof r)return void n.go(r);let l=J(r,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:K([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,s,o,e]);return l}()}r.createContext(null);function ge(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ue),{pathname:i}=he(),o=JSON.stringify(W(n));return r.useMemo(()=>J(e,JSON.parse(o),i,"path"===t),[e,o,i,t])}function ve(e,t,n,i,o){b(de(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=r.useContext(ae),{matches:a}=r.useContext(ue),l=a[a.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";Oe(d,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,m=he();if(t){var g;let e="string"===typeof t?E(t):t;b("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=m;let v=f.pathname||"/",y=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=k(e,{pathname:y});w(p||null!=_,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),w(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=xe(_&&_.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:K([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:K([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,i,o);return t&&x?r.createElement(le.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},x):x}function ye(){let e=ke(),t=Q(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:s},"ErrorBoundary")," or"," ",r.createElement("code",{style:s},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,a)}var be=r.createElement(ye,null),we=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(ue.Provider,{value:this.props.routeContext},r.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _e(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(te);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ue.Provider,{value:t},i)}function xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let o=e,s=null===n||void 0===n?void 0:n.errors;if(null!=s){let e=o.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let a=!1,l=-1;if(n)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}return o.reduceRight((e,u,c)=>{let d,h=!1,p=null,f=null;n&&(d=s&&u.route.id?s[u.route.id]:void 0,p=u.route.errorElement||be,a&&(l<0&&0===c?(Oe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):l===c&&(h=!0,f=u.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,c+1)),g=()=>{let t;return t=d?p:h?f:u.route.Component?r.createElement(u.route.Component,null):u.route.element?u.route.element:e,r.createElement(_e,{match:u,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(u.route.ErrorBoundary||u.route.errorElement||0===c)?r.createElement(we,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:i}):g()},null)}function Se(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ee(e){let t=r.useContext(te);return b(t,Se(e)),t}function Te(e){let t=r.useContext(ne);return b(t,Se(e)),t}function Ce(e){let t=function(e){let t=r.useContext(ue);return b(t,Se(e)),t}(e),n=t.matches[t.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function ke(){var e;let t=r.useContext(ce),n=Te("useRouteError"),i=Ce("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var Ae={};function Oe(e,t,n){t||Ae[e]||(Ae[e]=!0,w(!1,n))}var Ie={};function Pe(e,t){e||Ie[t]||(Ie[t]=!0,console.warn(t))}r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return ve(t,void 0,r,i,n)});function Re(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ne(e){let{basename:t="/",children:n=null,location:i,navigationType:o="POP",navigator:s,static:a=!1}=e;b(!de(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);"string"===typeof i&&(i=E(i));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:f="default"}=i,m=r.useMemo(()=>{let e=z(c,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:f},navigationType:o}},[l,c,d,h,p,f,o]);return w(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(c).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:r.createElement(ae.Provider,{value:u},r.createElement(le.Provider,{children:n,value:m}))}function Me(e){let{children:t,location:n}=e;return ve(De(t),n)}r.Component;function De(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,De(e.props.children,o));b(e.type===Re,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=De(e.props.children,o)),n.push(s)}),n}var je="get",Le="application/x-www-form-urlencoded";function Ue(e){return null!=e&&"string"===typeof e.tagName}var Fe=null;var Be=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ve(e){return null==e||Be.has(e)?e:(w(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Le,'"')),null)}function qe(e,t){let n,r,i,o,s;if(Ue(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?z(s,t):null,n=e.getAttribute("method")||je,i=Ve(e.getAttribute("enctype"))||Le,o=new FormData(e)}else if(function(e){return Ue(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ue(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(r=a?z(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||je,i=Ve(e.getAttribute("formenctype"))||Ve(s.getAttribute("enctype"))||Le,o=new FormData(s,e),!function(){if(null===Fe)try{new FormData(document.createElement("form"),0),Fe=!1}catch(e){Fe=!0}return Fe}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(Ue(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=je,r=null,i=Le,s=e}var a;return o&&"text/plain"===i&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function ze(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function He(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===z(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Ge(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function We(e){return null!=e&&"string"===typeof e.page}function Je(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ke(e,t,n,r,i,o){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>s(e,t)||a(e,t)):"data"===o?t.filter((t,o)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,o)||a(t,o))return!0;if(t.route.shouldRevalidate){var u;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(u=n[0])||void 0===u?void 0:u.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Ye(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Xe(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!We(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e},[])}function $e(e,t){return"lazy"===e.mode&&!0===t}function Qe(){let e=r.useContext(te);return ze(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ze(){let e=r.useContext(ne);return ze(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var et=r.createContext(void 0);function tt(){let e=r.useContext(et);return ze(e,"You must render this element inside a <HydratedRouter> element"),e}function nt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function rt(e,t,n){if(n&&!at)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}et.displayName="FrameworkContext";function it(e){let{page:t}=e,n=o(e,h),{router:i}=Qe(),s=r.useMemo(()=>k(i.routes,t,i.basename),[i.routes,t,i.basename]);return s?r.createElement(st,c({page:t,matches:s},n)):null}function ot(e){let{manifest:t,routeModules:n}=tt(),[i,o]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return Xe((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ge(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Je).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||o(e)}),()=>{r=!0}},[e,t,n]),i}function st(e){let{page:t,matches:n}=e,i=o(e,p),s=he(),{manifest:a,routeModules:l}=tt(),{basename:u}=Qe(),{loaderData:d,matches:h}=Ze(),f=r.useMemo(()=>Ke(t,n,h,a,s,"data"),[t,n,h,a,s]),m=r.useMemo(()=>Ke(t,n,h,a,s,"assets"),[t,n,h,a,s]),g=r.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=a.routes[t.route.id];i&&i.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=He(t,u,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[u,d,s,a,f,n,t,l]),v=r.useMemo(()=>Ye(m,a),[m,a]),y=ot(m);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},i))),v.map(e=>r.createElement("link",c({key:e,rel:"modulepreload",href:e},i))),y.map(e=>{let{key:t,link:n}=e;return r.createElement("link",c({key:t,nonce:i.nonce},n))}))}var at=!1;function lt(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:s,routeDiscovery:a,ssr:l}=tt(),{router:u,static:h,staticContext:p}=Qe(),{matches:f}=Ze(),m=r.useContext(re),g=$e(a,l);s&&(s.didRenderScripts=!0);let v=rt(f,null,i);r.useEffect(()=>{at=!0},[]);let y=r.useMemo(()=>{var i;if(m)return null;let s=p?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=h?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];ze(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:s,clientMiddlewareModule:a,hydrateFallbackModule:l,module:u}=i,c=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(r,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:u,varName:"".concat(r,"_main")}];return 1===c.length?"import * as ".concat(r," from ").concat(JSON.stringify(u),";"):[c.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(c.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,d),i=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push("/".concat(s.join("/"))),s.pop();a.forEach(e=>{let n=k(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let l=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(t,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))},[]),b=at||m?[]:(w=t.entry.imports.concat(Ye(v,t,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let _="object"===typeof t.sri?t.sri:{};return Pe(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),at||m?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:_})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:_[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:_[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:_[t],suppressHydrationWarning:!0})),y)}function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function ct(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,o=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Q(t))return r.createElement(dt,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),o);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(dt,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),o)}function dt(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:o,children:s}=e,{routeModules:a}=tt();return null!==(t=a.root)&&void 0!==t&&t.Layout&&!o?s:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,i?r.createElement(lt,null):null)))}var ht="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ht&&(window.__reactRouterVersion="7.9.1")}catch(nT){}function pt(e){let{basename:t,children:n,window:i}=e,o=r.useRef();null==o.current&&(o.current=y({window:i,v5Compat:!0}));let s=o.current,[a,l]=r.useState({action:s.action,location:s.location}),u=r.useCallback(e=>{r.startTransition(()=>l(e))},[l]);return r.useLayoutEffect(()=>s.listen(u),[s,u]),r.createElement(Ne,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s})}var ft=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=r.forwardRef(function(e,t){let n,{onClick:i,discover:s="render",prefetch:a="none",relative:l,reloadDocument:u,replace:d,state:h,target:p,to:m,preventScrollReset:g,viewTransition:v}=e,y=o(e,f),{basename:_}=r.useContext(ae),x="string"===typeof m&&ft.test(m),E=!1;if("string"===typeof m&&x&&(n=m,ht))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=z(t.pathname,_);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:E=!0}catch(nT){w(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let T=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(de(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(ae),{hash:o,pathname:s,search:a}=ge(e,{relative:t}),l=s;return"/"!==n&&(l="/"===s?n:K([n,s])),i.createHref({pathname:l,search:a,hash:o})}(m,{relative:l}),[C,k,A]=function(e,t){let n=r.useContext(et),[i,o]=r.useState(!1),[s,a]=r.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=t,p=r.useRef(null);r.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[i]);let f=()=>{o(!0)},m=()=>{o(!1),a(!1)};return n?"intent"!==e?[s,p,{}]:[s,p,{onFocus:nt(l,f),onBlur:nt(u,m),onMouseEnter:nt(c,f),onMouseLeave:nt(d,m),onTouchStart:nt(h,f)}]:[!1,p,{}]}(a,y),O=function(e){let{target:t,replace:n,state:i,preventScrollReset:o,relative:s,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=me(),u=he(),c=ge(e,{relative:s});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:S(u)===S(c);l(e,{replace:t,state:i,preventScrollReset:o,relative:s,viewTransition:a})}},[u,l,c,n,i,t,e,o,s,a])}(m,{replace:d,state:h,target:p,preventScrollReset:g,relative:l,viewTransition:v});let I=r.createElement("a",c(c(c({},y),A),{},{href:n||T,onClick:E||u?i:function(e){i&&i(e),e.defaultPrevented||O(e)},ref:ut(t,k),target:p,"data-discover":x||"render"!==s?void 0:"true"}));return C&&!x?r.createElement(r.Fragment,null,I,r.createElement(it,{page:T})):I});mt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:a=!1,style:l,to:u,viewTransition:d,children:h}=e,p=o(e,m),f=ge(u,{relative:p.relative}),g=he(),v=r.useContext(ne),{navigator:y,basename:w}=r.useContext(ae),_=null!=v&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(ie);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=yt("useViewTransitionState"),o=ge(e,{relative:t});if(!n.isTransitioning)return!1;let s=z(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=z(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=B(o.pathname,a)||null!=B(o.pathname,s)}(f)&&!0===d,x=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,S=g.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(S=S.toLowerCase(),E=E?E.toLowerCase():null,x=x.toLowerCase()),E&&w&&(E=z(E,w)||E);const T="/"!==x&&x.endsWith("/")?x.length-1:x.length;let C,k=S===x||!a&&S.startsWith(x)&&"/"===S.charAt(T),A=null!=E&&(E===x||!a&&E.startsWith(x)&&"/"===E.charAt(x.length)),O={isActive:k,isPending:A,isTransitioning:_},I=k?n:void 0;C="function"===typeof s?s(O):[s,k?"active":null,A?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(O):l;return r.createElement(mt,c(c({},p),{},{"aria-current":I,className:C,ref:t,style:P,to:u,viewTransition:d}),"function"===typeof h?h(O):h)}).displayName="NavLink";var gt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:s,reloadDocument:a,replace:l,state:u,method:d=je,action:h,onSubmit:p,relative:f,preventScrollReset:m,viewTransition:v}=e,y=o(e,g),w=_t(),_=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(ae),i=r.useContext(ue);b(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),s=c({},ge(e||".",{relative:t})),a=he();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:K([n,s.pathname]));return S(s)}(h,{relative:f}),x="get"===d.toLowerCase()?"get":"post",E="string"===typeof h&&ft.test(h);return r.createElement("form",c(c({ref:t,method:x,action:_,onSubmit:a?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;w(t||e.currentTarget,{fetcherKey:i,method:n,navigate:s,replace:l,state:u,relative:f,preventScrollReset:m,viewTransition:v})}},y),{},{"data-discover":E||"render"!==n?void 0:"true"}))});function vt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function yt(e){let t=r.useContext(te);return b(t,vt(e)),t}gt.displayName="Form";var bt=0,wt=()=>"__".concat(String(++bt),"__");function _t(){let{router:e}=yt("useSubmit"),{basename:t}=r.useContext(ae),n=Ce("useRouteId");return r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:s,encType:a,formData:l,body:u}=qe(r,t);if(!1===i.navigate){let t=i.fetcherKey||wt();await e.fetch(t,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function xt(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function St(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Et(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Tt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ct(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function kt(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function At(e,t){let n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Ot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function It(e,t,n){let r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2];return e[0]=i*l-o*a,e[1]=o*s-r*l,e[2]=r*a-i*s,e}const Pt=function(){const e=[0,0,0],t=[0,0,0];return function(n,r){St(e,n),St(t,r),At(e,e),At(t,t);let i=Ot(e,t);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();class Rt extends Array{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(function(e,t,n,r){e[0]=t,e[1]=n,e[2]=r}(this,e,t,n),this)}copy(e){return St(this,e),this}add(e,t){return t?Et(this,e,t):Et(this,this,e),this}sub(e,t){return t?Tt(this,e,t):Tt(this,this,e),this}multiply(e){var t,n,r;return e.length?(n=this,r=e,(t=this)[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2]):Ct(this,this,e),this}divide(e){var t,n,r;return e.length?(n=this,r=e,(t=this)[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2]):Ct(this,this,1/e),this}inverse(){var e,t;return t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,(e=this)[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],this}len(){return xt(this)}distance(e){return e?function(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}(this,e):xt(this)}squaredLen(){return kt(this)}squaredDistance(e){return e?function(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}(this,e):kt(this)}negate(){var e,t;return t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,(e=this)[0]=-t[0],e[1]=-t[1],e[2]=-t[2],this}cross(e,t){return t?It(this,e,t):It(this,this,e),this}scale(e){return Ct(this,this,e),this}normalize(){return At(this,this),this}dot(e){return Ot(this,e)}equals(e){return n=e,(t=this)[0]===n[0]&&t[1]===n[1]&&t[2]===n[2];var t,n}applyMatrix3(e){return function(e,t,n){let r=t[0],i=t[1],o=t[2];e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8]}(this,this,e),this}applyMatrix4(e){return function(e,t,n){let r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s}(this,this,e),this}scaleRotateMatrix4(e){return function(e,t,n){let r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*o)/s,e[1]=(n[1]*r+n[5]*i+n[9]*o)/s,e[2]=(n[2]*r+n[6]*i+n[10]*o)/s}(this,this,e),this}applyQuaternion(e){return function(e,t,n){let r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2],u=a*o-l*i,c=l*r-s*o,d=s*i-a*r,h=a*d-l*c,p=l*u-s*d,f=s*c-a*u,m=2*n[3];u*=m,c*=m,d*=m,h*=2,p*=2,f*=2,e[0]=r+u+h,e[1]=i+c+p,e[2]=o+d+f}(this,this,e),this}angle(e){return Pt(this,e)}lerp(e,t){return function(e,t,n,r){let i=t[0],o=t[1],s=t[2];e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=s+r*(n[2]-s)}(this,this,e,t),this}smoothLerp(e,t,n){return function(e,t,n,r,i){const o=Math.exp(-r*i);let s=t[0],a=t[1],l=t[2];e[0]=n[0]+(s-n[0])*o,e[1]=n[1]+(a-n[1])*o,e[2]=n[2]+(l-n[2])*o}(this,this,e,t,n),this}clone(){return new Rt(this[0],this[1],this[2])}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],n=this[1],r=this[2];return this[0]=e[0]*t+e[4]*n+e[8]*r,this[1]=e[1]*t+e[5]*n+e[9]*r,this[2]=e[2]*t+e[6]*n+e[10]*r,this.normalize()}}const Nt=new Rt;let Mt=1;class Dt{constructor(){let{canvas:e=document.createElement("canvas"),width:t=300,height:n=150,dpr:r=1,alpha:i=!1,depth:o=!0,stencil:s=!1,antialias:a=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:u=!1,powerPreference:c="default",autoClear:d=!0,webgl:h=2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const p={alpha:i,depth:o,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c};this.dpr=r,this.alpha=i,this.color=!0,this.depth=o,this.stencil=s,this.premultipliedAlpha=l,this.autoClear=d,this.id=Mt++,2===h&&(this.gl=e.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=n,this.state.viewport.y=r,this.gl.viewport(n,r,e,t))}setScissor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.gl.scissor(n,r,e,t)}enable(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}disable(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,n,r){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=r,void 0!==n?this.gl.blendFuncSeparate(e,t,n,r):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t||(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,void 0!==t?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,n){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===n||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=n||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,n||0))}setStencilOp(e,t,n){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===n||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=n,this.gl.stencilOp(e,t,n))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer(){let{target:e=this.gl.FRAMEBUFFER,buffer:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,n){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList(e){let{scene:t,camera:n,frustumCull:r,sort:i}=e,o=[];if(n&&r&&n.updateFrustum(),t.traverse(e=>{if(!e.visible)return!0;e.draw&&(r&&e.frustumCulled&&n&&!n.frustumIntersectsMesh(e)||o.push(e))}),i){const e=[],t=[],r=[];o.forEach(i=>{i.program.transparent?i.program.depthTest?t.push(i):r.push(i):e.push(i),i.zDepth=0,0===i.renderOrder&&i.program.depthTest&&n&&(i.worldMatrix.getTranslation(Nt),Nt.applyMatrix4(n.projectionViewMatrix),i.zDepth=Nt.z)}),e.sort(this.sortOpaque),t.sort(this.sortTransparent),r.sort(this.sortUI),o=e.concat(t,r)}return o}render(e){let{scene:t,camera:n,target:r=null,update:i=!0,sort:o=!0,frustumCull:s=!0,clear:a}=e;null===r?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(a||this.autoClear&&!1!==a)&&(!this.depth||r&&!r.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!r||r.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&t.updateMatrixWorld(),n&&n.updateMatrixWorld();this.getRenderList({scene:t,camera:n,frustumCull:s,sort:o}).forEach(e=>{e.draw({camera:n})})}}const jt=new Rt;let Lt=1,Ut=1,Ft=!1;class Bt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=Lt++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in t)this.addAttribute(n,t[n])}addAttribute(e,t){if(this.attributes[e]=t,t.id=Ut++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else"index"===e?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((e,t)=>{let{name:n,type:r}=t;if(!this.attributes[n])return void console.warn("active attribute ".concat(n," not being supplied"));const i=this.attributes[n];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.buffer;let o=1;35674===r&&(o=2),35675===r&&(o=3),35676===r&&(o=4);const s=i.size/o,a=1===o?0:o*o*4,l=1===o?0:4*o;for(let u=0;u<o;u++)this.gl.vertexAttribPointer(e+u,s,i.type,i.normalized,i.stride+a,i.offset+u*l),this.gl.enableVertexAttribArray(e+u),this.gl.renderer.vertexAttribDivisor(e+u,i.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw(e){var t;let{program:n,mode:r=this.gl.TRIANGLES}=e;this.gl.renderer.currentGeometry!=="".concat(this.id,"_").concat(n.attributeOrder)&&(this.VAOs[n.attributeOrder]||this.createVAO(n),this.gl.renderer.bindVertexArray(this.VAOs[n.attributeOrder]),this.gl.renderer.currentGeometry="".concat(this.id,"_").concat(n.attributeOrder)),n.attributeLocations.forEach((e,t)=>{let{name:n}=t;const r=this.attributes[n];r.needsUpdate&&this.updateAttribute(r)});let i=2;(null===(t=this.attributes.index)||void 0===t?void 0:t.type)===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(r,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(r,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;return e.data?e:Ft?void 0:(console.warn("No position buffer data found to compute bounds"),Ft=!0)}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||(this.bounds={min:new Rt,max:new Rt,center:new Rt,scale:new Rt,radius:1/0});const r=this.bounds.min,i=this.bounds.max,o=this.bounds.center,s=this.bounds.scale;r.set(1/0),i.set(-1/0);for(let a=0,l=t.length;a<l;a+=n){const e=t[a],n=t[a+1],o=t[a+2];r.x=Math.min(e,r.x),r.y=Math.min(n,r.y),r.z=Math.min(o,r.z),i.x=Math.max(e,i.x),i.y=Math.max(n,i.y),i.z=Math.max(o,i.z)}s.sub(i,r),o.add(r,i).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||this.computeBoundingBox(e);let r=0;for(let i=0,o=t.length;i<o;i+=n)jt.fromArray(t,i),r=Math.max(r,this.bounds.center.squaredDistance(jt));this.bounds.radius=Math.sqrt(r)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}class Vt extends Bt{constructor(e){let{attributes:t={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}}let qt=1;const zt={};class Ht{constructor(e){let{vertex:t,fragment:n,uniforms:r={},transparent:i=!1,cullFace:o=e.BACK,frontFace:s=e.CCW,depthTest:a=!0,depthWrite:l=!0,depthFunc:u=e.LEQUAL}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=r,this.id=qt++,t||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=i,this.cullFace=o,this.frontFace=s,this.depthTest=a,this.depthWrite=l,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:n})}setShaders(e){let{vertex:t,fragment:n}=e;if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),""!==this.gl.getShaderInfoLog(this.vertexShader)&&console.warn("".concat(this.gl.getShaderInfoLog(this.vertexShader),"\nVertex Shader\n").concat(Wt(t)))),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),""!==this.gl.getShaderInfoLog(this.fragmentShader)&&console.warn("".concat(this.gl.getShaderInfoLog(this.fragmentShader),"\nFragment Shader\n").concat(Wt(n)))),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let s=0;s<r;s++){let e=this.gl.getActiveUniform(this.program,s);this.uniformLocations.set(e,this.gl.getUniformLocation(this.program,e.name));const t=e.name.match(/(\w+)/g);e.uniformName=t[0],e.nameComponents=t.slice(1)}this.attributeLocations=new Map;const i=[],o=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let s=0;s<o;s++){const e=this.gl.getActiveAttrib(this.program,s),t=this.gl.getAttribLocation(this.program,e.name);-1!==t&&(i[t]=e.name,this.attributeLocations.set(e,t))}this.attributeOrder=i.join("")}setBlendFunc(e,t,n,r){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=r,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,n){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=n}setStencilOp(e,t,n){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=n}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use(){let{flipFaces:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((e,n)=>{let r=this.uniforms[n.uniformName];for(const t of n.nameComponents){if(!r)break;if(!(t in r)){if(Array.isArray(r.value))break;r=void 0;break}r=r[t]}if(!r)return Kt("Active uniform ".concat(n.name," has not been supplied"));if(r&&void 0===r.value)return Kt("".concat(n.name," uniform is missing a value parameter"));if(r.value.texture)return t+=1,r.value.update(t),Gt(this.gl,n.type,e,t);if(r.value.length&&r.value[0].texture){const i=[];return r.value.forEach(e=>{t+=1,e.update(t),i.push(t)}),Gt(this.gl,n.type,e,i)}Gt(this.gl,n.type,e,r.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Gt(e,t,n,r){r=r.length?function(e){const t=e.length,n=e[0].length;if(void 0===n)return e;const r=t*n;let i=zt[r];i||(zt[r]=i=new Float32Array(r));for(let o=0;o<t;o++)i.set(e[o],o*n);return i}(r):r;const i=e.renderer.state.uniformLocations.get(n);if(r.length)if(void 0===i||i.length!==r.length)e.renderer.state.uniformLocations.set(n,r.slice(0));else{if(function(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}(i,r))return;i.set?i.set(r):function(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t[n]}(i,r),e.renderer.state.uniformLocations.set(n,i)}else{if(i===r)return;e.renderer.state.uniformLocations.set(n,r)}switch(t){case 5126:return r.length?e.uniform1fv(n,r):e.uniform1f(n,r);case 35664:return e.uniform2fv(n,r);case 35665:return e.uniform3fv(n,r);case 35666:return e.uniform4fv(n,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?e.uniform1iv(n,r):e.uniform1i(n,r);case 35671:case 35667:return e.uniform2iv(n,r);case 35672:case 35668:return e.uniform3iv(n,r);case 35673:case 35669:return e.uniform4iv(n,r);case 35674:return e.uniformMatrix2fv(n,!1,r);case 35675:return e.uniformMatrix3fv(n,!1,r);case 35676:return e.uniformMatrix4fv(n,!1,r)}}function Wt(e){let t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}let Jt=0;function Kt(e){Jt>100||(console.warn(e),Jt++,Jt>100&&console.warn("More than 100 program warnings - stopping logs."))}function Yt(e,t,n){let r=t[0],i=t[1],o=t[2],s=t[3],a=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+s*a+i*u-o*l,e[1]=i*c+s*l+o*a-r*u,e[2]=o*c+s*u+r*l-i*a,e[3]=s*c-r*a-i*l-o*u,e}const Xt=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},$t=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},Qt=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},Zt=function(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=o*s,e};class en extends Array{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1),this.onChange=()=>{},this._target=this;const e=["0","1","2","3"];return new Proxy(this,{set(t,n){const r=Reflect.set(...arguments);return r&&e.includes(n)&&t.onChange(),r}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){var e;return(e=this._target)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.onChange(),this}set(e,t,n,r){return e.length?this.copy(e):($t(this._target,e,t,n,r),this.onChange(),this)}rotateX(e){return function(e,t,n){n*=.5;let r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l+s*a,e[1]=i*l+o*a,e[2]=o*l-i*a,e[3]=s*l-r*a}(this._target,this._target,e),this.onChange(),this}rotateY(e){return function(e,t,n){n*=.5;let r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l-o*a,e[1]=i*l+s*a,e[2]=o*l+r*a,e[3]=s*l-i*a}(this._target,this._target,e),this.onChange(),this}rotateZ(e){return function(e,t,n){n*=.5;let r=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);e[0]=r*l+i*a,e[1]=i*l-r*a,e[2]=o*l+s*a,e[3]=s*l-o*a}(this._target,this._target,e),this.onChange(),this}inverse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return function(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;e[0]=-n*a,e[1]=-r*a,e[2]=-i*a,e[3]=o*a}(this._target,e),this.onChange(),this}conjugate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;var t,n;return t=this._target,n=e,t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],this.onChange(),this}copy(e){return Xt(this._target,e),this.onChange(),this}normalize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._target;return Zt(this._target,e),this.onChange(),this}multiply(e,t){return t?Yt(this._target,e,t):Yt(this._target,this._target,e),this.onChange(),this}dot(e){return Qt(this._target,e)}fromMatrix3(e){return function(e,t){let n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);let i=(r+1)%3,o=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*o+o]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*i+o]-t[3*o+i])*n,e[i]=(t[3*i+r]+t[3*r+i])*n,e[o]=(t[3*o+r]+t[3*r+o])*n}}(this._target,e),this.onChange(),this}fromEuler(e,t){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ",r=Math.sin(.5*t[0]),i=Math.cos(.5*t[0]),o=Math.sin(.5*t[1]),s=Math.cos(.5*t[1]),a=Math.sin(.5*t[2]),l=Math.cos(.5*t[2]);"XYZ"===n?(e[0]=r*s*l+i*o*a,e[1]=i*o*l-r*s*a,e[2]=i*s*a+r*o*l,e[3]=i*s*l-r*o*a):"YXZ"===n?(e[0]=r*s*l+i*o*a,e[1]=i*o*l-r*s*a,e[2]=i*s*a-r*o*l,e[3]=i*s*l+r*o*a):"ZXY"===n?(e[0]=r*s*l-i*o*a,e[1]=i*o*l+r*s*a,e[2]=i*s*a+r*o*l,e[3]=i*s*l-r*o*a):"ZYX"===n?(e[0]=r*s*l-i*o*a,e[1]=i*o*l+r*s*a,e[2]=i*s*a-r*o*l,e[3]=i*s*l+r*o*a):"YZX"===n?(e[0]=r*s*l+i*o*a,e[1]=i*o*l+r*s*a,e[2]=i*s*a-r*o*l,e[3]=i*s*l-r*o*a):"XZY"===n&&(e[0]=r*s*l-i*o*a,e[1]=i*o*l-r*s*a,e[2]=i*s*a+r*o*l,e[3]=i*s*l+r*o*a)}(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return function(e,t,n){n*=.5;let r=Math.sin(n);e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n)}(this._target,e,t),this.onChange(),this}slerp(e,t){return function(e,t,n,r){let i,o,s,a,l,u=t[0],c=t[1],d=t[2],h=t[3],p=n[0],f=n[1],m=n[2],g=n[3];o=u*p+c*f+d*m+h*g,o<0&&(o=-o,p=-p,f=-f,m=-m,g=-g),1-o>1e-6?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,l=Math.sin(r*i)/s):(a=1-r,l=r),e[0]=a*u+l*p,e[1]=a*c+l*f,e[2]=a*d+l*m,e[3]=a*h+l*g}(this._target,this._target,e,t),this.onChange(),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}function tn(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15];return(t*s-n*o)*(d*g-h*m)-(t*a-r*o)*(c*g-h*f)+(t*l-i*o)*(c*m-d*f)+(n*a-r*s)*(u*g-h*p)-(n*l-i*s)*(u*m-d*p)+(r*l-i*a)*(u*f-c*p)}function nn(e,t,n){let r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],p=t[10],f=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n[0],w=n[1],_=n[2],x=n[3];return e[0]=b*r+w*a+_*d+x*m,e[1]=b*i+w*l+_*h+x*g,e[2]=b*o+w*u+_*p+x*v,e[3]=b*s+w*c+_*f+x*y,b=n[4],w=n[5],_=n[6],x=n[7],e[4]=b*r+w*a+_*d+x*m,e[5]=b*i+w*l+_*h+x*g,e[6]=b*o+w*u+_*p+x*v,e[7]=b*s+w*c+_*f+x*y,b=n[8],w=n[9],_=n[10],x=n[11],e[8]=b*r+w*a+_*d+x*m,e[9]=b*i+w*l+_*h+x*g,e[10]=b*o+w*u+_*p+x*v,e[11]=b*s+w*c+_*f+x*y,b=n[12],w=n[13],_=n[14],x=n[15],e[12]=b*r+w*a+_*d+x*m,e[13]=b*i+w*l+_*h+x*g,e[14]=b*o+w*u+_*p+x*v,e[15]=b*s+w*c+_*f+x*y,e}function rn(e,t){let n=t[0],r=t[1],i=t[2],o=t[4],s=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,s,a),e[2]=Math.hypot(l,u,c),e}const on=function(){const e=[1,1,1];return function(t,n){let r=e;rn(r,n);let i=1/r[0],o=1/r[1],s=1/r[2],a=n[0]*i,l=n[1]*o,u=n[2]*s,c=n[4]*i,d=n[5]*o,h=n[6]*s,p=n[8]*i,f=n[9]*o,m=n[10]*s,g=a+d+m,v=0;return g>0?(v=2*Math.sqrt(g+1),t[3]=.25*v,t[0]=(h-f)/v,t[1]=(p-u)/v,t[2]=(l-c)/v):a>d&&a>m?(v=2*Math.sqrt(1+a-d-m),t[3]=(h-f)/v,t[0]=.25*v,t[1]=(l+c)/v,t[2]=(p+u)/v):d>m?(v=2*Math.sqrt(1+d-a-m),t[3]=(p-u)/v,t[0]=(l+c)/v,t[1]=.25*v,t[2]=(h+f)/v):(v=2*Math.sqrt(1+m-a-d),t[3]=(l-c)/v,t[0]=(p+u)/v,t[1]=(h+f)/v,t[2]=.25*v),t}}();function sn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function an(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}class ln extends Array{constructor(){return super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,arguments.length>15&&void 0!==arguments[15]?arguments[15]:1),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,n,r,i,o,s,a,l,u,c,d,h,p,f,m){return e.length?this.copy(e):(function(e,t,n,r,i,o,s,a,l,u,c,d,h,p,f,m,g){e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=s,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=d,e[11]=h,e[12]=p,e[13]=f,e[14]=m,e[15]=g}(this,e,t,n,r,i,o,s,a,l,u,c,d,h,p,f,m),this)}translate(e){return function(e,t,n){let r,i,o,s,a,l,u,c,d,h,p,f,m=n[0],g=n[1],v=n[2];t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],p=t[10],f=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=p,e[11]=f,e[12]=r*m+a*g+d*v+t[12],e[13]=i*m+l*g+h*v+t[13],e[14]=o*m+u*g+p*v+t[14],e[15]=s*m+c*g+f*v+t[15])}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}rotate(e,t){return function(e,t,n,r){let i,o,s,a,l,u,c,d,h,p,f,m,g,v,y,b,w,_,x,S,E,T,C,k,A=r[0],O=r[1],I=r[2],P=Math.hypot(A,O,I);Math.abs(P)<1e-6||(P=1/P,A*=P,O*=P,I*=P,i=Math.sin(n),o=Math.cos(n),s=1-o,a=t[0],l=t[1],u=t[2],c=t[3],d=t[4],h=t[5],p=t[6],f=t[7],m=t[8],g=t[9],v=t[10],y=t[11],b=A*A*s+o,w=O*A*s+I*i,_=I*A*s-O*i,x=A*O*s-I*i,S=O*O*s+o,E=I*O*s+A*i,T=A*I*s+O*i,C=O*I*s-A*i,k=I*I*s+o,e[0]=a*b+d*w+m*_,e[1]=l*b+h*w+g*_,e[2]=u*b+p*w+v*_,e[3]=c*b+f*w+y*_,e[4]=a*x+d*S+m*E,e[5]=l*x+h*S+g*E,e[6]=u*x+p*S+v*E,e[7]=c*x+f*S+y*E,e[8]=a*T+d*C+m*k,e[9]=l*T+h*C+g*k,e[10]=u*T+p*C+v*k,e[11]=c*T+f*C+y*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,e,t),this}scale(e){return function(e,t,n){let r=n[0],i=n[1],o=n[2];e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,"number"===typeof e?[e,e,e]:e),this}add(e,t){return t?sn(this,e,t):sn(this,this,e),this}sub(e,t){return t?an(this,e,t):an(this,this,e),this}multiply(e,t){var n,r,i;return e.length?t?nn(this,e,t):nn(this,this,e):(r=this,i=e,(n=this)[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=r[7]*i,n[8]=r[8]*i,n[9]=r[9]*i,n[10]=r[10]*i,n[11]=r[11]*i,n[12]=r[12]*i,n[13]=r[13]*i,n[14]=r[14]*i,n[15]=r[15]*i),this}identity(){var e;return(e=this)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}copy(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}fromPerspective(){let{fov:e,aspect:t,near:n,far:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t,n,r,i){let o=1/Math.tan(t/2),s=1/(r-i);e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*s,e[15]=0}(this,e,t,n,r),this}fromOrthogonal(e){let{left:t,right:n,bottom:r,top:i,near:o,far:s}=e;return function(e,t,n,r,i,o,s){let a=1/(t-n),l=1/(r-i),u=1/(o-s);e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*l,e[14]=(s+o)*u,e[15]=1}(this,t,n,r,i,o,s),this}fromQuaternion(e){return function(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,a=r+r,l=i+i,u=n*s,c=r*s,d=r*a,h=i*s,p=i*a,f=i*l,m=o*s,g=o*a,v=o*l;e[0]=1-d-f,e[1]=c+v,e[2]=h-g,e[3]=0,e[4]=c-v,e[5]=1-u-f,e[6]=p+m,e[7]=0,e[8]=h+g,e[9]=p-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(){return function(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],v=t[15],y=n*a-r*s,b=n*l-i*s,w=n*u-o*s,_=r*l-i*a,x=r*u-o*a,S=i*u-o*l,E=c*m-d*f,T=c*g-h*f,C=c*v-p*f,k=d*g-h*m,A=d*v-p*m,O=h*v-p*g,I=y*O-b*A+w*k+_*C-x*T+S*E;I&&(I=1/I,e[0]=(a*O-l*A+u*k)*I,e[1]=(i*A-r*O-o*k)*I,e[2]=(m*S-g*x+v*_)*I,e[3]=(h*x-d*S-p*_)*I,e[4]=(l*C-s*O-u*T)*I,e[5]=(n*O-i*C+o*T)*I,e[6]=(g*w-f*S-v*b)*I,e[7]=(c*S-h*w+p*b)*I,e[8]=(s*A-a*C+u*E)*I,e[9]=(r*C-n*A-o*E)*I,e[10]=(f*x-m*w+v*y)*I,e[11]=(d*w-c*x-p*y)*I,e[12]=(a*T-s*k-l*E)*I,e[13]=(n*k-r*T+i*E)*I,e[14]=(m*b-f*_-g*y)*I,e[15]=(c*_-d*b+h*y)*I)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}compose(e,t,n){return function(e,t,n,r){const i=e,o=t[0],s=t[1],a=t[2],l=t[3],u=o+o,c=s+s,d=a+a,h=o*u,p=o*c,f=o*d,m=s*c,g=s*d,v=a*d,y=l*u,b=l*c,w=l*d,_=r[0],x=r[1],S=r[2];i[0]=(1-(m+v))*_,i[1]=(p+w)*_,i[2]=(f-b)*_,i[3]=0,i[4]=(p-w)*x,i[5]=(1-(h+v))*x,i[6]=(g+y)*x,i[7]=0,i[8]=(f+b)*S,i[9]=(g-y)*S,i[10]=(1-(h+m))*S,i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1}(this,e,t,n),this}decompose(e,t,n){return function(e,t,n,r){let i=xt([e[0],e[1],e[2]]);const o=xt([e[4],e[5],e[6]]),s=xt([e[8],e[9],e[10]]);tn(e)<0&&(i=-i),n[0]=e[12],n[1]=e[13],n[2]=e[14];const a=e.slice(),l=1/i,u=1/o,c=1/s;a[0]*=l,a[1]*=l,a[2]*=l,a[4]*=u,a[5]*=u,a[6]*=u,a[8]*=c,a[9]*=c,a[10]*=c,on(t,a),r[0]=i,r[1]=o,r[2]=s}(this,e,t,n),this}getRotation(e){return on(e,this),this}getTranslation(e){var t,n;return n=this,(t=e)[0]=n[12],t[1]=n[13],t[2]=n[14],this}getScaling(e){return rn(e,this),this}getMaxScaleOnAxis(){return function(e){let t=e[0],n=e[1],r=e[2],i=e[4],o=e[5],s=e[6],a=e[8],l=e[9],u=e[10];const c=t*t+n*n+r*r,d=i*i+o*o+s*s,h=a*a+l*l+u*u;return Math.sqrt(Math.max(c,d,h))}(this)}lookAt(e,t,n){return function(e,t,n,r){let i=t[0],o=t[1],s=t[2],a=r[0],l=r[1],u=r[2],c=i-n[0],d=o-n[1],h=s-n[2],p=c*c+d*d+h*h;0===p?h=1:(p=1/Math.sqrt(p),c*=p,d*=p,h*=p);let f=l*h-u*d,m=u*c-a*h,g=a*d-l*c;p=f*f+m*m+g*g,0===p&&(u?a+=1e-6:l?u+=1e-6:l+=1e-6,f=l*h-u*d,m=u*c-a*h,g=a*d-l*c,p=f*f+m*m+g*g),p=1/Math.sqrt(p),f*=p,m*=p,g*=p,e[0]=f,e[1]=m,e[2]=g,e[3]=0,e[4]=d*g-h*m,e[5]=h*f-c*g,e[6]=c*m-d*f,e[7]=0,e[8]=c,e[9]=d,e[10]=h,e[11]=0,e[12]=i,e[13]=o,e[14]=s,e[15]=1}(this,e,t,n),this}determinant(){return tn(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}const un=new ln;class cn extends Array{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YXZ";super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e),this.order=t,this.onChange=()=>{},this._target=this;const n=["0","1","2"];return new Proxy(this,{set(e,t){const r=Reflect.set(...arguments);return r&&n.includes(t)&&e.onChange(),r}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=n,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ";"XYZ"===n?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):"YXZ"===n?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):"ZXY"===n?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):"ZYX"===n?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):"YZX"===n?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):"XZY"===n&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0))}(this._target,e,t),this.onChange(),this}fromQuaternion(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order,n=arguments.length>2?arguments[2]:void 0;return un.fromQuaternion(e),this._target.fromRotationMatrix(un,t),n||this.onChange(),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class dn{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new ln,this.worldMatrix=new ln,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new Rt,this.quaternion=new en,this.scale=new Rt(1),this.rotation=new cn,this.up=new Rt(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function hn(e,t,n){let r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=n[0],p=n[1],f=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],w=n[8];return e[0]=h*r+p*s+f*u,e[1]=h*i+p*a+f*c,e[2]=h*o+p*l+f*d,e[3]=m*r+g*s+v*u,e[4]=m*i+g*a+v*c,e[5]=m*o+g*l+v*d,e[6]=y*r+b*s+w*u,e[7]=y*i+b*a+w*c,e[8]=y*o+b*l+w*d,e}class pn extends Array{constructor(){return super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:1),this}set(e,t,n,r,i,o,s,a,l){return e.length?this.copy(e):(function(e,t,n,r,i,o,s,a,l,u){e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=s,e[6]=a,e[7]=l,e[8]=u}(this,e,t,n,r,i,o,s,a,l),this)}translate(e){return function(e,t,n){let r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=n[0],p=n[1];e[0]=r,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=h*r+p*s+u,e[7]=h*i+p*a+c,e[8]=h*o+p*l+d}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}rotate(e){return function(e,t,n){let r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=Math.sin(n),p=Math.cos(n);e[0]=p*r+h*s,e[1]=p*i+h*a,e[2]=p*o+h*l,e[3]=p*s-h*r,e[4]=p*a-h*i,e[5]=p*l-h*o,e[6]=u,e[7]=c,e[8]=d}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}scale(e){return function(e,t,n){let r=n[0],i=n[1];e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]}(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e),this}multiply(e,t){return t?hn(this,e,t):hn(this,this,e),this}identity(){var e;return(e=this)[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this}copy(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}fromMatrix4(e){var t,n;return n=e,(t=this)[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],this}fromQuaternion(e){return function(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],s=n+n,a=r+r,l=i+i,u=n*s,c=r*s,d=r*a,h=i*s,p=i*a,f=i*l,m=o*s,g=o*a,v=o*l;e[0]=1-d-f,e[3]=c-v,e[6]=h+g,e[1]=c+v,e[4]=1-u-f,e[7]=p-m,e[2]=h-g,e[5]=p+m,e[8]=1-u-d}(this,e),this}fromBasis(e,t,n){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2]),this}inverse(){return function(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=c*s-a*u,h=-c*o+a*l,p=u*o-s*l,f=n*d+r*h+i*p;f&&(f=1/f,e[0]=d*f,e[1]=(-c*r+i*u)*f,e[2]=(a*r-i*s)*f,e[3]=h*f,e[4]=(c*n-i*l)*f,e[5]=(-a*n+i*o)*f,e[6]=p*f,e[7]=(-u*n+r*l)*f,e[8]=(s*n-r*o)*f)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:this),this}getNormalMatrix(e){return function(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],v=t[15],y=n*a-r*s,b=n*l-i*s,w=n*u-o*s,_=r*l-i*a,x=r*u-o*a,S=i*u-o*l,E=c*m-d*f,T=c*g-h*f,C=c*v-p*f,k=d*g-h*m,A=d*v-p*m,O=h*v-p*g,I=y*O-b*A+w*k+_*C-x*T+S*E;I&&(I=1/I,e[0]=(a*O-l*A+u*k)*I,e[1]=(l*C-s*O-u*T)*I,e[2]=(s*A-a*C+u*E)*I,e[3]=(i*A-r*O-o*k)*I,e[4]=(n*O-i*C+o*T)*I,e[5]=(r*C-n*A-o*E)*I,e[6]=(m*S-g*x+v*_)*I,e[7]=(g*w-f*S-v*b)*I,e[8]=(f*x-m*w+v*y)*I)}(this,e),this}}let fn=0;class mn extends dn{constructor(e){let{geometry:t,program:n,mode:r=e.TRIANGLES,frustumCulled:i=!0,renderOrder:o=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=fn++,this.geometry=t,this.program=n,this.mode=r,this.frustumCulled=i,this.renderOrder=o,this.modelViewMatrix=new ln,this.normalMatrix=new pn,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw(){let{camera:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}))}}var gn=n(579);const vn=e=>{let{color:t="#ffffff",speed:n=1,direction:i="forward",scale:o=1,opacity:s=1,mouseInteractive:a=!0}=e;const l=(0,r.useRef)(null),u=(0,r.useRef)({x:0,y:0});return(0,r.useEffect)(()=>{if(!l.current)return;const e=t?1:0,r=t?(e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255]:[1,.5,.2]})(t):[1,1,1],c="reverse"===i?-1:1,d=new Dt({webgl:2,alpha:!0,antialias:!1,dpr:Math.min(window.devicePixelRatio||1,2)}),h=d.gl,p=h.canvas;p.style.display="block",p.style.width="100%",p.style.height="100%",l.current.appendChild(p);const f=new Vt(h),m=new Ht(h,{vertex:"#version 300 es\nprecision highp float;\nin vec2 position;\nin vec2 uv;\nout vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 0.0, 1.0);\n}\n",fragment:"#version 300 es\nprecision highp float;\nuniform vec2 iResolution;\nuniform float iTime;\nuniform vec3 uCustomColor;\nuniform float uUseCustomColor;\nuniform float uSpeed;\nuniform float uDirection;\nuniform float uScale;\nuniform float uOpacity;\nuniform vec2 uMouse;\nuniform float uMouseInteractive;\nout vec4 fragColor;\n\nvoid mainImage(out vec4 o, vec2 C) {\n  vec2 center = iResolution.xy * 0.5;\n  C = (C - center) / uScale + center;\n  \n  vec2 mouseOffset = (uMouse - center) * 0.0002;\n  C += mouseOffset * length(C - center) * step(0.5, uMouseInteractive);\n  \n  float i, d, z, T = iTime * uSpeed * uDirection;\n  vec3 O, p, S;\n\n  for (vec2 r = iResolution.xy, Q; ++i < 60.; O += o.w/d*o.xyz) {\n    p = z*normalize(vec3(C-.5*r,r.y)); \n    p.z -= 4.; \n    S = p;\n    d = p.y-T;\n    \n    p.x += .4*(1.+p.y)*sin(d + p.x*0.1)*cos(.34*d + p.x*0.05); \n    Q = p.xz *= mat2(cos(p.y+vec4(0,11,33,0)-T)); \n    z+= d = abs(sqrt(length(Q*Q)) - .25*(5.+S.y))/3.+8e-4; \n    o = 1.+sin(S.y+p.z*.5+S.z-length(S-p)+vec4(2,1,0,8));\n  }\n  \n  o.xyz = tanh(O/1e4);\n}\n\nbool finite1(float x){ return !(isnan(x) || isinf(x)); }\nvec3 sanitize(vec3 c){\n  return vec3(\n    finite1(c.r) ? c.r : 0.0,\n    finite1(c.g) ? c.g : 0.0,\n    finite1(c.b) ? c.b : 0.0\n  );\n}\n\nvoid main() {\n  vec4 o = vec4(0.0);\n  mainImage(o, gl_FragCoord.xy);\n  vec3 rgb = sanitize(o.rgb);\n  \n  float intensity = (rgb.r + rgb.g + rgb.b) / 3.0;\n  vec3 customColor = intensity * uCustomColor;\n  vec3 finalColor = mix(rgb, customColor, step(0.5, uUseCustomColor));\n  \n  float alpha = length(rgb) * uOpacity;\n  fragColor = vec4(finalColor, alpha);\n}",uniforms:{iTime:{value:0},iResolution:{value:new Float32Array([1,1])},uCustomColor:{value:new Float32Array(r)},uUseCustomColor:{value:e},uSpeed:{value:.4*n},uDirection:{value:c},uScale:{value:o},uOpacity:{value:s},uMouse:{value:new Float32Array([0,0])},uMouseInteractive:{value:a?1:0}}}),g=new mn(h,{geometry:f,program:m}),v=e=>{if(!a||!l.current)return;const t=l.current.getBoundingClientRect();u.current.x=e.clientX-t.left,u.current.y=e.clientY-t.top;const n=m.uniforms.uMouse.value;n[0]=u.current.x,n[1]=u.current.y};a&&l.current.addEventListener("mousemove",v);const y=()=>{if(!l.current)return;const e=l.current.getBoundingClientRect(),t=Math.max(1,Math.floor(e.width)),n=Math.max(1,Math.floor(e.height));d.setSize(t,n);const r=m.uniforms.iResolution.value;r[0]=h.drawingBufferWidth,r[1]=h.drawingBufferHeight},b=new ResizeObserver(y);b.observe(l.current),y();let w=0;const _=performance.now(),x=e=>{let t=.001*(e-_);if("pingpong"===i){const e=Math.sin(.5*t)*c;m.uniforms.uDirection.value=e}m.uniforms.iTime.value=t,d.render({scene:g}),w=requestAnimationFrame(x)};return w=requestAnimationFrame(x),()=>{cancelAnimationFrame(w),b.disconnect(),a&&l.current&&l.current.removeEventListener("mousemove",v);try{l.current&&p.parentNode===l.current&&l.current.removeChild(p)}catch(e){console.warn("Canvas already removed from container")}}},[t,n,i,o,s,a]),(0,gn.jsx)("div",{ref:l,className:"w-full h-full overflow-hidden relative"})};function yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var wn,_n,xn,Sn,En,Tn,Cn,kn,An,On,In,Pn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Rn={duration:.5,overwrite:!1,delay:0},Nn=1e8,Mn=1e-8,Dn=2*Math.PI,jn=Dn/4,Ln=0,Un=Math.sqrt,Fn=Math.cos,Bn=Math.sin,Vn=function(e){return"string"===typeof e},qn=function(e){return"function"===typeof e},zn=function(e){return"number"===typeof e},Hn=function(e){return"undefined"===typeof e},Gn=function(e){return"object"===typeof e},Wn=function(e){return!1!==e},Jn=function(){return"undefined"!==typeof window},Kn=function(e){return qn(e)||Vn(e)},Yn="function"===typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Xn=Array.isArray,$n=/(?:-?\.?\d|\.)+/gi,Qn=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Zn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,er=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,tr=/[+-]=-?[.\d]+/,nr=/[^,'"\[\]\s]+/gi,rr=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ir={},or={},sr=function(e){return(or=jr(e,ir))&&Uo},ar=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},lr=function(e,t){return!t&&console.warn(e)},ur=function(e,t){return e&&(ir[e]=t)&&or&&(or[e]=t)||ir},cr=function(){return 0},dr={suppressEvents:!0,isStart:!0,kill:!1},hr={suppressEvents:!0,kill:!1},pr={suppressEvents:!0},fr={},mr=[],gr={},vr={},yr={},br=30,wr=[],_r="",xr=function(e){var t,n,r=e[0];if(Gn(r)||qn(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=wr.length;n--&&!wr[n].targetTest(r););t=wr[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new $i(e[n],t)))||e.splice(n,1);return e},Sr=function(e){return e._gsap||xr(fi(e))[0]._gsap},Er=function(e,t,n){return(n=e[t])&&qn(n)?e[t]():Hn(n)&&e.getAttribute&&e.getAttribute(t)||n},Tr=function(e,t){return(e=e.split(",")).forEach(t)||e},Cr=function(e){return Math.round(1e5*e)/1e5||0},kr=function(e){return Math.round(1e7*e)/1e7||0},Ar=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},Or=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Ir=function(){var e,t,n=mr.length,r=mr.slice(0);for(gr={},mr.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Pr=function(e){return!!(e._initted||e._startAt||e.add)},Rr=function(e,t,n,r){mr.length&&!_n&&Ir(),e.render(t,n,r||!!(_n&&t<0&&Pr(e))),mr.length&&!_n&&Ir()},Nr=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(nr).length<2?t:Vn(e)?e.trim():e},Mr=function(e){return e},Dr=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},jr=function(e,t){for(var n in t)e[n]=t[n];return e},Lr=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=Gn(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Ur=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},Fr=function(e){var t,n=e.parent||Sn,r=e.keyframes?(t=Xn(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):Dr;if(Wn(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},Br=function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,s=e[r];if(i)for(o=t[i];s&&s[i]>o;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=s,t.parent=t._dp=e,t},Vr=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},qr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},zr=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Hr=function(e,t,n,r){return e._startAt&&(_n?e._startAt.revert(hr):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Gr=function e(t){return!t||t._ts&&e(t.parent)},Wr=function(e){return e._repeat?Jr(e._tTime,e=e.duration()+e._rDelay)*e:0},Jr=function(e,t){var n=Math.floor(e=kr(e/t));return e&&n===e?n-1:n},Kr=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Yr=function(e){return e._end=kr(e._start+(e._tDur/Math.abs(e._ts||e._rts||Mn)||0))},Xr=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=kr(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Yr(e),n._dirty||zr(n,e)),e},$r=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Kr(e.rawTime(),t),(!t._dur||ui(0,t.totalDuration(),n)-t._tTime>Mn)&&t.render(n,!0)),zr(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Qr=function(e,t,n,r){return t.parent&&qr(t),t._start=kr((zn(n)?n:n||e!==Sn?si(e,n,t):e._time)+t._delay),t._end=kr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Br(e,t,"_first","_last",e._sort?"_start":0),ni(t)||(e._recent=t),r||$r(e,t),e._ts<0&&Xr(e,e._tTime),e},Zr=function(e,t){return(ir.ScrollTrigger||ar("scrollTrigger",t))&&ir.ScrollTrigger.create(t,e)},ei=function(e,t,n,r,i){return oo(e,t,i),e._initted?!n&&e._pt&&!_n&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&An!==Ui.frame?(mr.push(e),e._lazy=[i,r],1):void 0:1},ti=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},ni=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},ri=function(e,t,n,r){var i=e._repeat,o=kr(t)||0,s=e._tTime/e._tDur;return s&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:kr(o*(i+1)+e._rDelay*i):o,s>0&&!r&&Xr(e,e._tTime=e._tDur*s),e.parent&&Yr(e),n||zr(e.parent,e),e},ii=function(e){return e instanceof Zi?zr(e):ri(e,e._dur)},oi={_start:0,endTime:cr,totalDuration:cr},si=function e(t,n,r){var i,o,s,a=t.labels,l=t._recent||oi,u=t.duration()>=Nn?l.endTime(!1):t._dur;return Vn(n)&&(isNaN(n)||n in a)?(o=n.charAt(0),s="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(s?(i<0?l:r).totalDuration()/100:1)):i<0?(n in a||(a[n]=u),a[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),s&&r&&(o=o/100*(Xn(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+o:u+o)):null==n?u:+n},ai=function(e,t,n){var r,i,o=zn(t[1]),s=(o?2:1)+(e<2?0:1),a=t[s];if(o&&(a.duration=t[1]),a.parent=n,e){for(r=a,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=Wn(i.vars.inherit)&&i.parent;a.immediateRender=Wn(r.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new co(t[0],a,t[s+1])},li=function(e,t){return e||0===e?t(e):t},ui=function(e,t,n){return n<e?e:n>t?t:n},ci=function(e,t){return Vn(e)&&(t=rr.exec(e))?t[1]:""},di=[].slice,hi=function(e,t){return e&&Gn(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Gn(e[0]))&&!e.nodeType&&e!==En},pi=function(e,t,n){return void 0===n&&(n=[]),e.forEach(function(e){var r;return Vn(e)&&!t||hi(e,1)?(r=n).push.apply(r,fi(e)):n.push(e)})||n},fi=function(e,t,n){return xn&&!t&&xn.selector?xn.selector(e):!Vn(e)||n||!Tn&&Fi()?Xn(e)?pi(e,n):hi(e)?di.call(e,0):e?[e]:[]:di.call((t||Cn).querySelectorAll(e),0)},mi=function(e){return e=fi(e)[0]||lr("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return fi(t,n.querySelectorAll?n:n===e?lr("Invalid scope")||Cn.createElement("div"):e)}},gi=function(e){return e.sort(function(){return.5-Math.random()})},vi=function(e){if(qn(e))return e;var t=Gn(e)?e:{each:e},n=Wi(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},s=r>0&&r<1,a=isNaN(r)||s,l=t.axis,u=r,c=r;return Vn(r)?u=c={center:.5,edges:.5,end:1}[r]||0:!s&&a&&(u=r[0],c=r[1]),function(e,s,d){var h,p,f,m,g,v,y,b,w,_=(d||t).length,x=o[_];if(!x){if(!(w="auto"===t.grid?0:(t.grid||[1,Nn])[1])){for(y=-Nn;y<(y=d[w++].getBoundingClientRect().left)&&w<_;);w<_&&w--}for(x=o[_]=[],h=a?Math.min(w,_)*u-.5:r%w,p=w===Nn?0:a?_*c/w-.5:r/w|0,y=0,b=Nn,v=0;v<_;v++)f=v%w-h,m=p-(v/w|0),x[v]=g=l?Math.abs("y"===l?m:f):Un(f*f+m*m),g>y&&(y=g),g<b&&(b=g);"random"===r&&gi(x),x.max=y-b,x.min=b,x.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(w>_?_-1:l?"y"===l?_/w:w:Math.max(w,_/w))||0)*("edges"===r?-1:1),x.b=_<0?i-_:i,x.u=ci(t.amount||t.each)||0,n=n&&_<0?Hi(n):n}return _=(x[e]-x.min)/x.max||0,kr(x.b+(n?n(_):_)*x.v)+x.u}},yi=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=kr(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(zn(n)?0:ci(n))}},bi=function(e,t){var n,r,i=Xn(e);return!i&&Gn(e)&&(n=i=e.radius||Nn,e.values?(e=fi(e.values),(r=!zn(e[0]))&&(n*=n)):e=yi(e.increment)),li(t,i?qn(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,o,s=parseFloat(r?t.x:t),a=parseFloat(r?t.y:0),l=Nn,u=0,c=e.length;c--;)(i=r?(i=e[c].x-s)*i+(o=e[c].y-a)*o:Math.abs(e[c]-s))<l&&(l=i,u=c);return u=!n||l<=n?e[u]:t,r||u===t||zn(t)?u:u+ci(t)}:yi(e))},wi=function(e,t,n,r){return li(Xn(e)?!t:!0===n?!!(n=0):!r,function(){return Xn(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r})},_i=function(e,t,n){return li(n,function(n){return e[~~t(n)]})},xi=function(e){for(var t,n,r,i,o=0,s="";~(t=e.indexOf("random(",o));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?nr:$n),s+=e.substr(o,t-o)+wi(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return s+e.substr(o,e.length-o)},Si=function(e,t,n,r,i){var o=t-e,s=r-n;return li(i,function(t){return n+((t-e)/o*s||0)})},Ei=function(e,t,n){var r,i,o,s=e.labels,a=Nn;for(r in s)(i=s[r]-t)<0===!!n&&i&&a>(i=Math.abs(i))&&(o=r,a=i);return o},Ti=function(e,t,n){var r,i,o,s=e.vars,a=s[t],l=xn,u=e._ctx;if(a)return r=s[t+"Params"],i=s.callbackScope||e,n&&mr.length&&Ir(),u&&(xn=u),o=r?a.apply(i,r):a.call(i),xn=l,o},Ci=function(e){return qr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!_n),e.progress()<1&&Ti(e,"onInterrupt"),e},ki=[],Ai=function(e){if(e)if(e=!e.name&&e.default||e,Jn()||e.headless){var t=e.name,n=qn(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:cr,render:wo,add:ro,kill:xo,modifier:_o,rawVars:0},o={targetTest:0,get:0,getSetter:go,aliases:{},register:0};if(Fi(),e!==r){if(vr[t])return;Dr(r,Dr(Ur(e,i),o)),jr(r.prototype,jr(i,Ur(e,o))),vr[r.prop=t]=r,e.targetTest&&(wr.push(r),fr[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ur(t,r),e.register&&e.register(Uo,r,To)}else ki.push(e)},Oi=255,Ii={aqua:[0,Oi,Oi],lime:[0,Oi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Oi],navy:[0,0,128],white:[Oi,Oi,Oi],olive:[128,128,0],yellow:[Oi,Oi,0],orange:[Oi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Oi,0,0],pink:[Oi,192,203],cyan:[0,Oi,Oi],transparent:[Oi,Oi,Oi,0]},Pi=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*Oi+.5|0},Ri=function(e,t,n){var r,i,o,s,a,l,u,c,d,h,p=e?zn(e)?[e>>16,e>>8&Oi,e&Oi]:0:Ii.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Ii[e])p=Ii[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),o=e.charAt(3),e="#"+r+r+i+i+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&Oi,p&Oi,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&Oi,e&Oi]}else if("hsl"===e.substr(0,3))if(p=h=e.match($n),t){if(~e.indexOf("="))return p=e.match(Qn),n&&p.length<4&&(p[3]=1),p}else s=+p[0]%360/360,a=+p[1]/100,r=2*(l=+p[2]/100)-(i=l<=.5?l*(a+1):l+a-l*a),p.length>3&&(p[3]*=1),p[0]=Pi(s+1/3,r,i),p[1]=Pi(s,r,i),p[2]=Pi(s-1/3,r,i);else p=e.match($n)||Ii.transparent;p=p.map(Number)}return t&&!h&&(r=p[0]/Oi,i=p[1]/Oi,o=p[2]/Oi,l=((u=Math.max(r,i,o))+(c=Math.min(r,i,o)))/2,u===c?s=a=0:(d=u-c,a=l>.5?d/(2-u-c):d/(u+c),s=u===r?(i-o)/d+(i<o?6:0):u===i?(o-r)/d+2:(r-i)/d+4,s*=60),p[0]=~~(s+.5),p[1]=~~(100*a+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},Ni=function(e){var t=[],n=[],r=-1;return e.split(Di).forEach(function(e){var i=e.match(Zn)||[];t.push.apply(t,i),n.push(r+=i.length+1)}),t.c=n,t},Mi=function(e,t,n){var r,i,o,s,a="",l=(e+a).match(Di),u=t?"hsla(":"rgba(",c=0;if(!l)return e;if(l=l.map(function(e){return(e=Ri(e,t,1))&&u+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),n&&(o=Ni(e),(r=n.c).join(a)!==o.c.join(a)))for(s=(i=e.replace(Di,"1").split(Zn)).length-1;c<s;c++)a+=i[c]+(~r.indexOf(c)?l.shift()||u+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!i)for(s=(i=e.split(Di)).length-1;c<s;c++)a+=i[c]+l[c];return a+i[s]},Di=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Ii)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),ji=/hsl[a]?\(/,Li=function(e){var t,n=e.join(" ");if(Di.lastIndex=0,Di.test(n))return t=ji.test(n),e[1]=Mi(e[1],t),e[0]=Mi(e[0],t,Ni(e[1])),!0},Ui=function(){var e,t,n,r,i,o,s=Date.now,a=500,l=33,u=s(),c=u,d=1e3/240,h=d,p=[],f=function n(f){var m,g,v,y,b=s()-c,w=!0===f;if((b>a||b<0)&&(u+=b-l),((m=(v=(c+=b)-u)-h)>0||w)&&(y=++r.frame,i=v-1e3*r.time,r.time=v/=1e3,h+=m+(m>=d?4:d-m),g=1),w||(e=t(n)),g)for(o=0;o<p.length;o++)p[o](v,i,y,f)};return r={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){kn&&(!Tn&&Jn()&&(En=Tn=window,Cn=En.document||{},ir.gsap=Uo,(En.gsapVersions||(En.gsapVersions=[])).push(Uo.version),sr(or||En.GreenSockGlobals||!En.gsap&&En||{}),ki.forEach(Ai)),n="undefined"!==typeof requestAnimationFrame&&requestAnimationFrame,e&&r.sleep(),t=n||function(e){return setTimeout(e,h-1e3*r.time+1|0)},In=1,f(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(e),In=0,t=cr},lagSmoothing:function(e,t){a=e||1/0,l=Math.min(t||33,a)},fps:function(e){d=1e3/(e||240),h=1e3*r.time+d},add:function(e,t,n){var i=t?function(t,n,o,s){e(t,n,o,s),r.remove(i)}:e;return r.remove(e),p[n?"unshift":"push"](i),Fi(),i},remove:function(e,t){~(t=p.indexOf(e))&&p.splice(t,1)&&o>=t&&o--},_listeners:p}}(),Fi=function(){return!In&&Ui.wake()},Bi={},Vi=/^[\d.\-M][\d.\-,\s]/,qi=/["']/g,zi=function(e){for(var t,n,r,i={},o=e.substr(1,e.length-3).split(":"),s=o[0],a=1,l=o.length;a<l;a++)n=o[a],t=a!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[s]=isNaN(r)?r.replace(qi,"").trim():+r,s=n.substr(t+1).trim();return i},Hi=function(e){return function(t){return 1-e(1-t)}},Gi=function e(t,n){for(var r,i=t._first;i;)i instanceof Zi?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Wi=function(e,t){return e&&(qn(e)?e:Bi[e]||function(e){var t=(e+"").split("("),n=Bi[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[zi(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)}(e).split(",").map(Nr)):Bi._CE&&Vi.test(e)?Bi._CE("",e):n}(e))||t},Ji=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,o={easeIn:t,easeOut:n,easeInOut:r};return Tr(e,function(e){for(var t in Bi[e]=ir[e]=o,Bi[i=e.toLowerCase()]=n,o)Bi[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Bi[e+"."+t]=o[t]}),o},Ki=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Yi=function e(t,n,r){var i=n>=1?n:1,o=(r||(t?.3:.45))/(n<1?n:1),s=o/Dn*(Math.asin(1/i)||0),a=function(e){return 1===e?1:i*Math.pow(2,-10*e)*Bn((e-s)*o)+1},l="out"===t?a:"in"===t?function(e){return 1-a(1-e)}:Ki(a);return o=Dn/o,l.config=function(n,r){return e(t,n,r)},l},Xi=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:Ki(r);return i.config=function(n){return e(t,n)},i};Tr("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;Ji(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},function(e){return 1-Math.pow(1-e,n)},function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2})}),Bi.Linear.easeNone=Bi.none=Bi.Linear.easeIn,Ji("Elastic",Yi("in"),Yi("out"),Yi()),function(e,t){var n=1/t,r=2*n,i=2.5*n,o=function(o){return o<n?e*o*o:o<r?e*Math.pow(o-1.5/t,2)+.75:o<i?e*(o-=2.25/t)*o+.9375:e*Math.pow(o-2.625/t,2)+.984375};Ji("Bounce",function(e){return 1-o(1-e)},o)}(7.5625,2.75),Ji("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),Ji("Circ",function(e){return-(Un(1-e*e)-1)}),Ji("Sine",function(e){return 1===e?1:1-Fn(e*jn)}),Ji("Back",Xi("in"),Xi("out"),Xi()),Bi.SteppedEase=Bi.steps=ir.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*ui(0,.99999999,e)|0)+i)*n}}},Rn.ease=Bi["quad.out"],Tr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return _r+=e+","+e+"Params,"});var $i=function(e,t){this.id=Ln++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Er,this.set=t?t.getSetter:go},Qi=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ri(this,+e.duration,1,1),this.data=e.data,xn&&(this._ctx=xn,xn.data.push(this)),In||Ui.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,ri(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(Fi(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Xr(this,e),!n._dp||n.parent||$r(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Qr(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===Mn||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Rr(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Wr(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Wr(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Jr(this._tTime,n)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?Kr(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(ui(-Math.abs(this._delay),this.totalDuration(),n),!1!==t),Yr(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Fi(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Mn&&(this._tTime-=Mn)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Qr(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Wn(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Kr(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=pr);var t=_n;return _n=e,Pr(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),_n=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,ii(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,ii(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(si(this,e),Wn(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,Wn(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-Mn))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise(function(n){var r=qn(e)?e:Mr,i=function(){var e=t.then;t.then=null,qn(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i})},t.kill=function(){Ci(this)},e}();Dr(Qi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Zi=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=Wn(t.sortChildren),Sn&&Qr(t.parent||Sn,yn(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&Zr(yn(r),t.scrollTrigger),r}bn(t,e);var n=t.prototype;return n.to=function(e,t,n){return ai(0,arguments,this),this},n.from=function(e,t,n){return ai(1,arguments,this),this},n.fromTo=function(e,t,n,r){return ai(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,Fr(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new co(e,t,si(this,n),1),this},n.call=function(e,t,n){return Qr(this,co.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,o,s){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=s,n.parent=this,new co(e,n,si(this,i)),this},n.staggerFrom=function(e,t,n,r,i,o,s){return n.runBackwards=1,Fr(n).immediateRender=Wn(n.immediateRender),this.staggerTo(e,t,n,r,i,o,s)},n.staggerFromTo=function(e,t,n,r,i,o,s,a){return r.startAt=n,Fr(r).immediateRender=Wn(r.immediateRender),this.staggerTo(e,t,r,i,o,s,a)},n.render=function(e,t,n){var r,i,o,s,a,l,u,c,d,h,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=e<=0?0:kr(e),b=this._zTime<0!==e<0&&(this._initted||!v);if(this!==Sn&&y>g&&e>=0&&(y=g),y!==this._tTime||n||b){if(m!==this._time&&v&&(y+=this._time-m,e+=this._time-m),r=y,d=this._start,l=!(c=this._ts),b&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,a=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(r=kr(y%a),y===g?(s=this._repeat,r=v):((s=~~(h=kr(y/a)))&&s===h&&(r=v,s--),r>v&&(r=v)),h=Jr(this._tTime,a),!m&&this._tTime&&h!==s&&this._tTime-h*a-this._dur<=0&&(h=s),p&&1&s&&(r=v-r,f=1),s!==h&&!this._lock){var w=p&&1&h,_=w===(p&&1&s);if(s<h&&(w=!w),m=w?0:y%v?v:y,this._lock=1,this.render(m||(f?0:kr(s*a)),t,!v)._lock=0,this._tTime=y,!t&&this.parent&&Ti(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,_&&(this._lock=2,m=w?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Gi(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,kr(m),kr(r)),u&&(y-=r-(r=u._start))),this._tTime=y,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&y&&!t&&!h&&(Ti(this,"onStart"),this._tTime!==y))return this;if(r>=m&&e>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!l){u=0,o&&(y+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var x=e<0?e:r;i;){if(o=i._prev,(i._act||x<=i._end)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(x-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(x-i._start)*i._ts,t,n||_n&&Pr(i)),r!==this._time||!this._ts&&!l){u=0,o&&(y+=this._zTime=x?-1e-8:Mn);break}}i=o}}if(u&&!t&&(this.pause(),u.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=d,Yr(this),this.render(e,t,n);this._onUpdate&&!t&&Ti(this,"onUpdate",!0),(y===g&&this._tTime>=this.totalDuration()||!y&&m)&&(d!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&qr(this,1),t||e<0&&!m||!y&&!m&&g||(Ti(this,y===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(zn(t)||(t=si(this,t,e)),!(e instanceof Qi)){if(Xn(e))return e.forEach(function(e){return n.add(e,t)}),this;if(Vn(e))return this.addLabel(e,t);if(!qn(e))return this;e=co.delayedCall(0,e)}return this!==e?Qr(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-Nn);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof co?t&&i.push(o):(n&&i.push(o),e&&i.push.apply(i,o.getChildren(!0,t,n)))),o=o._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return Vn(e)?this.removeLabel(e):qn(e)?this.killTweensOf(e):(e.parent===this&&Vr(this,e),e===this._recent&&(this._recent=this._last),zr(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=kr(Ui.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=si(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=co.delayedCall(0,t||cr,n);return r.data="isPause",this._hasPause=1,Qr(this,r,si(this,e))},n.removePause=function(e){var t=this._first;for(e=si(this,e);t;)t._start===e&&"isPause"===t.data&&qr(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)eo!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=fi(e),o=this._first,s=zn(t);o;)o instanceof co?Or(o._targets,i)&&(s?(!eo||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&r.push(o):(n=o.getTweensOf(i,t)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=si(r,e),o=t,s=o.startAt,a=o.onStart,l=o.onStartParams,u=o.immediateRender,c=co.to(r,Dr({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(s&&"time"in s?s.time:r._time))/r.timeScale())||Mn,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(s&&"time"in s?s.time:r._time))/r.timeScale());c._dur!==e&&ri(c,e,0,1).render(c._time,!0,!0),n=1}a&&a.apply(c,l||[])}},t));return u?c.render(0):c},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,Dr({startAt:{time:si(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),Ei(this,si(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),Ei(this,si(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+Mn)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in o)o[r]>=n&&(o[r]+=e);return zr(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),zr(this)},n.totalDuration=function(e){var t,n,r,i=0,o=this,s=o._last,a=Nn;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(r=o.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>a&&o._sort&&s._ts&&!o._lock?(o._lock=1,Qr(o,s,n-s._delay,1)._lock=0):a=n,n<0&&s._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),a=0),s._end>i&&s._ts&&(i=s._end),s=t;ri(o,o===Sn&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(Sn._ts&&(Rr(Sn,Kr(e,Sn)),An=Ui.frame),Ui.frame>=br){br+=Pn.autoSleep||120;var t=Sn._first;if((!t||!t._ts)&&Pn.autoSleep&&Ui._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||Ui.sleep()}}},t}(Qi);Dr(Zi.prototype,{_lock:0,_hasPause:0,_forcing:0});var eo,to,no=function(e,t,n,r,i,o,s){var a,l,u,c,d,h,p,f,m=new To(this._pt,e,t,0,1,bo,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=xi(r)),o&&(o(f=[n,r],e,t),n=f[0],r=f[1]),l=n.match(er)||[];a=er.exec(r);)c=a[0],d=r.substring(g,a.index),u?u=(u+1)%5:"rgba("===d.substr(-5)&&(u=1),c!==l[v++]&&(h=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:d||1===v?d:",",s:h,c:"="===c.charAt(1)?Ar(h,c)-h:parseFloat(c)-h,m:u&&u<4?Math.round:0},g=er.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=s,(tr.test(r)||p)&&(m.e=0),this._pt=m,m},ro=function(e,t,n,r,i,o,s,a,l,u){qn(r)&&(r=r(i||0,e,o));var c,d=e[t],h="get"!==n?n:qn(d)?l?e[t.indexOf("set")||!qn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():d,p=qn(d)?l?fo:po:ho;if(Vn(r)&&(~r.indexOf("random(")&&(r=xi(r)),"="===r.charAt(1)&&((c=Ar(h,r)+(ci(h)||0))||0===c)&&(r=c)),!u||h!==r||to)return isNaN(h*r)||""===r?(!d&&!(t in e)&&ar(t,r),no.call(this,e,t,h,r,p,a||Pn.stringFilter,l)):(c=new To(this._pt,e,t,+h||0,r-(h||0),"boolean"===typeof d?yo:vo,0,p),l&&(c.fp=l),s&&c.modifier(s,this,e),this._pt=c)},io=function(e,t,n,r,i,o){var s,a,l,u;if(vr[e]&&!1!==(s=new vr[e]).init(i,s.rawVars?t[e]:function(e,t,n,r,i){if(qn(e)&&(e=ao(e,i,t,n,r)),!Gn(e)||e.style&&e.nodeType||Xn(e)||Yn(e))return Vn(e)?ao(e,i,t,n,r):e;var o,s={};for(o in e)s[o]=ao(e[o],i,t,n,r);return s}(t[e],r,i,o,n),n,r,o)&&(n._pt=a=new To(n._pt,i,e,0,1,s.render,s,0,s.priority),n!==On))for(l=n._ptLookup[n._targets.indexOf(i)],u=s._props.length;u--;)l[s._props[u]]=a;return s},oo=function e(t,n,r){var i,o,s,a,l,u,c,d,h,p,f,m,g,v=t.vars,y=v.ease,b=v.startAt,w=v.immediateRender,_=v.lazy,x=v.onUpdate,S=v.runBackwards,E=v.yoyoEase,T=v.keyframes,C=v.autoRevert,k=t._dur,A=t._startAt,O=t._targets,I=t.parent,P=I&&"nested"===I.data?I.vars.targets:O,R="auto"===t._overwrite&&!wn,N=t.timeline;if(N&&(!T||!y)&&(y="none"),t._ease=Wi(y,Rn.ease),t._yEase=E?Hi(Wi(!0===E?y:E,Rn.ease)):0,E&&t._yoyo&&!t._repeat&&(E=t._yEase,t._yEase=t._ease,t._ease=E),t._from=!N&&!!v.runBackwards,!N||T&&!v.stagger){if(m=(d=O[0]?Sr(O[0]).harness:0)&&v[d.prop],i=Ur(v,fr),A&&(A._zTime<0&&A.progress(1),n<0&&S&&w&&!C?A.render(-1,!0):A.revert(S&&k?hr:dr),A._lazy=0),b){if(qr(t._startAt=co.set(O,Dr({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:!A&&Wn(_),startAt:null,delay:0,onUpdate:x&&function(){return Ti(t,"onUpdate")},stagger:0},b))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(_n||!w&&!C)&&t._startAt.revert(hr),w&&k&&n<=0&&r<=0)return void(n&&(t._zTime=n))}else if(S&&k&&!A)if(n&&(w=!1),s=Dr({overwrite:!1,data:"isFromStart",lazy:w&&!A&&Wn(_),immediateRender:w,stagger:0,parent:I},i),m&&(s[d.prop]=m),qr(t._startAt=co.set(O,s)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(_n?t._startAt.revert(hr):t._startAt.render(-1,!0)),t._zTime=n,w){if(!n)return}else e(t._startAt,Mn,Mn);for(t._pt=t._ptCache=0,_=k&&Wn(_)||_&&!k,o=0;o<O.length;o++){if(c=(l=O[o])._gsap||xr(O)[o]._gsap,t._ptLookup[o]=p={},gr[c.id]&&mr.length&&Ir(),f=P===O?o:P.indexOf(l),d&&!1!==(h=new d).init(l,m||i,t,f,P)&&(t._pt=a=new To(t._pt,l,h.name,0,1,h.render,h,0,h.priority),h._props.forEach(function(e){p[e]=a}),h.priority&&(u=1)),!d||m)for(s in i)vr[s]&&(h=io(s,i,t,f,l,P))?h.priority&&(u=1):p[s]=a=ro.call(t,l,s,"get",i[s],f,P,0,v.stringFilter);t._op&&t._op[o]&&t.kill(l,t._op[o]),R&&t._pt&&(eo=t,Sn.killTweensOf(l,p,t.globalTime(n)),g=!t.parent,eo=0),t._pt&&_&&(gr[c.id]=1)}u&&Eo(t),t._onInit&&t._onInit(t)}t._onUpdate=x,t._initted=(!t._op||t._pt)&&!g,T&&n<=0&&N.render(Nn,!0,!0)},so=function(e,t,n,r){var i,o,s=t.ease||r||"power1.inOut";if(Xn(t))o=n[e]||(n[e]=[]),t.forEach(function(e,n){return o.push({t:n/(t.length-1)*100,v:e,e:s})});else for(i in t)o=n[i]||(n[i]=[]),"ease"===i||o.push({t:parseFloat(e),v:t[i],e:s})},ao=function(e,t,n,r,i){return qn(e)?e.call(t,n,r,i):Vn(e)&&~e.indexOf("random(")?xi(e):e},lo=_r+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",uo={};Tr(lo+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return uo[e]=1});var co=function(e){function t(t,n,r,i){var o;"number"===typeof n&&(r.duration=n,n=r,r=null);var s,a,l,u,c,d,h,p,f=(o=e.call(this,i?n:Fr(n))||this).vars,m=f.duration,g=f.delay,v=f.immediateRender,y=f.stagger,b=f.overwrite,w=f.keyframes,_=f.defaults,x=f.scrollTrigger,S=f.yoyoEase,E=n.parent||Sn,T=(Xn(t)||Yn(t)?zn(t[0]):"length"in n)?[t]:fi(t);if(o._targets=T.length?xr(T):lr("GSAP target "+t+" not found. https://gsap.com",!Pn.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=b,w||y||Kn(m)||Kn(g)){if(n=o.vars,(s=o.timeline=new Zi({data:"nested",defaults:_||{},targets:E&&"nested"===E.data?E.vars.targets:T})).kill(),s.parent=s._dp=yn(o),s._start=0,y||Kn(m)||Kn(g)){if(u=T.length,h=y&&vi(y),Gn(y))for(c in y)~lo.indexOf(c)&&(p||(p={}),p[c]=y[c]);for(a=0;a<u;a++)(l=Ur(n,uo)).stagger=0,S&&(l.yoyoEase=S),p&&jr(l,p),d=T[a],l.duration=+ao(m,yn(o),a,d,T),l.delay=(+ao(g,yn(o),a,d,T)||0)-o._delay,!y&&1===u&&l.delay&&(o._delay=g=l.delay,o._start+=g,l.delay=0),s.to(d,l,h?h(a,d,T):0),s._ease=Bi.none;s.duration()?m=g=0:o.timeline=0}else if(w){Fr(Dr(s.vars.defaults,{ease:"none"})),s._ease=Wi(w.ease||n.ease||"none");var C,k,A,O=0;if(Xn(w))w.forEach(function(e){return s.to(T,e,">")}),s.duration();else{for(c in l={},w)"ease"===c||"easeEach"===c||so(c,w[c],l,w.easeEach);for(c in l)for(C=l[c].sort(function(e,t){return e.t-t.t}),O=0,a=0;a<C.length;a++)(A={ease:(k=C[a]).e,duration:(k.t-(a?C[a-1].t:0))/100*m})[c]=k.v,s.to(T,A,O),O+=A.duration;s.duration()<m&&s.to({},{duration:m-s.duration()})}}m||o.duration(m=s.duration())}else o.timeline=0;return!0!==b||wn||(eo=yn(o),Sn.killTweensOf(T),eo=0),Qr(E,yn(o),r),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(v||!m&&!w&&o._start===kr(E._time)&&Wn(v)&&Gr(yn(o))&&"nested"!==E.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-g)||0)),x&&Zr(yn(o),x),o}bn(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,o,s,a,l,u,c,d,h=this._time,p=this._tDur,f=this._dur,m=e<0,g=e>p-Mn&&!m?p:e<Mn?0:e;if(f){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(r=g,c=this.timeline,this._repeat){if(s=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*s+e,t,n);if(r=kr(g%s),g===p?(o=this._repeat,r=f):(o=~~(a=kr(g/s)))&&o===a?(r=f,o--):r>f&&(r=f),(l=this._yoyo&&1&o)&&(d=this._yEase,r=f-r),a=Jr(this._tTime,s),r===h&&!n&&this._initted&&o===a)return this._tTime=g,this;o!==a&&(c&&this._yEase&&Gi(c,l),this.vars.repeatRefresh&&!l&&!this._lock&&r!==s&&this._initted&&(this._lock=n=1,this.render(kr(s*o),!0).invalidate()._lock=0))}if(!this._initted){if(ei(this,m?e:r,n,t,g))return this._tTime=0,this;if(h!==this._time&&(!n||!this.vars.repeatRefresh||o===a))return this;if(f!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(d||this._ease)(r/f),this._from&&(this.ratio=u=1-u),!h&&g&&!t&&!a&&(Ti(this,"onStart"),this._tTime!==g))return this;for(i=this._pt;i;)i.r(u,i.d),i=i._next;c&&c.render(e<0?e:c._dur*c._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(m&&Hr(this,e,0,n),Ti(this,"onUpdate")),this._repeat&&o!==a&&this.vars.onRepeat&&!t&&this.parent&&Ti(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&Hr(this,e,0,!0),(e||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&qr(this,1),t||m&&!h||!(g||h||l)||(Ti(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,o,s,a=e.ratio,l=t<0||!t&&(!e._start&&ti(e)&&(e._initted||!ni(e))||(e._ts<0||e._dp._ts<0)&&!ni(e))?0:1,u=e._rDelay,c=0;if(u&&e._repeat&&(c=ui(0,e._tDur,t),o=Jr(c,u),e._yoyo&&1&o&&(l=1-l),o!==Jr(e._tTime,u)&&(a=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==a||_n||r||e._zTime===Mn||!t&&e._zTime){if(!e._initted&&ei(e,t,r,n,c))return;for(s=e._zTime,e._zTime=t||(n?Mn:0),n||(n=t&&!s),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=c,i=e._pt;i;)i.r(l,i.d),i=i._next;t<0&&Hr(e,t,0,!0),e._onUpdate&&!n&&Ti(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&Ti(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&qr(e,1),n||_n||(Ti(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r,i){In||Ui.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||oo(this,o),function(e,t,n,r,i,o,s,a){var l,u,c,d,h=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!h)for(h=e._ptCache[t]=[],c=e._ptLookup,d=e._targets.length;d--;){if((l=c[d][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return to=1,e.vars[t]="+=0",oo(e,s),to=0,a?lr(t+" not eligible for reset"):1;h.push(l)}for(d=h.length;d--;)(l=(u=h[d])._pt||u).s=!r&&0!==r||i?l.s+(r||0)+o*l.c:r,l.c=n-l.s,u.e&&(u.e=Cr(n)+ci(u.e)),u.b&&(u.b=l.s+ci(u.b))}(this,e,t,n,r,this._ease(o/this._dur),o,i)?this.resetTo(e,t,n,r,1):(Xr(this,0),this.parent||Br(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?Ci(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_n),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,eo&&!0!==eo.vars.overwrite)._first||Ci(this),this.parent&&n!==this.timeline.totalDuration()&&ri(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,s,a,l,u,c=this._targets,d=e?fi(e):c,h=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(c,d))return"all"===t&&(this._pt=0),Ci(this);for(r=this._op=this._op||[],"all"!==t&&(Vn(t)&&(a={},Tr(t,function(e){return a[e]=1}),t=a),t=function(e,t){var n,r,i,o,s=e[0]?Sr(e[0]).harness:0,a=s&&s.aliases;if(!a)return t;for(r in n=jr({},t),a)if(r in n)for(i=(o=a[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(c,t)),u=c.length;u--;)if(~d.indexOf(c[u]))for(a in i=h[u],"all"===t?(r[u]=t,s=i,o={}):(o=r[u]=r[u]||{},s=t),s)(l=i&&i[a])&&("kill"in l.d&&!0!==l.d.kill(a)||Vr(this,l,"_pt"),delete i[a]),"all"!==o&&(o[a]=1);return this._initted&&!this._pt&&p&&Ci(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return ai(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return ai(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return Sn.killTweensOf(e,t,n)},t}(Qi);Dr(co.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Tr("staggerTo,staggerFrom,staggerFromTo",function(e){co[e]=function(){var t=new Zi,n=di.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}});var ho=function(e,t,n){return e[t]=n},po=function(e,t,n){return e[t](n)},fo=function(e,t,n,r){return e[t](r.fp,n)},mo=function(e,t,n){return e.setAttribute(t,n)},go=function(e,t){return qn(e[t])?po:Hn(e[t])&&e.setAttribute?mo:ho},vo=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},yo=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},bo=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},wo=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},_o=function(e,t,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(e,t,n),o=i},xo=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?Vr(this,r,"_pt"):r.dep||(t=1),r=n;return!t},So=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Eo=function(e){for(var t,n,r,i,o=e._pt;o;){for(t=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=t}e._pt=r},To=function(){function e(e,t,n,r,i,o,s,a,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=o||vo,this.d=s||this,this.set=a||ho,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=So,this.m=e,this.mt=n,this.tween=t},e}();Tr(_r+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return fr[e]=1}),ir.TweenMax=ir.TweenLite=co,ir.TimelineLite=ir.TimelineMax=Zi,Sn=new Zi({sortChildren:!1,defaults:Rn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Pn.stringFilter=Li;var Co=[],ko={},Ao=[],Oo=0,Io=0,Po=function(e){return(ko[e]||Ao).map(function(e){return e()})},Ro=function(){var e=Date.now(),t=[];e-Oo>2&&(Po("matchMediaInit"),Co.forEach(function(e){var n,r,i,o,s=e.queries,a=e.conditions;for(r in s)(n=En.matchMedia(s[r]).matches)&&(i=1),n!==a[r]&&(a[r]=n,o=1);o&&(e.revert(),i&&t.push(e))}),Po("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),Oo=e,Po("matchMedia"))},No=function(){function e(e,t){this.selector=t&&mi(t),this.data=[],this._r=[],this.isReverted=!1,this.id=Io++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){qn(e)&&(n=t,t=e,e=qn);var r=this,i=function(){var e,i=xn,o=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=mi(n)),xn=r,e=t.apply(r,arguments),qn(e)&&r._r.push(e),xn=i,r.selector=o,r.isReverted=!1,e};return r.last=i,e===qn?i(r,function(e){return r.add(null,e)}):e?r[e]=i:i},t.ignore=function(e){var t=xn;xn=null,e(this),xn=t},t.getTweens=function(){var t=[];return this.data.forEach(function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof co&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e?function(){for(var t,r=n.getTweens(),i=n.data.length;i--;)"isFlip"===(t=n.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(e){return r.splice(r.indexOf(e),1)}));for(r.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),i=n.data.length;i--;)(t=n.data[i])instanceof Zi?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof co)&&t.revert&&t.revert(e);n._r.forEach(function(t){return t(e,n)}),n.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),t)for(var r=Co.length;r--;)Co[r].id===this.id&&Co.splice(r,1)},t.revert=function(e){this.kill(e||{})},e}(),Mo=function(){function e(e){this.contexts=[],this.scope=e,xn&&xn.data.push(this)}var t=e.prototype;return t.add=function(e,t,n){Gn(e)||(e={matches:e});var r,i,o,s=new No(0,n||this.scope),a=s.conditions={};for(i in xn&&!s.selector&&(s.selector=xn.selector),this.contexts.push(s),t=s.add("onMatch",t),s.queries=e,e)"all"===i?o=1:(r=En.matchMedia(e[i]))&&(Co.indexOf(s)<0&&Co.push(s),(a[i]=r.matches)&&(o=1),r.addListener?r.addListener(Ro):r.addEventListener("change",Ro));return o&&t(s,function(e){return s.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),Do={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){return Ai(e)})},timeline:function(e){return new Zi(e)},getTweensOf:function(e,t){return Sn.getTweensOf(e,t)},getProperty:function(e,t,n,r){Vn(e)&&(e=fi(e)[0]);var i=Sr(e||{}).get,o=n?Mr:Nr;return"native"===n&&(n=""),e?t?o((vr[t]&&vr[t].get||i)(e,t,n,r)):function(t,n,r){return o((vr[t]&&vr[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=fi(e)).length>1){var r=e.map(function(e){return Uo.quickSetter(e,t,n)}),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var o=vr[t],s=Sr(e),a=s.harness&&(s.harness.aliases||{})[t]||t,l=o?function(t){var r=new o;On._pt=0,r.init(e,n?t+n:t,On,0,[e]),r.render(1,r),On._pt&&wo(1,On)}:s.set(e,a);return o?l:function(t){return l(e,a,n?t+n:t,s,1)}},quickTo:function(e,t,n){var r,i=Uo.to(e,Dr(((r={})[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),o=function(e,n,r){return i.resetTo(t,e,n,r)};return o.tween=i,o},isTweening:function(e){return Sn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Wi(e.ease,Rn.ease)),Lr(Rn,e||{})},config:function(e){return Lr(Pn,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(e){return e&&!vr[e]&&!ir[e]&&lr(t+" effect requires "+e+" plugin.")}),yr[t]=function(e,t,r){return n(fi(e),Dr(t||{},i),r)},o&&(Zi.prototype[t]=function(e,n,r){return this.add(yr[t](e,Gn(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){Bi[e]=Wi(t)},parseEase:function(e,t){return arguments.length?Wi(e,t):Bi},getById:function(e){return Sn.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new Zi(e);for(i.smoothChildTiming=Wn(e.smoothChildTiming),Sn.remove(i),i._dp=0,i._time=i._tTime=Sn._time,n=Sn._first;n;)r=n._next,!t&&!n._dur&&n instanceof co&&n.vars.onComplete===n._targets[0]||Qr(i,n,n._start-n._delay),n=r;return Qr(Sn,i,0),i},context:function(e,t){return e?new No(e,t):xn},matchMedia:function(e){return new Mo(e)},matchMediaRefresh:function(){return Co.forEach(function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()})||Ro()},addEventListener:function(e,t){var n=ko[e]||(ko[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=ko[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var i=n-t;return Xn(t)?_i(t,e(0,t.length),n):li(r,function(e){return(i+(e-t)%i)%i+t})},wrapYoyo:function e(t,n,r){var i=n-t,o=2*i;return Xn(t)?_i(t,e(0,t.length-1),n):li(r,function(e){return t+((e=(o+(e-t)%o)%o||0)>i?o-e:e)})},distribute:vi,random:wi,snap:bi,normalize:function(e,t,n){return Si(e,t,0,1,n)},getUnit:ci,clamp:function(e,t,n){return li(n,function(n){return ui(e,t,n)})},splitColor:Ri,toArray:fi,selector:mi,mapRange:Si,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||ci(n))}},interpolate:function e(t,n,r,i){var o=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!o){var s,a,l,u,c,d=Vn(t),h={};if(!0===r&&(i=1)&&(r=null),d)t={p:t},n={p:n};else if(Xn(t)&&!Xn(n)){for(l=[],u=t.length,c=u-2,a=1;a<u;a++)l.push(e(t[a-1],t[a]));u--,o=function(e){e*=u;var t=Math.min(c,~~e);return l[t](e-t)},r=n}else i||(t=jr(Xn(t)?[]:{},t));if(!l){for(s in n)ro.call(h,t,s,"get",n[s]);o=function(e){return wo(e,h)||(d?t.p:t)}}}return li(r,o)},shuffle:gi},install:sr,effects:yr,ticker:Ui,updateRoot:Zi.updateRoot,plugins:vr,globalTimeline:Sn,core:{PropTween:To,globals:ur,Tween:co,Timeline:Zi,Animation:Qi,getCache:Sr,_removeLinkedListItem:Vr,reverting:function(){return _n},context:function(e){return e&&xn&&(xn.data.push(e),e._ctx=xn),xn},suppressOverwrites:function(e){return wn=e}}};Tr("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return Do[e]=co[e]}),Ui.add(Zi.updateRoot),On=Do.to({},{duration:0});var jo=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Lo=function(e,t){return{name:e,headless:1,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(Vn(n)&&(r={},Tr(n,function(e){return r[e]=1}),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,o=e._targets;for(n in t)for(r=o.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=jo(i,n)),i&&i.modifier&&i.modifier(t[n],e,o[r],n))}(e,n)}}}},Uo=Do.registerPlugin({name:"attr",init:function(e,t,n,r,i){var o,s,a;for(o in this.tween=n,t)a=e.getAttribute(o)||"",(s=this.add(e,"setAttribute",(a||0)+"",t[o],r,i,0,0,o)).op=o,s.b=a,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)_n?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Lo("roundProps",yi),Lo("modifiers"),Lo("snap",bi))||Do;co.version=Zi.version=Uo.version="3.13.0",kn=1,Jn()&&Fi();Bi.Power0,Bi.Power1,Bi.Power2,Bi.Power3,Bi.Power4,Bi.Linear,Bi.Quad,Bi.Cubic,Bi.Quart,Bi.Quint,Bi.Strong,Bi.Elastic,Bi.Back,Bi.SteppedEase,Bi.Bounce,Bi.Sine,Bi.Expo,Bi.Circ;var Fo,Bo,Vo,qo,zo,Ho,Go,Wo,Jo={},Ko=180/Math.PI,Yo=Math.PI/180,Xo=Math.atan2,$o=/([A-Z])/g,Qo=/(left|right|width|margin|padding|x)/i,Zo=/[\s,\(]\S/,es={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ts=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},ns=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},rs=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},is=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},os=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},ss=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},as=function(e,t,n){return e.style[t]=n},ls=function(e,t,n){return e.style.setProperty(t,n)},us=function(e,t,n){return e._gsap[t]=n},cs=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},ds=function(e,t,n,r,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},hs=function(e,t,n,r,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},ps="transform",fs=ps+"Origin",ms=function e(t,n){var r=this,i=this.target,o=i.style,s=i._gsap;if(t in Jo&&o){if(this.tfm=this.tfm||{},"transform"===t)return es.transform.split(",").forEach(function(t){return e.call(r,t,n)});if(~(t=es[t]||t).indexOf(",")?t.split(",").forEach(function(e){return r.tfm[e]=Ns(i,e)}):this.tfm[t]=s.x?s[t]:Ns(i,t),t===fs&&(this.tfm.zOrigin=s.zOrigin),this.props.indexOf(ps)>=0)return;s.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(fs,n,"")),t=ps}(o||n)&&this.props.push(t,n,o[t])},gs=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},vs=function(){var e,t,n=this.props,r=this.target,i=r.style,o=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?2===n[e+1]?r[n[e]](n[e+2]):r[n[e]]=n[e+2]:n[e+2]?i[n[e]]=n[e+2]:i.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace($o,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)o[t]=this.tfm[t];o.svg&&(o.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(e=Go())&&e.isStart||i[ps]||(gs(i),o.zOrigin&&i[fs]&&(i[fs]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},ys=function(e,t){var n={target:e,props:[],revert:vs,save:ms};return e._gsap||Uo.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return n.save(e)}),n},bs=function(e,t){var n=Bo.createElementNS?Bo.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Bo.createElement(e);return n&&n.style?n:Bo.createElement(e)},ws=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace($o,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,xs(n)||n,1)||""},_s="O,Moz,ms,Ms,Webkit".split(","),xs=function(e,t,n){var r=(t||zo).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(_s[i]+e in r););return i<0?null:(3===i?"ms":i>=0?_s[i]:"")+e},Ss=function(){"undefined"!==typeof window&&window.document&&(Fo=window,Bo=Fo.document,Vo=Bo.documentElement,zo=bs("div")||{style:{}},bs("div"),ps=xs(ps),fs=ps+"Origin",zo.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Wo=!!xs("perspective"),Go=Uo.core.reverting,qo=1)},Es=function(e){var t,n=e.ownerSVGElement,r=bs("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0);i.style.display="block",r.appendChild(i),Vo.appendChild(r);try{t=i.getBBox()}catch(nT){}return r.removeChild(i),Vo.removeChild(r),t},Ts=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Cs=function(e){var t,n;try{t=e.getBBox()}catch(r){t=Es(e),n=1}return t&&(t.width||t.height)||n||(t=Es(e)),!t||t.width||t.x||t.y?t:{x:+Ts(e,["x","cx","x1"])||0,y:+Ts(e,["y","cy","y1"])||0,width:0,height:0}},ks=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Cs(e))},As=function(e,t){if(t){var n,r=e.style;t in Jo&&t!==fs&&(t=ps),r.removeProperty?("ms"!==(n=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),r.removeProperty("--"===n?t:t.replace($o,"-$1").toLowerCase())):r.removeAttribute(t)}},Os=function(e,t,n,r,i,o){var s=new To(e._pt,t,n,0,1,o?ss:os);return e._pt=s,s.b=r,s.e=i,e._props.push(n),s},Is={deg:1,rad:1,turn:1},Ps={grid:1,flex:1},Rs=function e(t,n,r,i){var o,s,a,l,u=parseFloat(r)||0,c=(r+"").trim().substr((u+"").length)||"px",d=zo.style,h=Qo.test(n),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(h?"Width":"Height"),m=100,g="px"===i,v="%"===i;if(i===c||!u||Is[i]||Is[c])return u;if("px"!==c&&!g&&(u=e(t,n,r,"px")),l=t.getCTM&&ks(t),(v||"%"===c)&&(Jo[n]||~n.indexOf("adius")))return o=l?t.getBBox()[h?"width":"height"]:t[f],Cr(v?u/o*m:u/100*o);if(d[h?"width":"height"]=m+(g?c:i),s="rem"!==i&&~n.indexOf("adius")||"em"===i&&t.appendChild&&!p?t:t.parentNode,l&&(s=(t.ownerSVGElement||{}).parentNode),s&&s!==Bo&&s.appendChild||(s=Bo.body),(a=s._gsap)&&v&&a.width&&h&&a.time===Ui.time&&!a.uncache)return Cr(u/a.width*m);if(!v||"height"!==n&&"width"!==n)(v||"%"===c)&&!Ps[ws(s,"display")]&&(d.position=ws(t,"position")),s===t&&(d.position="static"),s.appendChild(zo),o=zo[f],s.removeChild(zo),d.position="absolute";else{var y=t.style[n];t.style[n]=m+i,o=t[f],y?t.style[n]=y:As(t,n)}return h&&v&&((a=Sr(s)).time=Ui.time,a.width=s[f]),Cr(g?o*u/m:o&&u?m/o*u:0)},Ns=function(e,t,n,r){var i;return qo||Ss(),t in es&&"transform"!==t&&~(t=es[t]).indexOf(",")&&(t=t.split(",")[0]),Jo[t]&&"transform"!==t?(i=Gs(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:Ws(ws(e,fs))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Us[t]&&Us[t](e,t,n)||ws(e,t)||Er(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?Rs(e,t,i,n)+n:i},Ms=function(e,t,n,r){if(!n||"none"===n){var i=xs(t,e,1),o=i&&ws(e,i,1);o&&o!==n?(t=i,n=o):"borderColor"===t&&(n=ws(e,"borderTopColor"))}var s,a,l,u,c,d,h,p,f,m,g,v=new To(this._pt,e.style,t,0,1,bo),y=0,b=0;if(v.b=n,v.e=r,n+="","var(--"===(r+="").substring(0,6)&&(r=ws(e,r.substring(4,r.indexOf(")")))),"auto"===r&&(d=e.style[t],e.style[t]=r,r=ws(e,t)||r,d?e.style[t]=d:As(e,t)),Li(s=[n,r]),r=s[1],l=(n=s[0]).match(Zn)||[],(r.match(Zn)||[]).length){for(;a=Zn.exec(r);)h=a[0],f=r.substring(y,a.index),c?c=(c+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(c=1),h!==(d=l[b++]||"")&&(u=parseFloat(d)||0,g=d.substr((u+"").length),"="===h.charAt(1)&&(h=Ar(u,h)+g),p=parseFloat(h),m=h.substr((p+"").length),y=Zn.lastIndex-m.length,m||(m=m||Pn.units[t]||g,y===r.length&&(r+=m,v.e+=m)),g!==m&&(u=Rs(e,t,d,m)||0),v._pt={_next:v._pt,p:f||1===b?f:",",s:u,c:p-u,m:c&&c<4||"zIndex"===t?Math.round:0});v.c=y<r.length?r.substring(y,r.length):""}else v.r="display"===t&&"none"===r?ss:os;return tr.test(r)&&(v.e=0),this._pt=v,v},Ds={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},js=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(e=n,n=r,r=e),t[0]=Ds[n]||n,t[1]=Ds[r]||r,t.join(" ")},Ls=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,o=t.t,s=o.style,a=t.u,l=o._gsap;if("all"===a||!0===a)s.cssText="",r=1;else for(i=(a=a.split(",")).length;--i>-1;)n=a[i],Jo[n]&&(r=1,n="transformOrigin"===n?fs:ps),As(o,n);r&&(As(o,ps),l&&(l.svg&&o.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",Gs(o,1),l.uncache=1,gs(s)))}},Us={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var o=e._pt=new To(e._pt,t,n,0,0,Ls);return o.u=r,o.pr=-10,o.tween=i,e._props.push(n),1}}},Fs=[1,0,0,1,0,0],Bs={},Vs=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},qs=function(e){var t=ws(e,ps);return Vs(t)?Fs:t.substr(7).match(Qn).map(Cr)},zs=function(e,t){var n,r,i,o,s=e._gsap||Sr(e),a=e.style,l=qs(e);return s.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Fs:l:(l!==Fs||e.offsetParent||e===Vo||s.svg||(i=a.display,a.display="block",(n=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(o=1,r=e.nextElementSibling,Vo.appendChild(e)),l=qs(e),i?a.display=i:As(e,"display"),o&&(r?n.insertBefore(e,r):n?n.appendChild(e):Vo.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Hs=function(e,t,n,r,i,o){var s,a,l,u=e._gsap,c=i||zs(e,!0),d=u.xOrigin||0,h=u.yOrigin||0,p=u.xOffset||0,f=u.yOffset||0,m=c[0],g=c[1],v=c[2],y=c[3],b=c[4],w=c[5],_=t.split(" "),x=parseFloat(_[0])||0,S=parseFloat(_[1])||0;n?c!==Fs&&(a=m*y-g*v)&&(l=x*(-g/a)+S*(m/a)-(m*w-g*b)/a,x=x*(y/a)+S*(-v/a)+(v*w-y*b)/a,S=l):(x=(s=Cs(e)).x+(~_[0].indexOf("%")?x/100*s.width:x),S=s.y+(~(_[1]||_[0]).indexOf("%")?S/100*s.height:S)),r||!1!==r&&u.smooth?(b=x-d,w=S-h,u.xOffset=p+(b*m+w*v)-b,u.yOffset=f+(b*g+w*y)-w):u.xOffset=u.yOffset=0,u.xOrigin=x,u.yOrigin=S,u.smooth=!!r,u.origin=t,u.originIsAbsolute=!!n,e.style[fs]="0px 0px",o&&(Os(o,u,"xOrigin",d,x),Os(o,u,"yOrigin",h,S),Os(o,u,"xOffset",p,u.xOffset),Os(o,u,"yOffset",f,u.yOffset)),e.setAttribute("data-svg-origin",x+" "+S)},Gs=function(e,t){var n=e._gsap||new $i(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,o,s,a,l,u,c,d,h,p,f,m,g,v,y,b,w,_,x,S,E,T,C,k,A,O,I,P,R,N,M,D=e.style,j=n.scaleX<0,L="px",U="deg",F=getComputedStyle(e),B=ws(e,fs)||"0";return r=i=o=l=u=c=d=h=p=0,s=a=1,n.svg=!(!e.getCTM||!ks(e)),F.translate&&("none"===F.translate&&"none"===F.scale&&"none"===F.rotate||(D[ps]=("none"!==F.translate?"translate3d("+(F.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==F.rotate?"rotate("+F.rotate+") ":"")+("none"!==F.scale?"scale("+F.scale.split(" ").join(",")+") ":"")+("none"!==F[ps]?F[ps]:"")),D.scale=D.rotate=D.translate="none"),g=zs(e,n.svg),n.svg&&(n.uncache?(k=e.getBBox(),B=n.xOrigin-k.x+"px "+(n.yOrigin-k.y)+"px",C=""):C=!t&&e.getAttribute("data-svg-origin"),Hs(e,C||B,!!C||n.originIsAbsolute,!1!==n.smooth,g)),f=n.xOrigin||0,m=n.yOrigin||0,g!==Fs&&(w=g[0],_=g[1],x=g[2],S=g[3],r=E=g[4],i=T=g[5],6===g.length?(s=Math.sqrt(w*w+_*_),a=Math.sqrt(S*S+x*x),l=w||_?Xo(_,w)*Ko:0,(d=x||S?Xo(x,S)*Ko+l:0)&&(a*=Math.abs(Math.cos(d*Yo))),n.svg&&(r-=f-(f*w+m*x),i-=m-(f*_+m*S))):(M=g[6],R=g[7],O=g[8],I=g[9],P=g[10],N=g[11],r=g[12],i=g[13],o=g[14],u=(v=Xo(M,P))*Ko,v&&(C=E*(y=Math.cos(-v))+O*(b=Math.sin(-v)),k=T*y+I*b,A=M*y+P*b,O=E*-b+O*y,I=T*-b+I*y,P=M*-b+P*y,N=R*-b+N*y,E=C,T=k,M=A),c=(v=Xo(-x,P))*Ko,v&&(y=Math.cos(-v),N=S*(b=Math.sin(-v))+N*y,w=C=w*y-O*b,_=k=_*y-I*b,x=A=x*y-P*b),l=(v=Xo(_,w))*Ko,v&&(C=w*(y=Math.cos(v))+_*(b=Math.sin(v)),k=E*y+T*b,_=_*y-w*b,T=T*y-E*b,w=C,E=k),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,c=180-c),s=Cr(Math.sqrt(w*w+_*_+x*x)),a=Cr(Math.sqrt(T*T+M*M)),v=Xo(E,T),d=Math.abs(v)>2e-4?v*Ko:0,p=N?1/(N<0?-N:N):0),n.svg&&(C=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Vs(ws(e,ps)),C&&e.setAttribute("transform",C))),Math.abs(d)>90&&Math.abs(d)<270&&(j?(s*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,d+=d<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+L,n.y=i-((n.yPercent=i&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+L,n.z=o+L,n.scaleX=Cr(s),n.scaleY=Cr(a),n.rotation=Cr(l)+U,n.rotationX=Cr(u)+U,n.rotationY=Cr(c)+U,n.skewX=d+U,n.skewY=h+U,n.transformPerspective=p+L,(n.zOrigin=parseFloat(B.split(" ")[2])||!t&&n.zOrigin||0)&&(D[fs]=Ws(B)),n.xOffset=n.yOffset=0,n.force3D=Pn.force3D,n.renderTransform=n.svg?Zs:Wo?Qs:Ks,n.uncache=0,n},Ws=function(e){return(e=e.split(" "))[0]+" "+e[1]},Js=function(e,t,n){var r=ci(t);return Cr(parseFloat(t)+parseFloat(Rs(e,"x",n+"px",r)))+r},Ks=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Qs(e,t)},Ys="0deg",Xs="0px",$s=") ",Qs=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,s=n.y,a=n.z,l=n.rotation,u=n.rotationY,c=n.rotationX,d=n.skewX,h=n.skewY,p=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,b="",w="auto"===g&&e&&1!==e||!0===g;if(y&&(c!==Ys||u!==Ys)){var _,x=parseFloat(u)*Yo,S=Math.sin(x),E=Math.cos(x);x=parseFloat(c)*Yo,_=Math.cos(x),o=Js(v,o,S*_*-y),s=Js(v,s,-Math.sin(x)*-y),a=Js(v,a,E*_*-y+y)}m!==Xs&&(b+="perspective("+m+$s),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(w||o!==Xs||s!==Xs||a!==Xs)&&(b+=a!==Xs||w?"translate3d("+o+", "+s+", "+a+") ":"translate("+o+", "+s+$s),l!==Ys&&(b+="rotate("+l+$s),u!==Ys&&(b+="rotateY("+u+$s),c!==Ys&&(b+="rotateX("+c+$s),d===Ys&&h===Ys||(b+="skew("+d+", "+h+$s),1===p&&1===f||(b+="scale("+p+", "+f+$s),v.style[ps]=b||"translate(0, 0)"},Zs=function(e,t){var n,r,i,o,s,a=t||this,l=a.xPercent,u=a.yPercent,c=a.x,d=a.y,h=a.rotation,p=a.skewX,f=a.skewY,m=a.scaleX,g=a.scaleY,v=a.target,y=a.xOrigin,b=a.yOrigin,w=a.xOffset,_=a.yOffset,x=a.forceCSS,S=parseFloat(c),E=parseFloat(d);h=parseFloat(h),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),h+=f),h||p?(h*=Yo,p*=Yo,n=Math.cos(h)*m,r=Math.sin(h)*m,i=Math.sin(h-p)*-g,o=Math.cos(h-p)*g,p&&(f*=Yo,s=Math.tan(p-f),i*=s=Math.sqrt(1+s*s),o*=s,f&&(s=Math.tan(f),n*=s=Math.sqrt(1+s*s),r*=s)),n=Cr(n),r=Cr(r),i=Cr(i),o=Cr(o)):(n=m,o=g,r=i=0),(S&&!~(c+"").indexOf("px")||E&&!~(d+"").indexOf("px"))&&(S=Rs(v,"x",c,"px"),E=Rs(v,"y",d,"px")),(y||b||w||_)&&(S=Cr(S+y-(y*n+b*i)+w),E=Cr(E+b-(y*r+b*o)+_)),(l||u)&&(s=v.getBBox(),S=Cr(S+l/100*s.width),E=Cr(E+u/100*s.height)),s="matrix("+n+","+r+","+i+","+o+","+S+","+E+")",v.setAttribute("transform",s),x&&(v.style[ps]=s)},ea=function(e,t,n,r,i){var o,s,a=360,l=Vn(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?Ko:1)-r,c=r+u+"deg";return l&&("short"===(o=i.split("_")[1])&&(u%=a)!==u%180&&(u+=u<0?a:-360),"cw"===o&&u<0?u=(u+36e9)%a-~~(u/a)*a:"ccw"===o&&u>0&&(u=(u-36e9)%a-~~(u/a)*a)),e._pt=s=new To(e._pt,t,n,r,u,ns),s.e=c,s.u="deg",e._props.push(n),s},ta=function(e,t){for(var n in t)e[n]=t[n];return e},na=function(e,t,n){var r,i,o,s,a,l,u,c=ta({},n._gsap),d=n.style;for(i in c.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),d[ps]=t,r=Gs(n,1),As(n,ps),n.setAttribute("transform",o)):(o=getComputedStyle(n)[ps],d[ps]=t,r=Gs(n,1),d[ps]=o),Jo)(o=c[i])!==(s=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(a=ci(o)!==(u=ci(s))?Rs(n,i,o,u):parseFloat(o),l=parseFloat(s),e._pt=new To(e._pt,r,i,a,l-a,ts),e._pt.u=u||0,e._props.push(i));ta(r,c)};Tr("padding,margin,Width,Radius",function(e,t){var n="Top",r="Right",i="Bottom",o="Left",s=(t<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map(function(n){return t<2?e+n:"border"+n+e});Us[t>1?"border"+e:e]=function(e,t,n,r,i){var o,a;if(arguments.length<4)return o=s.map(function(t){return Ns(e,t,n)}),5===(a=o.join(" ")).split(o[0]).length?o[0]:a;o=(r+"").split(" "),a={},s.forEach(function(e,t){return a[e]=o[t]=o[t]||o[(t-1)/2|0]}),e.init(t,a,i)}});var ra={name:"css",register:Ss,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var o,s,a,l,u,c,d,h,p,f,m,g,v,y,b,w,_=this._props,x=e.style,S=n.vars.startAt;for(d in qo||Ss(),this.styles=this.styles||ys(e),w=this.styles.props,this.tween=n,t)if("autoRound"!==d&&(s=t[d],!vr[d]||!io(d,t,n,r,e,i)))if(u=typeof s,c=Us[d],"function"===u&&(u=typeof(s=s.call(n,r,e,i))),"string"===u&&~s.indexOf("random(")&&(s=xi(s)),c)c(this,e,d,s,n)&&(b=1);else if("--"===d.substr(0,2))o=(getComputedStyle(e).getPropertyValue(d)+"").trim(),s+="",Di.lastIndex=0,Di.test(o)||(h=ci(o),p=ci(s)),p?h!==p&&(o=Rs(e,d,o,p)+p):h&&(s+=h),this.add(x,"setProperty",o,s,r,i,0,0,d),_.push(d),w.push(d,0,x[d]);else if("undefined"!==u){if(S&&d in S?(o="function"===typeof S[d]?S[d].call(n,r,e,i):S[d],Vn(o)&&~o.indexOf("random(")&&(o=xi(o)),ci(o+"")||"auto"===o||(o+=Pn.units[d]||ci(Ns(e,d))||""),"="===(o+"").charAt(1)&&(o=Ns(e,d))):o=Ns(e,d),l=parseFloat(o),(f="string"===u&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),a=parseFloat(s),d in es&&("autoAlpha"===d&&(1===l&&"hidden"===Ns(e,"visibility")&&a&&(l=0),w.push("visibility",0,x.visibility),Os(this,x,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==d&&"transform"!==d&&~(d=es[d]).indexOf(",")&&(d=d.split(",")[0])),m=d in Jo)if(this.styles.save(d),"string"===u&&"var(--"===s.substring(0,6)&&(s=ws(e,s.substring(4,s.indexOf(")"))),a=parseFloat(s)),g||((v=e._gsap).renderTransform&&!t.parseTransform||Gs(e,t.parseTransform),y=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new To(this._pt,x,ps,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===d)this._pt=new To(this._pt,v,"scaleY",v.scaleY,(f?Ar(v.scaleY,f+a):a)-v.scaleY||0,ts),this._pt.u=0,_.push("scaleY",d),d+="X";else{if("transformOrigin"===d){w.push(fs,0,x[fs]),s=js(s),v.svg?Hs(e,s,0,y,0,this):((p=parseFloat(s.split(" ")[2])||0)!==v.zOrigin&&Os(this,v,"zOrigin",v.zOrigin,p),Os(this,x,d,Ws(o),Ws(s)));continue}if("svgOrigin"===d){Hs(e,s,1,y,0,this);continue}if(d in Bs){ea(this,v,d,l,f?Ar(l,f+s):s);continue}if("smoothOrigin"===d){Os(this,v,"smooth",v.smooth,s);continue}if("force3D"===d){v[d]=s;continue}if("transform"===d){na(this,s,e);continue}}else d in x||(d=xs(d)||d);if(m||(a||0===a)&&(l||0===l)&&!Zo.test(s)&&d in x)a||(a=0),(h=(o+"").substr((l+"").length))!==(p=ci(s)||(d in Pn.units?Pn.units[d]:h))&&(l=Rs(e,d,o,p)),this._pt=new To(this._pt,m?v:x,d,l,(f?Ar(l,f+a):a)-l,m||"px"!==p&&"zIndex"!==d||!1===t.autoRound?ts:is),this._pt.u=p||0,h!==p&&"%"!==p&&(this._pt.b=o,this._pt.r=rs);else if(d in x)Ms.call(this,e,d,o,f?f+s:s);else if(d in e)this.add(e,d,o||e[d],f?f+s:s,r,i);else if("parseTransform"!==d){ar(d,s);continue}m||(d in x?w.push(d,0,x[d]):"function"===typeof e[d]?w.push(d,2,e[d]()):w.push(d,1,o||e[d])),_.push(d)}b&&Eo(this)},render:function(e,t){if(t.tween._time||!Go())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Ns,aliases:es,getSetter:function(e,t,n){var r=es[t];return r&&r.indexOf(",")<0&&(t=r),t in Jo&&t!==fs&&(e._gsap.x||Ns(e,"x"))?n&&Ho===n?"scale"===t?cs:us:(Ho=n||{})&&("scale"===t?ds:hs):e.style&&!Hn(e.style[t])?as:~t.indexOf("-")?ls:go(e,t)},core:{_removeProperty:As,_getMatrix:zs}};Uo.utils.checkPrefix=xs,Uo.core.getStyleSaver=ys,function(e,t){var n=Tr(e+","+t+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){Jo[e]=1});Tr(t,function(e){Pn.units[e]="deg",Bs[e]=1}),es[n[13]]=e+","+t,Tr("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var t=e.split(":");es[t[1]]=n[t[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Tr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Pn.units[e]="px"}),Uo.registerPlugin(ra);var ia=Uo.registerPlugin(ra)||Uo;ia.core.Tween;const oa=e=>{let{logo:t,logoAlt:n="Logo",items:i,className:o="",ease:s="power3.out",baseColor:a="#fff",menuColor:l,buttonBgColor:u,buttonTextColor:c}=e;const[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),m=(0,r.useRef)(null),g=(0,r.useRef)([]),v=(0,r.useRef)(null),y=()=>{const e=m.current;if(!e)return 260;if(window.matchMedia("(max-width: 768px)").matches){const t=e.querySelector(".card-nav-content");if(t){const e=t.style.visibility,n=t.style.pointerEvents,r=t.style.position,i=t.style.height;t.style.visibility="visible",t.style.pointerEvents="auto",t.style.position="static",t.style.height="auto",t.offsetHeight;const o=60,s=16,a=t.scrollHeight;return t.style.visibility=e,t.style.pointerEvents=n,t.style.position=r,t.style.height=i,o+a+s}}return 260},b=()=>{const e=m.current;if(!e)return null;ia.set(e,{height:60,overflow:"hidden"}),ia.set(g.current,{y:50,opacity:0});const t=ia.timeline({paused:!0});return t.to(e,{height:y,duration:.4,ease:s}),t.to(g.current,{y:0,opacity:1,duration:.4,ease:s,stagger:.08},"-=0.1"),t};(0,r.useLayoutEffect)(()=>{const e=b();return v.current=e,()=>{null===e||void 0===e||e.kill(),v.current=null}},[s,i]),(0,r.useLayoutEffect)(()=>{const e=()=>{if(v.current)if(p){const e=y();ia.set(m.current,{height:e}),v.current.kill();const t=b();t&&(t.progress(1),v.current=t)}else{v.current.kill();const e=b();e&&(v.current=e)}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[p]);return(0,gn.jsx)("div",{className:"card-nav-container absolute left-1/2 -translate-x-1/2 w-[95%] sm:w-[90%] max-w-[800px] z-[99] top-[1em] sm:top-[1.2em] md:top-[2em] ".concat(o),children:(0,gn.jsxs)("nav",{ref:m,className:"card-nav ".concat(p?"open":""," block h-[60px] p-0 rounded-xl relative overflow-hidden will-change-[height] backdrop-blur-md bg-white/10 border border-white/20 shadow-lg"),children:[(0,gn.jsxs)("div",{className:"card-nav-top absolute inset-x-0 top-0 h-[60px] flex items-center justify-between p-2 pl-[0.8rem] sm:pl-[1.1rem] z-[2]",children:[(0,gn.jsxs)("div",{className:"hamburger-menu ".concat(d?"open":""," group h-full flex flex-col items-center justify-center cursor-pointer gap-[6px] order-2 md:order-none"),onClick:()=>{const e=v.current;e&&(p?(h(!1),e.eventCallback("onReverseComplete",()=>f(!1)),e.reverse()):(h(!0),f(!0),e.play(0)))},role:"button","aria-label":p?"Close menu":"Open menu",tabIndex:0,style:{color:l||"#fff"},children:[(0,gn.jsx)("div",{className:"hamburger-line w-[30px] h-[2px] bg-current transition-[transform,opacity,margin] duration-300 ease-linear [transform-origin:50%_50%] ".concat(d?"translate-y-[4px] rotate-45":""," group-hover:opacity-75")}),(0,gn.jsx)("div",{className:"hamburger-line w-[30px] h-[2px] bg-current transition-[transform,opacity,margin] duration-300 ease-linear [transform-origin:50%_50%] ".concat(d?"-translate-y-[4px] -rotate-45":""," group-hover:opacity-75")})]}),(0,gn.jsx)("div",{className:"logo-container flex items-center md:absolute md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 order-1 md:order-none gap-1 sm:gap-2",children:(0,gn.jsx)("span",{className:"text-white font-black text-sm sm:text-lg uppercase",children:"KIMI V2"})}),(0,gn.jsx)(mt,{to:"/chat",className:"card-nav-cta-button hidden md:inline-flex items-center justify-center border-0 rounded-[calc(0.75rem-0.2rem)] px-4 h-full font-medium cursor-pointer transition-colors duration-300 backdrop-blur-sm bg-white/20 border border-white/30 text-white hover:bg-white/30",style:{backgroundColor:u||"transparent",color:c||"#fff"},children:"Get Started"})]}),(0,gn.jsx)("div",{className:"card-nav-content absolute left-0 right-0 top-[60px] bottom-0 p-2 flex flex-col items-stretch gap-2 justify-start z-[1] ".concat(p?"visible pointer-events-auto":"invisible pointer-events-none"," md:flex-row md:items-end md:gap-[12px]"),"aria-hidden":!p,children:(i||[]).slice(0,3).map((e,t)=>{var n,r;return(0,gn.jsxs)("div",{className:"nav-card select-none relative flex flex-col gap-2 p-[12px_16px] rounded-[calc(0.75rem-0.2rem)] min-w-0 flex-[1_1_auto] h-auto min-h-[60px] md:h-full md:min-h-0 md:flex-[1_1_0%]",ref:(r=t,e=>{e&&(g.current[r]=e)}),style:{backgroundColor:e.bgColor,color:e.textColor},children:[(0,gn.jsx)("div",{className:"nav-card-label font-normal tracking-[-0.5px] text-[18px] md:text-[22px]",children:e.label}),(0,gn.jsx)("div",{className:"nav-card-links mt-auto flex flex-col gap-[2px]",children:null===(n=e.links)||void 0===n?void 0:n.map((e,t)=>(0,gn.jsxs)(mt,{className:"nav-card-link inline-flex items-center gap-[6px] no-underline cursor-pointer transition-opacity duration-300 hover:opacity-75 text-[15px] md:text-[16px]",to:e.href,"aria-label":e.ariaLabel,children:[(0,gn.jsxs)("svg",{className:"nav-card-link-icon shrink-0",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,gn.jsx)("path",{d:"M7 17L17 7"}),(0,gn.jsx)("path",{d:"M7 7h10v10"})]}),e.label]},"".concat(e.label,"-").concat(t)))})]},"".concat(e.label,"-").concat(t))})})]})})},sa=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),aa=(0,r.createContext)({}),la=(0,r.createContext)(null),ua="undefined"!==typeof document,ca=ua?r.useLayoutEffect:r.useEffect,da=(0,r.createContext)({strict:!1}),ha=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),pa="data-"+ha("framerAppearId");function fa(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ma(e){return"string"===typeof e||Array.isArray(e)}function ga(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const va=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ya=["initial",...va];function ba(e){return ga(e.animate)||ya.some(t=>ma(e[t]))}function wa(e){return Boolean(ba(e)||e.variants)}function _a(e){const{initial:t,animate:n}=function(e,t){if(ba(e)){const{initial:t,animate:n}=e;return{initial:!1===t||ma(t)?t:void 0,animate:ma(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(aa));return(0,r.useMemo)(()=>({initial:t,animate:n}),[xa(t),xa(n)])}function xa(e){return Array.isArray(e)?e.join(" "):e}const Sa={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ea={};for(const iT in Sa)Ea[iT]={isEnabled:e=>Sa[iT].some(t=>!!e[t])};const Ta=(0,r.createContext)({}),Ca=(0,r.createContext)({}),ka=Symbol.for("motionComponentSymbol");function Aa(e){let{preloadedFeatures:t,createVisualElement:n,useRender:i,useVisualState:o,Component:s}=e;t&&function(e){for(const t in e)Ea[t]=c(c({},Ea[t]),e[t])}(t);const a=(0,r.forwardRef)(function(e,a){let l;const u=c(c(c({},(0,r.useContext)(sa)),e),{},{layoutId:Oa(e)}),{isStatic:d}=u,h=_a(e),p=o(e,d);if(!d&&ua){h.visualElement=function(e,t,n,i){const{visualElement:o}=(0,r.useContext)(aa),s=(0,r.useContext)(da),a=(0,r.useContext)(la),l=(0,r.useContext)(sa).reducedMotion,u=(0,r.useRef)();i=i||s.renderer,!u.current&&i&&(u.current=i(e,{visualState:t,parent:o,props:n,presenceContext:a,blockInitialAnimation:!!a&&!1===a.initial,reducedMotionConfig:l}));const c=u.current;(0,r.useInsertionEffect)(()=>{c&&c.update(n,a)});const d=(0,r.useRef)(Boolean(n[pa]&&!window.HandoffComplete));return ca(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),(0,r.useEffect)(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}(s,p,u,n);const e=(0,r.useContext)(Ca),i=(0,r.useContext)(da).strict;h.visualElement&&(l=h.visualElement.loadFeatures(u,i,t,e))}return r.createElement(aa.Provider,{value:h},l&&h.visualElement?r.createElement(l,c({visualElement:h.visualElement},u)):null,i(s,e,function(e,t,n){return(0,r.useCallback)(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):fa(n)&&(n.current=r))},[t])}(p,h.visualElement,a),p,d,h.visualElement))});return a[ka]=s,a}function Oa(e){let{layoutId:t}=e;const n=(0,r.useContext)(Ta).id;return n&&void 0!==t?n+"-"+t:t}function Ia(e){function t(t){return Aa(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const Pa=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ra(e){return"string"===typeof e&&!e.includes("-")&&!!(Pa.indexOf(e)>-1||/[A-Z]/.test(e))}const Na={};const Ma=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Da=new Set(Ma);function ja(e,t){let{layout:n,layoutId:r}=t;return Da.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Na[e]||"opacity"===e)}const La=e=>Boolean(e&&e.getVelocity),Ua={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fa=Ma.length;const Ba=e=>t=>"string"===typeof t&&t.startsWith(e),Va=Ba("--"),qa=Ba("var(--"),za=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Ha=(e,t,n)=>Math.min(Math.max(n,e),t),Ga={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Wa=c(c({},Ga),{},{transform:e=>Ha(0,1,e)}),Ja=c(c({},Ga),{},{default:1}),Ka=e=>Math.round(1e5*e)/1e5,Ya=/(-)?([\d]*\.?[\d])+/g,Xa=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,$a=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qa(e){return"string"===typeof e}const Za=e=>({test:t=>Qa(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),el=Za("deg"),tl=Za("%"),nl=Za("px"),rl=Za("vh"),il=Za("vw"),ol=c(c({},tl),{},{parse:e=>tl.parse(e)/100,transform:e=>tl.transform(100*e)}),sl=c(c({},Ga),{},{transform:Math.round}),al={borderWidth:nl,borderTopWidth:nl,borderRightWidth:nl,borderBottomWidth:nl,borderLeftWidth:nl,borderRadius:nl,radius:nl,borderTopLeftRadius:nl,borderTopRightRadius:nl,borderBottomRightRadius:nl,borderBottomLeftRadius:nl,width:nl,maxWidth:nl,height:nl,maxHeight:nl,size:nl,top:nl,right:nl,bottom:nl,left:nl,padding:nl,paddingTop:nl,paddingRight:nl,paddingBottom:nl,paddingLeft:nl,margin:nl,marginTop:nl,marginRight:nl,marginBottom:nl,marginLeft:nl,rotate:el,rotateX:el,rotateY:el,rotateZ:el,scale:Ja,scaleX:Ja,scaleY:Ja,scaleZ:Ja,skew:el,skewX:el,skewY:el,distance:nl,translateX:nl,translateY:nl,translateZ:nl,x:nl,y:nl,z:nl,perspective:nl,transformPerspective:nl,opacity:Wa,originX:ol,originY:ol,originZ:nl,zIndex:sl,fillOpacity:Wa,strokeOpacity:Wa,numOctaves:sl};function ll(e,t,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=e;let l=!1,u=!1,c=!0;for(const d in t){const e=t[d];if(Va(d)){o[d]=e;continue}const n=al[d],r=za(e,n);if(Da.has(d)){if(l=!0,s[d]=r,!c)continue;e!==(n.default||0)&&(c=!1)}else d.startsWith("origin")?(u=!0,a[d]=r):i[d]=r}if(t.transform||(l||r?i.transform=function(e,t,n,r){let{enableHardwareAcceleration:i=!0,allowTransformNone:o=!0}=t,s="";for(let a=0;a<Fa;a++){const t=Ma[a];void 0!==e[t]&&(s+="".concat(Ua[t]||t,"(").concat(e[t],") "))}return i&&!e.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(e,n?"":s):o&&n&&(s="none"),s}(e.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;i.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const ul=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cl(e,t,n){for(const r in t)La(t[r])||ja(r,n)||(e[r]=t[r])}function dl(e,t,n){const i={};return cl(i,e.style||{},e),Object.assign(i,function(e,t,n){let{transformTemplate:i}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return ll(e,t,{enableHardwareAcceleration:!n},i),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(i):i}function hl(e,t,n){const r={},i=dl(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const pl=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fl(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pl.has(e)}let ml=e=>!fl(e);try{(gl=require("@emotion/is-prop-valid").default)&&(ml=e=>e.startsWith("on")?!fl(e):gl(e))}catch(rT){}var gl;function vl(e,t,n){return"string"===typeof e?e:nl.transform(t+n*e)}const yl={offset:"stroke-dashoffset",array:"stroke-dasharray"},bl={offset:"strokeDashoffset",array:"strokeDasharray"};const wl=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function _l(e,t,n,r,i){let{attrX:s,attrY:a,attrScale:l,originX:u,originY:c,pathLength:d,pathSpacing:h=1,pathOffset:p=0}=t;if(ll(e,o(t,wl),n,i),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:g}=e;f.transform&&(g&&(m.transform=f.transform),delete f.transform),g&&(void 0!==u||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){const r=vl(t,e.x,e.width),i=vl(n,e.y,e.height);return"".concat(r," ").concat(i)}(g,void 0!==u?u:.5,void 0!==c?c:.5)),void 0!==s&&(f.x=s),void 0!==a&&(f.y=a),void 0!==l&&(f.scale=l),void 0!==d&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=i?yl:bl;e[o.offset]=nl.transform(-r);const s=nl.transform(t),a=nl.transform(n);e[o.array]="".concat(s," ").concat(a)}(f,d,h,p,!1)}const xl=()=>c(c({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),Sl=e=>"string"===typeof e&&"svg"===e.toLowerCase();function El(e,t,n,i){const o=(0,r.useMemo)(()=>{const n=xl();return _l(n,t,{enableHardwareAcceleration:!1},Sl(i),e.transformTemplate),c(c({},n.attrs),{},{style:c({},n.style)})},[t]);if(e.style){const t={};cl(t,e.style,e),o.style=c(c({},t),o.style)}return o}function Tl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,i,o,s)=>{let{latestValues:a}=o;const l=(Ra(t)?El:hl)(n,a,s,t),u=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(ml(i)||!0===n&&fl(i)||!t&&!fl(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),d=c(c(c({},u),l),{},{ref:i}),{children:h}=n,p=(0,r.useMemo)(()=>La(h)?h.get():h,[h]);return(0,r.createElement)(t,c(c({},d),{},{children:p}))}}function Cl(e,t,n,r){let{style:i,vars:o}=t;Object.assign(e.style,i,r&&r.getProjectionStyles(n));for(const s in o)e.style.setProperty(s,o[s])}const kl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Al(e,t,n,r){Cl(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(kl.has(i)?i:ha(i),t.attrs[i])}function Ol(e,t){const{style:n}=e,r={};for(const i in n)(La(n[i])||t.style&&La(t.style[i])||ja(i,e))&&(r[i]=n[i]);return r}function Il(e,t){const n=Ol(e,t);for(const r in e)if(La(e[r])||La(t[r])){n[-1!==Ma.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function Pl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}const Rl=e=>Array.isArray(e),Nl=e=>Rl(e)?e[e.length-1]||0:e;function Ml(e){const t=La(e)?e.get():e;return n=t,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const Dl=["transitionEnd","transition"];const jl=e=>(t,n)=>{const i=(0,r.useContext)(aa),o=(0,r.useContext)(la),s=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:o,onMount:s}=e;const a={latestValues:Ll(t,n,r,i),renderState:o()};return s&&(a.mount=e=>s(t,e,a)),a}(e,t,i,o);return n?s():function(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}(s)};function Ll(e,t,n,r){const i={},s=r(e,{});for(const o in s)i[o]=Ml(s[o]);let{initial:a,animate:l}=e;const u=ba(e),c=wa(e);t&&c&&!u&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===l&&(l=t.animate));let d=!!n&&!1===n.initial;d=d||!1===a;const h=d?l:a;if(h&&"boolean"!==typeof h&&!ga(h)){(Array.isArray(h)?h:[h]).forEach(t=>{const n=Pl(e,t);if(!n)return;const{transitionEnd:r,transition:s}=n,a=o(n,Dl);for(const e in a){let t=a[e];if(Array.isArray(t)){t=t[d?t.length-1:0]}null!==t&&(i[e]=t)}for(const e in r)i[e]=r[e]})}return i}const Ul=e=>e;class Fl{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const Bl=["prepare","read","update","preRender","render","postRender"];const{schedule:Vl,cancel:ql,state:zl,steps:Hl}=function(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Bl.reduce((e,t)=>(e[t]=function(e){let t=new Fl,n=new Fl,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:function(e){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,a=o?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),a.add(e)&&o&&i&&(r=t.order.length),e},cancel:e=>{n.remove(e),s.delete(e)},process:l=>{if(i)o=!0;else{if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),s.has(r)&&(a.schedule(r),e())}i=!1,o&&(o=!1,a.process(l))}}};return a}(()=>n=!0),e),{}),s=e=>o[e].process(i),a=()=>{const o=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(o-i.timestamp,40),1),i.timestamp=o,i.isProcessing=!0,Bl.forEach(s),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=Bl.reduce((t,s)=>{const l=o[s];return t[s]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(a)),l.schedule(t,o,s)},t},{});return{schedule:l,cancel:e=>Bl.forEach(t=>o[t].cancel(e)),state:i,steps:o}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Ul,!0),Gl={useVisualState:jl({scrapeMotionValuesFromProps:Il,createRenderState:xl,onMount:(e,t,n)=>{let{renderState:r,latestValues:i}=n;Vl.read(()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(nT){r.dimensions={x:0,y:0,width:0,height:0}}}),Vl.render(()=>{_l(r,i,{enableHardwareAcceleration:!1},Sl(t.tagName),e.transformTemplate),Al(t,r)})}})},Wl={useVisualState:jl({scrapeMotionValuesFromProps:Ol,createRenderState:ul})};function Jl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Kl=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Yl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function Xl(e,t,n,r){return Jl(e,t,(e=>t=>Kl(t)&&e(t,Yl(t)))(n),r)}const $l=(e,t)=>n=>t(e(n)),Ql=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce($l)};function Zl(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const eu=Zl("dragHorizontal"),tu=Zl("dragVertical");function nu(e){let t=!1;if("y"===e)t=tu();else if("x"===e)t=eu();else{const e=eu(),n=tu();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function ru(){const e=nu(!0);return!e||(e(),!1)}class iu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ou(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Xl(e.current,n,(n,i)=>{if("touch"===n.pointerType||ru())return;const o=e.getProps();e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",t),o[r]&&Vl.update(()=>o[r](n,i))},{passive:!e.getProps()[r]})}const su=(e,t)=>!!t&&(e===t||su(e,t.parentElement));function au(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Yl(n))}const lu=["root"],uu=new WeakMap,cu=new WeakMap,du=e=>{const t=uu.get(e.target);t&&t(e)},hu=e=>{e.forEach(du)};function pu(e,t,n){const r=function(e){let{root:t}=e,n=o(e,lu);const r=t||document;cu.has(r)||cu.set(r,{});const i=cu.get(r),s=JSON.stringify(n);return i[s]||(i[s]=new IntersectionObserver(hu,c({root:t},n))),i[s]}(t);return uu.set(e,n),r.observe(e),()=>{uu.delete(e),r.unobserve(e)}}const fu={some:0,all:1};const mu={inView:{Feature:class extends iu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:fu[r]};return pu(this.node.current,o,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=t?n:r;o&&o(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends iu{constructor(){super(...arguments),this.removeStartListeners=Ul,this.removeEndListeners=Ul,this.removeAccessibleListeners=Ul,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=Xl(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps();Vl.update(()=>{i||su(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),i=Xl(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ql(r,i),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=Jl(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=Jl(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&au("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&Vl.update(()=>n(e,t))})}),au("down",(e,t)=>{this.startPress(e,t)})}),t=Jl(this.node.current,"blur",()=>{this.isPressing&&au("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=Ql(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Vl.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ru()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Vl.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=Xl(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Jl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ql(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends iu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(nT){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ql(Jl(this.node.current,"focus",()=>this.onFocus()),Jl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends iu{mount(){this.unmount=Ql(ou(this.node,!0),ou(this.node,!1))}unmount(){}}}};function gu(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function vu(e,t,n){const r=e.getProps();return Pl(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}let yu=Ul,bu=Ul;const wu=e=>1e3*e,_u=e=>e/1e3,xu=!1,Su=e=>Array.isArray(e)&&"number"===typeof e[0];function Eu(e){return Boolean(!e||"string"===typeof e&&Cu[e]||Su(e)||Array.isArray(e)&&e.every(Eu))}const Tu=e=>{let[t,n,r,i]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(i,")")},Cu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Tu([0,.65,.55,1]),circOut:Tu([.55,0,1,.45]),backIn:Tu([.31,.01,.66,-.59]),backOut:Tu([.33,1.53,.69,.99])};function ku(e){if(e)return Su(e)?Tu(e):Array.isArray(e)?e.map(ku):Cu[e]}const Au=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Ou(e,t,n,r){if(e===t&&n===r)return Ul;const i=t=>function(e,t,n,r,i){let o,s,a=0;do{s=t+(n-t)/2,o=Au(s,r,i)-e,o>0?n=s:t=s}while(Math.abs(o)>1e-7&&++a<12);return s}(t,0,1,e,n);return e=>0===e||1===e?e:Au(i(e),t,r)}const Iu=Ou(.42,0,1,1),Pu=Ou(0,0,.58,1),Ru=Ou(.42,0,.58,1),Nu=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Mu=e=>t=>1-e(1-t),Du=e=>1-Math.sin(Math.acos(e)),ju=Mu(Du),Lu=Nu(Du),Uu=Ou(.33,1.53,.69,.99),Fu=Mu(Uu),Bu=Nu(Fu),Vu={linear:Ul,easeIn:Iu,easeInOut:Ru,easeOut:Pu,circIn:Du,circInOut:Lu,circOut:ju,backIn:Fu,backInOut:Bu,backOut:Uu,anticipate:e=>(e*=2)<1?.5*Fu(e):.5*(2-Math.pow(2,-10*(e-1)))},qu=e=>{if(Array.isArray(e)){bu(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,i]=e;return Ou(t,n,r,i)}return"string"===typeof e?(bu(void 0!==Vu[e],"Invalid easing type '".concat(e,"'")),Vu[e]):e},zu=(e,t)=>n=>Boolean(Qa(n)&&$a.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Hu=(e,t,n)=>r=>{if(!Qa(r))return r;const[i,o,s,a]=r.match(Ya);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},Gu=c(c({},Ga),{},{transform:e=>Math.round((e=>Ha(0,255,e))(e))}),Wu={test:zu("rgb","red"),parse:Hu("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+Gu.transform(t)+", "+Gu.transform(n)+", "+Gu.transform(r)+", "+Ka(Wa.transform(i))+")"}};const Ju={test:zu("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Wu.transform},Ku={test:zu("hsl","hue"),parse:Hu("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+tl.transform(Ka(n))+", "+tl.transform(Ka(r))+", "+Ka(Wa.transform(i))+")"}},Yu={test:e=>Wu.test(e)||Ju.test(e)||Ku.test(e),parse:e=>Wu.test(e)?Wu.parse(e):Ku.test(e)?Ku.parse(e):Ju.parse(e),transform:e=>Qa(e)?e:e.hasOwnProperty("red")?Wu.transform(e):Ku.transform(e)},Xu=(e,t,n)=>-n*e+n*t+e;function $u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const Qu=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Zu=[Ju,Wu,Ku];function ec(e){const t=(n=e,Zu.find(e=>e.test(n)));var n;bu(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let r=t.parse(e);return t===Ku&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let o=0,s=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;o=$u(i,e,t+1/3),s=$u(i,e,t),a=$u(i,e,t-1/3)}else o=s=a=r;return{red:Math.round(255*o),green:Math.round(255*s),blue:Math.round(255*a),alpha:i}}(r)),r}const tc=(e,t)=>{const n=ec(e),r=ec(t),i=c({},n);return e=>(i.red=Qu(n.red,r.red,e),i.green=Qu(n.green,r.green,e),i.blue=Qu(n.blue,r.blue,e),i.alpha=Xu(n.alpha,r.alpha,e),Wu.transform(i))};const nc={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Ul},rc={regex:Xa,countKey:"Colors",token:"${c}",parse:Yu.parse},ic={regex:Ya,countKey:"Numbers",token:"${n}",parse:Ga.parse};function oc(e,t){let{regex:n,countKey:r,token:i,parse:o}=t;const s=e.tokenised.match(n);s&&(e["num"+r]=s.length,e.tokenised=e.tokenised.replace(n,i),e.values.push(...s.map(o)))}function sc(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&oc(n,nc),oc(n,rc),oc(n,ic),n}function ac(e){return sc(e).values}function lc(e){const{values:t,numColors:n,numVars:r,tokenised:i}=sc(e),o=t.length;return e=>{let t=i;for(let i=0;i<o;i++)t=i<r?t.replace(nc.token,e[i]):i<r+n?t.replace(rc.token,Yu.transform(e[i])):t.replace(ic.token,Ka(e[i]));return t}}const uc=e=>"number"===typeof e?0:e;const cc={test:function(e){var t,n;return isNaN(e)&&Qa(e)&&((null===(t=e.match(Ya))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Xa))||void 0===n?void 0:n.length)||0)>0},parse:ac,createTransformer:lc,getAnimatableNone:function(e){const t=ac(e);return lc(e)(t.map(uc))}},dc=(e,t)=>n=>"".concat(n>0?t:e);function hc(e,t){return"number"===typeof e?n=>Xu(e,t,n):Yu.test(e)?tc(e,t):e.startsWith("var(")?dc(e,t):mc(e,t)}const pc=(e,t)=>{const n=[...e],r=n.length,i=e.map((e,n)=>hc(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},fc=(e,t)=>{const n=c(c({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=hc(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}},mc=(e,t)=>{const n=cc.createTransformer(t),r=sc(e),i=sc(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Ql(pc(r.values,i.values),n):(yu(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),dc(e,t))},gc=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},vc=(e,t)=>n=>Xu(e,t,n);function yc(e,t,n){const r=[],i=n||("number"===typeof(o=e[0])?vc:"string"===typeof o?Yu.test(o)?tc:mc:Array.isArray(o)?pc:"object"===typeof o?fc:vc);var o;const s=e.length-1;for(let a=0;a<s;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Ul:t;n=Ql(e,n)}r.push(n)}return r}function bc(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(bu(o===t.length,"Both input and output ranges must be the same length"),1===o)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=yc(t,r,i),a=s.length,l=t=>{let n=0;if(a>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=gc(e[n],e[n+1],t);return s[n](r)};return n?t=>l(Ha(e[0],e[o-1],t)):l}function wc(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=gc(0,t,r);e.push(Xu(n,1,i))}}(t,e.length-1),t}function _c(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const o=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(qu):qu(i),s={done:!1,value:n[0]},a=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:wc(n),t),l=bc(a,n,{ease:Array.isArray(o)?o:(u=n,c=o,u.map(()=>c||Ru).splice(0,u.length-1))});var u,c;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}function xc(e,t){return t?e*(1e3/t):0}function Sc(e,t,n){const r=Math.max(t-5,0);return xc(n-e(r),t-r)}const Ec=.001;function Tc(e){let t,n,{duration:r=800,bounce:i=.25,velocity:o=0,mass:s=1}=e;yu(r<=wu(10),"Spring duration must be 10 seconds or less");let a=1-i;a=Ha(.05,1,a),r=Ha(.01,10,_u(r)),a<1?(t=e=>{const t=e*a,n=t*r,i=t-o,s=kc(e,a),l=Math.exp(-n);return Ec-i/s*l},n=e=>{const n=e*a*r,i=n*o+o,s=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),u=kc(Math.pow(e,2),a);return(-t(e)+Ec>0?-1:1)*((i-s)*l)/u}):(t=e=>Math.exp(-e*r)*((e-o)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(o-e)));const l=function(e,t,n){let r=n;for(let i=1;i<Cc;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=wu(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*a*Math.sqrt(s*e),duration:r}}}const Cc=12;function kc(e,t){return e*Math.sqrt(1-t*t)}const Ac=["keyframes","restDelta","restSpeed"],Oc=["duration","bounce"],Ic=["stiffness","damping","mass"];function Pc(e,t){return t.some(t=>void 0!==e[t])}function Rc(e){let{keyframes:t,restDelta:n,restSpeed:r}=e,i=o(e,Ac);const s=t[0],a=t[t.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:f,isResolvedFromDuration:m}=function(e){let t=c({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Pc(e,Ic)&&Pc(e,Oc)){const n=Tc(e);t=c(c(c({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}(c(c({},i),{},{velocity:-_u(i.velocity||0)})),g=f||0,v=d/(2*Math.sqrt(u*h)),y=a-s,b=_u(Math.sqrt(u/h)),w=Math.abs(y)<5;let _;if(r||(r=w?.01:2),n||(n=w?.005:.5),v<1){const e=kc(b,v);_=t=>{const n=Math.exp(-v*b*t);return a-n*((g+v*b*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}}else if(1===v)_=e=>a-Math.exp(-b*e)*(y+(g+b*y)*e);else{const e=b*Math.sqrt(v*v-1);_=t=>{const n=Math.exp(-v*b*t),r=Math.min(e*t,300);return a-n*((g+v*b*y)*Math.sinh(r)+e*y*Math.cosh(r))/e}}return{calculatedDuration:m&&p||null,next:e=>{const t=_(e);if(m)l.done=e>=p;else{let i=g;0!==e&&(i=v<1?Sc(_,e,t):0);const o=Math.abs(i)<=r,s=Math.abs(a-t)<=n;l.done=o&&s}return l.value=l.done?a:t,l}}}function Nc(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:u,restDelta:c=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?u:void 0===u||Math.abs(l-e)<Math.abs(u-e)?l:u;let m=r*n;const g=h+m,v=void 0===a?g:a(g);v!==g&&(m=v-h);const y=e=>-m*Math.exp(-e/i),b=e=>v+y(e),w=e=>{const t=y(e),n=b(e);p.done=Math.abs(t)<=c,p.value=p.done?v:n};let _,x;const S=e=>{var t;(t=p.value,void 0!==l&&t<l||void 0!==u&&t>u)&&(_=e,x=Rc({keyframes:[p.value,f(p.value)],velocity:Sc(b,e,p.value),damping:o,stiffness:s,restDelta:c,restSpeed:d}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return x||void 0!==_||(t=!0,w(e),S(e)),void 0!==_&&e>_?x.next(e-_):(!t&&w(e),p)}}}const Mc=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>Vl.update(t,!0),stop:()=>ql(t),now:()=>zl.isProcessing?zl.timestamp:performance.now()}};function Dc(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const jc=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],Lc={decay:Nc,inertia:Nc,tween:_c,keyframes:_c,spring:Rc};function Uc(e){let t,n,{autoplay:r=!0,delay:i=0,driver:s=Mc,keyframes:a,type:l="keyframes",repeat:u=0,repeatDelay:d=0,repeatType:h="loop",onPlay:p,onStop:f,onComplete:m,onUpdate:g}=e,v=o(e,jc),y=1,b=!1;const w=()=>{n=new Promise(e=>{t=e})};let _;w();const x=Lc[l]||_c;let S;x!==_c&&"number"!==typeof a[0]&&(S=bc([0,100],a,{clamp:!1}),a=[0,100]);const E=x(c(c({},v),{},{keyframes:a}));let T;"mirror"===h&&(T=x(c(c({},v),{},{keyframes:[...a].reverse(),velocity:-(v.velocity||0)})));let C="idle",k=null,A=null,O=null;null===E.calculatedDuration&&u&&(E.calculatedDuration=Dc(E));const{calculatedDuration:I}=E;let P=1/0,R=1/0;null!==I&&(P=I+d,R=P*(u+1)-d);let N=0;const M=e=>{if(null===A)return;y>0&&(A=Math.min(A,e)),y<0&&(A=Math.min(e-R/y,A)),N=null!==k?k:Math.round(e-A)*y;const t=N-i*(y>=0?1:-1),n=y>=0?t<0:t>R;N=Math.max(t,0),"finished"===C&&null===k&&(N=R);let r=N,o=E;if(u){const e=Math.min(N,R)/P;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===h?(n=1-n,d&&(n-=d/P)):"mirror"===h&&(o=T)),r=Ha(0,1,n)*P}const s=n?{done:!1,value:a[0]}:o.next(r);S&&(s.value=S(s.value));let{done:l}=s;n||null===I||(l=y>=0?N>=R:N<=0);const c=null===k&&("finished"===C||"running"===C&&l);return g&&g(s.value),c&&L(),s},D=()=>{_&&_.stop(),_=void 0},j=()=>{C="idle",D(),t(),w(),A=O=null},L=()=>{C="finished",m&&m(),D(),t()},U=()=>{if(b)return;_||(_=s(M));const e=_.now();p&&p(),null!==k?A=e-k:A&&"finished"!==C||(A=e),"finished"===C&&w(),O=A,k=null,C="running",_.start()};r&&U();const F={then:(e,t)=>n.then(e,t),get time(){return _u(N)},set time(e){e=wu(e),N=e,null===k&&_&&0!==y?A=_.now()-e/y:k=e},get duration(){const e=null===E.calculatedDuration?Dc(E):E.calculatedDuration;return _u(e)},get speed(){return y},set speed(e){e!==y&&_&&(y=e,F.time=_u(N))},get state(){return C},play:U,pause:()=>{C="paused",k=N},stop:()=>{b=!0,"idle"!==C&&(C="idle",f&&f(),j())},cancel:()=>{null!==O&&M(O),j()},complete:()=>{C="finished"},sample:e=>(A=0,M(e))};return F}const Fc=["onUpdate","onComplete"],Bc=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Vc=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function qc(e,t,n){let{onUpdate:r,onComplete:i}=n,s=o(n,Fc);if(!(Bc()&&Vc.has(t)&&!s.repeatDelay&&"mirror"!==s.repeatType&&0!==s.damping&&"inertia"!==s.type))return!1;let a,l,u=!1,d=!1;const h=()=>{l=new Promise(e=>{a=e})};h();let{keyframes:p,duration:f=300,ease:m,times:g}=s;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!Eu(t.ease))(t,s)){const e=Uc(c(c({},s),{},{repeat:0,delay:0}));let t={done:!1,value:p[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;g=void 0,p=n,f=r-10,m="linear"}const v=function(e,t,n){let{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const u={[t]:n};l&&(u.offset=l);const c=ku(a);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:o+1,direction:"reverse"===s?"alternate":"normal"})}(e.owner.current,t,p,c(c({},s),{},{duration:f,ease:m,times:g})),y=()=>{d=!1,v.cancel()},b=()=>{d=!0,Vl.update(y),a(),h()};v.onfinish=()=>{d||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(p,s)),i&&i(),b())};return{then:(e,t)=>l.then(e,t),attachTimeline:e=>(v.timeline=e,v.onfinish=null,Ul),get time(){return _u(v.currentTime||0)},set time(e){v.currentTime=wu(e)},get speed(){return v.playbackRate},set speed(e){v.playbackRate=e},get duration(){return _u(f)},play:()=>{u||(v.play(),ql(y))},pause:()=>v.pause(),stop:()=>{if(u=!0,"idle"===v.playState)return;const{currentTime:t}=v;if(t){const n=Uc(c(c({},s),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}b()},complete:()=>{d||v.finish()},cancel:b}}const zc={type:"spring",stiffness:500,damping:25,restSpeed:10},Hc={type:"keyframes",duration:.8},Gc={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wc=(e,t)=>{let{keyframes:n}=t;return n.length>2?Hc:Da.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:zc:Gc},Jc=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!cc.test(t)&&"0"!==t||t.startsWith("url("))),Kc=new Set(["brightness","contrast","saturate","opacity"]);function Yc(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Ya)||[];if(!r)return e;const i=n.replace(r,"");let o=Kc.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const Xc=/([a-z-]*)\(.*?\)/g,$c=c(c({},cc),{},{getAnimatableNone:e=>{const t=e.match(Xc);return t?t.map(Yc).join(" "):e}}),Qc=c(c({},al),{},{color:Yu,backgroundColor:Yu,outlineColor:Yu,fill:Yu,stroke:Yu,borderColor:Yu,borderTopColor:Yu,borderRightColor:Yu,borderBottomColor:Yu,borderLeftColor:Yu,filter:$c,WebkitFilter:$c}),Zc=e=>Qc[e];function ed(e,t){let n=Zc(e);return n!==$c&&(n=cc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const td=e=>/^0[^.\s]+$/.test(e);function nd(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||td(e):void 0}const rd=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function id(e,t){return e[t]||e.default||e}const od=!1,sd=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{const s=id(r,e)||{},a=s.delay||r.delay||0;let{elapsed:l=0}=r;l-=wu(a);const u=function(e,t,n,r){const i=Jc(t,n);let o;o=Array.isArray(n)?[...n]:[null,n];const s=void 0!==r.from?r.from:e.get();let a;const l=[];for(let u=0;u<o.length;u++)null===o[u]&&(o[u]=0===u?s:o[u-1]),nd(o[u])&&l.push(u),"string"===typeof o[u]&&"none"!==o[u]&&"0"!==o[u]&&(a=o[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++)o[l[u]]=ed(t,a);return o}(t,e,n,s),d=u[0],h=u[u.length-1],p=Jc(e,d),f=Jc(e,h);yu(p===f,"You are trying to animate ".concat(e,' from "').concat(d,'" to "').concat(h,'". ').concat(d," is not an animatable value - to enable this animation set ").concat(d," to a value animatable to ").concat(h," via the `style` property."));let m=c(c({keyframes:u,velocity:t.getVelocity(),ease:"easeOut"},s),{},{delay:-l,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}});if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:u,from:c,elapsed:d}=e,h=o(e,rd);return!!Object.keys(h).length}(s)||(m=c(c({},m),Wc(e,m))),m.duration&&(m.duration=wu(m.duration)),m.repeatDelay&&(m.repeatDelay=wu(m.repeatDelay)),!p||!f||xu||!1===s.type||od)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:i}=e;const o=()=>(r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Ul,pause:Ul,stop:Ul,then:e=>(e(),Promise.resolve()),cancel:Ul,complete:Ul});return n?Uc({keyframes:[0,1],duration:0,delay:n,onComplete:o}):o()}(xu?c(c({},m),{},{delay:0}):m);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=qc(t,e,m);if(n)return n}return Uc(m)}};function ad(e){return Boolean(La(e)&&e.add)}const ld=e=>/^\-?\d*\.?\d+$/.test(e);function ud(e,t){-1===e.indexOf(t)&&e.push(t)}function cd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class dd{constructor(){this.subscriptions=[]}add(e){return ud(this.subscriptions,e),()=>cd(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hd={current:void 0};class pd{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:i}=zl;t.lastUpdated!==i&&(t.timeDelta=r,t.lastUpdated=i,Vl.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>Vl.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new dd);const n=this.events[e].add(t);return"change"===e?()=>{n(),Vl.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return hd.current&&hd.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?xc(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fd(e,t){return new pd(e,t)}const md=e=>t=>t.test(e),gd=[Ga,nl,tl,el,il,rl,{test:e=>"auto"===e,parse:e=>e}],vd=e=>gd.find(md(e)),yd=[...gd,Yu,cc],bd=e=>yd.find(md(e)),wd=["transitionEnd","transition"];function _d(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fd(n))}function xd(e,t){const n=vu(e,t);let r=n?e.makeTargetAnimatable(n,!1):{},{transitionEnd:i={},transition:s={}}=r,a=o(r,wd);a=c(c({},a),i);for(const o in a){_d(e,o,Nl(a[o]))}}function Sd(e,t){if(!t)return;return(t[e]||t.default||t).from}const Ed=["transition","transitionEnd"];function Td(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function Cd(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function kd(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e.makeTargetAnimatable(t),{transition:a=e.getDefaultTransition(),transitionEnd:l}=s,u=o(s,Ed);const d=e.getValue("willChange");r&&(a=r);const h=[],p=i&&e.animationState&&e.animationState.getState()[i];for(const o in u){const t=e.getValue(o),r=u[o];if(!t||void 0===r||p&&Td(p,o))continue;const i=c({delay:n,elapsed:0},id(a||{},o));if(window.HandoffAppearAnimations){const n=e.getProps()[pa];if(n){const e=window.HandoffAppearAnimations(n,o,t,Vl);null!==e&&(i.elapsed=e,i.isHandoff=!0)}}let s=!i.isHandoff&&!Cd(t,r);if("spring"===i.type&&(t.getVelocity()||i.velocity)&&(s=!1),t.animation&&(s=!1),s)continue;t.start(sd(o,t,r,e.shouldReduceMotion&&Da.has(o)?{type:!1}:i));const l=t.animation;ad(d)&&(d.add(o),l.then(()=>d.remove(o))),h.push(l)}return l&&Promise.all(h).then(()=>{l&&xd(e,l)}),h}function Ad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=vu(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(kd(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:o=0,staggerChildren:s,staggerDirection:a}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const s=[],a=(e.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(Od).forEach((e,r)=>{e.notify("AnimationStart",t),s.push(Ad(e,t,c(c({},o),{},{delay:n+l(r)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(s)}(e,t,o+r,s,a,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[e,t]="beforeChildren"===a?[o,s]:[s,o];return e().then(()=>t())}return Promise.all([o(),s(n.delay)])}function Od(e,t){return e.sortNodePosition(t)}const Id=["transition","transitionEnd"],Pd=[...va].reverse(),Rd=va.length;function Nd(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>Ad(e,t,r));n=Promise.all(i)}else if("string"===typeof t)n=Ad(e,t,r);else{const i="function"===typeof t?vu(e,t,r.custom):t;n=Promise.all(kd(e,i,r))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,r)}))}function Md(e){let t=Nd(e);const n={animate:jd(!0),whileInView:jd(),whileHover:jd(),whileTap:jd(),whileDrag:jd(),whileFocus:jd(),exit:jd()};let r=!0;const i=(t,n)=>{const r=vu(e,n);if(r){const{transition:e,transitionEnd:n}=r,i=o(r,Id);t=c(c(c({},t),i),n)}return t};function s(o,s){const a=e.getProps(),l=e.getVariantContext(!0)||{},u=[],d=new Set;let h={},p=1/0;for(let t=0;t<Rd;t++){const f=Pd[t],m=n[f],g=void 0!==a[f]?a[f]:l[f],v=ma(g),y=f===s?m.isActive:null;!1===y&&(p=t);let b=g===l[f]&&g!==a[f]&&v;if(b&&r&&e.manuallyAnimateOnMount&&(b=!1),m.protectedKeys=c({},h),!m.isActive&&null===y||!g&&!m.prevProp||ga(g)||"boolean"===typeof g)continue;let w=Dd(m.prevProp,g)||f===s&&m.isActive&&!b&&v||t>p&&v,_=!1;const x=Array.isArray(g)?g:[g];let S=x.reduce(i,{});!1===y&&(S={});const{prevResolvedValues:E={}}=m,T=c(c({},E),S),C=e=>{w=!0,d.has(e)&&(_=!0,d.delete(e)),m.needsAnimating[e]=!0};for(const e in T){const t=S[e],n=E[e];if(h.hasOwnProperty(e))continue;let r=!1;r=Rl(t)&&Rl(n)?!gu(t,n):t!==n,r?void 0!==t?C(e):d.add(e):void 0!==t&&d.has(e)?C(e):m.protectedKeys[e]=!0}m.prevProp=g,m.prevResolvedValues=S,m.isActive&&(h=c(c({},h),S)),r&&e.blockInitialAnimation&&(w=!1),!w||b&&!_||u.push(...x.map(e=>({animation:e,options:c({type:f},o)})))}if(d.size){const t={};d.forEach(n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)}),u.push({animation:t})}let f=Boolean(u.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(u):Promise.resolve()}return{animateChanges:s,setActive:function(t,r,i){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const a=s(i,t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function Dd(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!gu(t,e)}function jd(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Ld=0;const Ud={animation:{Feature:class extends iu{constructor(e){super(e),e.animationState||(e.animationState=Md(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ga(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends iu{constructor(){super(...arguments),this.id=Ld++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},Fd=(e,t)=>Math.abs(e-t);class Bd{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=zd(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Fd(e.x,t.x),r=Fd(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=zl;this.history.push(c(c({},r),{},{timestamp:i}));const{onStart:o,onMove:s}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Vd(t,this.transformPagePoint),Vl.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=zd("pointercancel"===e.type?this.lastMoveEventInfo:Vd(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),r&&r(e,o)},!Kl(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const o=Vd(Yl(e),this.transformPagePoint),{point:s}=o,{timestamp:a}=zl;this.history=[c(c({},s),{},{timestamp:a})];const{onSessionStart:l}=t;l&&l(e,zd(o,this.history)),this.removeListeners=Ql(Xl(this.contextWindow,"pointermove",this.handlePointerMove),Xl(this.contextWindow,"pointerup",this.handlePointerUp),Xl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ql(this.updatePoint)}}function Vd(e,t){return t?{point:t(e.point)}:e}function qd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function zd(e,t){let{point:n}=e;return{point:n,delta:qd(n,Gd(t)),offset:qd(n,Hd(t)),velocity:Wd(t,.1)}}function Hd(e){return e[0]}function Gd(e){return e[e.length-1]}function Wd(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Gd(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>wu(t)));)n--;if(!r)return{x:0,y:0};const o=_u(i.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Jd(e){return e.max-e.min}function Kd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function Yd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Xu(t.min,t.max,e.origin),e.scale=Jd(n)/Jd(t),(Kd(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Xu(n.min,n.max,e.origin)-e.originPoint,(Kd(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Xd(e,t,n,r){Yd(e.x,t.x,n.x,r?r.originX:void 0),Yd(e.y,t.y,n.y,r?r.originY:void 0)}function $d(e,t,n){e.min=n.min+t.min,e.max=e.min+Jd(t)}function Qd(e,t,n){e.min=t.min-n.min,e.max=e.min+Jd(t)}function Zd(e,t,n){Qd(e.x,t.x,n.x),Qd(e.y,t.y,n.y)}function eh(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function th(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const nh=.35;function rh(e,t,n){return{min:ih(e,t),max:ih(e,n)}}function ih(e,t){return"number"===typeof e?e:e[t]||0}const oh=()=>({x:{min:0,max:0},y:{min:0,max:0}});function sh(e){return[e("x"),e("y")]}function ah(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function lh(e){return void 0===e||1===e}function uh(e){let{scale:t,scaleX:n,scaleY:r}=e;return!lh(t)||!lh(n)||!lh(r)}function ch(e){return uh(e)||dh(e)||e.z||e.rotate||e.rotateX||e.rotateY}function dh(e){return hh(e.x)||hh(e.y)}function hh(e){return e&&"0%"!==e}function ph(e,t,n){return n+t*(e-n)}function fh(e,t,n,r,i){return void 0!==i&&(e=ph(e,i,r)),ph(e,n,r)+t}function mh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=fh(e.min,t,n,r,i),e.max=fh(e.max,t,n,r,i)}function gh(e,t){let{x:n,y:r}=t;mh(e.x,n.translate,n.scale,n.originPoint),mh(e.y,r.translate,r.scale,r.originPoint)}function vh(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function yh(e,t){e.min=e.min+t,e.max=e.max+t}function bh(e,t,n){let[r,i,o]=n;const s=void 0!==t[o]?t[o]:.5,a=Xu(e.min,e.max,s);mh(e,t[r],t[i],a,t.scale)}const wh=["x","scaleX","originX"],_h=["y","scaleY","originY"];function xh(e,t){bh(e.x,t,wh),bh(e.y,t,_h)}function Sh(e,t){return ah(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Eh=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Th=new WeakMap;class Ch{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Bd(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Yl(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=nu(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sh(e=>{let t=this.getAxisMotionValue(e).get()||0;if(tl.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Jd(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&Vl.update(()=>i(e,t),!1,!0);const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:s}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>sh(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:Eh(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Vl.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!kh(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?Xu(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?Xu(i,e,n.max):Math.min(e,i)),e}(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&fa(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:o}=t;return{x:eh(e.x,r,o),y:eh(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nh;return!1===e?e=0:!0===e&&(e=nh),{x:rh(e,"left","right"),y:rh(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sh(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!fa(e))return!1;const n=e.current;bu(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=Sh(e,n),{scroll:i}=t;return i&&(yh(r.x,i.offset.x),yh(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:th(e.x,t.x),y:th(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=ah(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},l=sh(s=>{if(!kh(s,t,this.currentDirection))return;let l=a&&a[s]||{};o&&(l={min:0,max:0});const u=r?200:1e6,d=r?40:1e7,h=c(c({type:"inertia",velocity:n?e[s]:0,bounceStiffness:u,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},i),l);return this.startAxisValueAnimation(s,h)});return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(sd(e,n,0,t))}stopAnimation(){sh(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sh(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){sh(t=>{const{drag:n}=this.getProps();if(!kh(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[t];i.set(e[t]-Xu(n,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!fa(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};sh(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=Jd(e),i=Jd(t);return i>r?n=gc(t.min,t.max-r,e.min):r>i&&(n=gc(e.min,e.max-i,t.min)),Ha(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),sh(t=>{if(!kh(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:o}=this.constraints[t];n.set(Xu(i,o,r[t]))})}addListeners(){if(!this.visualElement.current)return;Th.set(this.visualElement,this);const e=Xl(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();fa(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const i=Jl(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(sh(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=nh,dragMomentum:s=!0}=e;return c(c({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:s})}}function kh(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Ah=e=>(t,n)=>{e&&Vl.update(()=>e(t,n))};const Oh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ih(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ph={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!nl.test(e))return e;e=parseFloat(e)}const n=Ih(e,t.target.x),r=Ih(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Rh={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,o=cc.parse(e);if(o.length>5)return i;const s=cc.createTransformer(e),a="number"!==typeof o[0]?1:0,l=r.x.scale*n.x,u=r.y.scale*n.y;o[0+a]/=l,o[1+a]/=u;const c=Xu(l,u,.5);return"number"===typeof o[2+a]&&(o[2+a]/=c),"number"===typeof o[3+a]&&(o[3+a]/=c),s(o)}};class Nh extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var o;o=Dh,Object.assign(Na,o),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions(c(c({},i.options),{},{onExitComplete:()=>this.safeToRemove()}))),Oh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o?(o.isPresent=i,r||e.layoutDependency!==t||void 0===t?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Vl.postRender(()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Mh(e){const[t,n]=function(){const e=(0,r.useContext)(la);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,o=(0,r.useId)();return(0,r.useEffect)(()=>i(o),[]),!t&&n?[!1,()=>n&&n(o)]:[!0]}(),i=(0,r.useContext)(Ta);return r.createElement(Nh,c(c({},e),{},{layoutGroup:i,switchLayoutGroup:(0,r.useContext)(Ca),isPresent:t,safeToRemove:n}))}const Dh={borderRadius:c(c({},Ph),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Ph,borderTopRightRadius:Ph,borderBottomLeftRadius:Ph,borderBottomRightRadius:Ph,boxShadow:Rh},jh=["TopLeft","TopRight","BottomLeft","BottomRight"],Lh=jh.length,Uh=e=>"string"===typeof e?parseFloat(e):e,Fh=e=>"number"===typeof e||nl.test(e);function Bh(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Vh=zh(0,.5,ju),qh=zh(.5,.95,Ul);function zh(e,t,n){return r=>r<e?0:r>t?1:n(gc(e,t,r))}function Hh(e,t){e.min=t.min,e.max=t.max}function Gh(e,t){Hh(e.x,t.x),Hh(e.y,t.y)}function Wh(e,t,n,r,i){return e=ph(e-=t,1/n,r),void 0!==i&&(e=ph(e,1/i,r)),e}function Jh(e,t,n,r,i){let[o,s,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;tl.test(t)&&(t=parseFloat(t),t=Xu(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let a=Xu(o.min,o.max,r);e===o&&(a-=t),e.min=Wh(e.min,t,n,a,i),e.max=Wh(e.max,t,n,a,i)}(e,t[o],t[s],t[a],t.scale,r,i)}const Kh=["x","scaleX","originX"],Yh=["y","scaleY","originY"];function Xh(e,t,n,r){Jh(e.x,t,Kh,n?n.x:void 0,r?r.x:void 0),Jh(e.y,t,Yh,n?n.y:void 0,r?r.y:void 0)}function $h(e){return 0===e.translate&&1===e.scale}function Qh(e){return $h(e.x)&&$h(e.y)}function Zh(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ep(e){return Jd(e.x)/Jd(e.y)}class tp{constructor(){this.members=[]}add(e){ud(this.members,e),e.scheduleRender()}remove(e){if(cd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function np(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(r="translate3d(".concat(i,"px, ").concat(o,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:i}=n;e&&(r+="rotate(".concat(e,"deg) ")),t&&(r+="rotateX(".concat(t,"deg) ")),i&&(r+="rotateY(".concat(i,"deg) "))}const s=e.x.scale*t.x,a=e.y.scale*t.y;return 1===s&&1===a||(r+="scale(".concat(s,", ").concat(a,")")),r||"none"}const rp=(e,t)=>e.depth-t.depth;class ip{constructor(){this.children=[],this.isDirty=!1}add(e){ud(this.children,e),this.isDirty=!0}remove(e){cd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(rp),this.isDirty=!1,this.children.forEach(e)}}const op=["","X","Y","Z"],sp={visibility:"hidden"};let ap=0;const lp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function up(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=ap++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,lp.totalNodes=lp.resolvedTargetDeltas=lp.recalculatedProjection=0,this.nodes.forEach(hp),this.nodes.forEach(bp),this.nodes.forEach(wp),this.nodes.forEach(pp),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(lp)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new ip)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new dd),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:i,layout:o,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(o||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=i=>{let{timestamp:o}=i;const s=o-n;s>=t&&(ql(r),e(s-t))};return Vl.read(r,!0),()=>ql(r)}(r,250),Oh.hasAnimatedSinceResize&&(Oh.hasAnimatedSinceResize=!1,this.nodes.forEach(yp))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&s&&(i||o)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||s.getDefaultTransition()||Cp,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=s.getProps(),u=!this.targetLayout||!Zh(this.targetLayout,i)||r,d=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e=c(c({},id(o,"layout")),{},{onPlay:a,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||yp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ql(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_p),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(mp);this.isUpdating||this.nodes.forEach(gp),this.isUpdating=!1,this.nodes.forEach(vp),this.nodes.forEach(cp),this.nodes.forEach(dp),this.clearAllSnapshots();const e=performance.now();zl.delta=Ha(0,1e3/60,e-zl.timestamp),zl.timestamp=e,zl.isProcessing=!0,Hl.update.process(zl),Hl.preRender.process(zl),Hl.render.process(zl),zl.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(fp),this.sharedNodes.forEach(xp)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Vl.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Vl.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!Qh(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||ch(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),Op((r=n).x),Op(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(yh(t.x,n.offset.x),yh(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Gh(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:o}=r;if(r!==this.root&&i&&o.layoutScroll){if(i.isRoot){Gh(t,e);const{scroll:n}=this.root;n&&(yh(t.x,-n.offset.x),yh(t.y,-n.offset.y))}yh(t.x,i.offset.x),yh(t.y,i.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Gh(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&xh(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),ch(e.latestValues)&&xh(n,e.latestValues)}return ch(this.latestValues)&&xh(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Gh(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!ch(e.latestValues))continue;uh(e.latestValues)&&e.updateSnapshot();const r=oh();Gh(r,e.measurePageBox()),Xh(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return ch(this.latestValues)&&Xh(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=c(c(c({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zl.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:o}=this.options;if(this.layout&&(i||o)){if(this.resolvedRelativeTargetAt=zl.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Zd(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Gh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,a=this.relativeTarget,l=this.relativeParent.target,$d(s.x,a.x,l.x),$d(s.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Gh(this.target,this.layout.layoutBox),gh(this.target,this.targetDelta)):Gh(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Zd(this.relativeTargetOrigin,this.target,e.target),Gh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}lp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!uh(this.parent.latestValues)&&!dh(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===zl.timestamp&&(r=!1),r)return;const{layout:i,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!o)return;Gh(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let o,s;t.x=t.y=1;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const i=o.instance;i&&i.style&&"contents"===i.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&xh(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,gh(e,s)),r&&ch(o.latestValues)&&xh(e,o.latestValues))}t.x=vh(t.x),t.y=vh(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const u=this.projectionTransform;Xd(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=np(this.projectionDelta,this.treeScale),this.projectionTransform===u&&this.treeScale.x===s&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),lp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i=c({},this.latestValues),o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,d=Boolean(a&&!u&&!0===this.options.crossfade&&!this.path.some(Tp));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,c,p,f,m,g;Sp(o.x,e.x,n),Sp(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zd(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=s,g=n,Ep(p.x,f.x,m.x,g),Ep(p.y,f.y,m.y,g),h&&(l=this.relativeTarget,c=h,l.x.min===c.x.min&&l.x.max===c.x.max&&l.y.min===c.y.min&&l.y.max===c.y.max)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),Gh(h,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,o){i?(e.opacity=Xu(0,void 0!==n.opacity?n.opacity:1,Vh(r)),e.opacityExit=Xu(void 0!==t.opacity?t.opacity:1,0,qh(r))):o&&(e.opacity=Xu(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let s=0;s<Lh;s++){const i="border".concat(jh[s],"Radius");let o=Bh(t,i),a=Bh(n,i);void 0===o&&void 0===a||(o||(o=0),a||(a=0),0===o||0===a||Fh(o)===Fh(a)?(e[i]=Math.max(Xu(Uh(o),Uh(a),r),0),(tl.test(a)||tl.test(o))&&(e[i]+="%")):e[i]=a)}(t.rotate||n.rotate)&&(e.rotate=Xu(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,d,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ql(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Vl.update(()=>{Oh.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=La(e)?e:fd(e);return r.start(sd("",r,t,n)),r.animation}(0,1e3,c(c({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Ip(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Jd(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Jd(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Gh(t,n),xh(t,i),Xd(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new tp);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let i=0;i<op.length;i++){const t="rotate"+op[i];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const i in r)e.setStaticValue(i,r[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sp;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Ml(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Ml(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!ch(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const s=o.animationValues||o.latestValues;this.applyTransformsToTarget(),r.transform=np(this.projectionDeltaWithTransform,this.treeScale,s),i&&(r.transform=i(s,r.transform));const{x:a,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*a.origin,"% ").concat(100*l.origin,"% 0"),o.animationValues?r.opacity=o===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=o===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const u in Na){if(void 0===s[u])continue;const{correct:e,applyTo:t}=Na[u],n="none"===r.transform?s[u]:e(s[u],o);if(t){const e=t.length;for(let i=0;i<e;i++)r[t[i]]=n}else r[u]=n}return this.options.layoutId&&(r.pointerEvents=o===this?Ml(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(mp),this.root.sharedNodes.clear()}}}function cp(e){e.updateLayout()}function dp(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;"size"===i?sh(e=>{const r=o?n.measuredBox[e]:n.layoutBox[e],i=Jd(r);r.min=t[e].min,r.max=r.min+i}):Ip(i,n.layoutBox,t)&&sh(r=>{const i=o?n.measuredBox[r]:n.layoutBox[r],s=Jd(t[r]);i.max=i.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)});const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Xd(s,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o?Xd(a,e.applyTransform(r,!0),n.measuredBox):Xd(a,t,n.layoutBox);const l=!Qh(s);let u=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:o}=r;if(i&&o){const s={x:{min:0,max:0},y:{min:0,max:0}};Zd(s,n.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Zd(a,t,o.layoutBox),Zh(s,a)||(u=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function hp(e){lp.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function pp(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function fp(e){e.clearSnapshot()}function mp(e){e.clearMeasurements()}function gp(e){e.isLayoutDirty=!1}function vp(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function yp(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function bp(e){e.resolveTargetDelta()}function wp(e){e.calcProjection()}function _p(e){e.resetRotation()}function xp(e){e.removeLeadSnapshot()}function Sp(e,t,n){e.translate=Xu(t.translate,0,n),e.scale=Xu(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ep(e,t,n,r){e.min=Xu(t.min,n.min,r),e.max=Xu(t.max,n.max,r)}function Tp(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Cp={duration:.45,ease:[.4,0,.1,1]},kp=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),Ap=kp("applewebkit/")&&!kp("chrome/")?Math.round:Ul;function Op(e){e.min=Ap(e.min),e.max=Ap(e.max)}function Ip(e,t,n){return"position"===e||"preserve-aspect"===e&&!Kd(ep(t),ep(n),.2)}const Pp=up({attachResizeListener:(e,t)=>Jl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rp={current:void 0},Np=up({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Rp.current){const e=new Pp({});e.mount(window),e.setOptions({layoutScroll:!0}),Rp.current=e}return Rp.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Mp={pan:{Feature:class extends iu{constructor(){super(...arguments),this.removePointerDownListener=Ul}onPointerDown(e){this.session=new Bd(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Eh(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Ah(e),onStart:Ah(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Vl.update(()=>r(e,t))}}}mount(){this.removePointerDownListener=Xl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends iu{constructor(e){super(e),this.removeGroupControls=Ul,this.removeListeners=Ul,this.controls=new Ch(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ul}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Np,MeasureLayout:Mh}};const Dp=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function jp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;bu(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[r,i]=function(e){const t=Dp.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const e=o.trim();return ld(e)?parseFloat(e):e}return qa(i)?jp(i,t,n+1):i}function Lp(e,t,n){let r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};n&&(n=c({},n)),e.values.forEach(e=>{const t=e.get();if(!qa(t))return;const n=jp(t,i);n&&e.set(n)});for(const o in r){const e=r[o];if(!qa(e))continue;const t=jp(e,i);t&&(r[o]=t,n||(n={}),void 0===n[o]&&(n[o]=e))}return{target:r,transitionEnd:n}}const Up=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Fp=e=>Up.has(e),Bp=e=>e===Ga||e===nl,Vp=(e,t)=>parseFloat(e.split(", ")[t]),qp=(e,t)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/);if(o)return Vp(o[1],t);{const t=i.match(/^matrix\((.+)\)$/);return t?Vp(t[1],e):0}},zp=new Set(["x","y","z"]),Hp=Ma.filter(e=>!zp.has(e));const Gp={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:qp(4,13),y:qp(5,14)};Gp.translateX=Gp.x,Gp.translateY=Gp.y;const Wp=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=c({},t),r=c({},r);const i=Object.keys(t).filter(Fp);let o=[],s=!1;const a=[];if(i.forEach(i=>{const l=e.getValue(i);if(!e.hasValue(i))return;let u=n[i],c=vd(u);const d=t[i];let h;if(Rl(d)){const e=d.length,t=null===d[0]?1:0;u=d[t],c=vd(u);for(let n=t;n<e&&null!==d[n];n++)h?bu(vd(d[n])===h,"All keyframes must be of the same type"):(h=vd(d[n]),bu(h===c||Bp(c)&&Bp(h),"Keyframes must be of the same dimension as the current value"))}else h=vd(d);if(c!==h)if(Bp(c)&&Bp(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof d?t[i]=parseFloat(d):Array.isArray(d)&&h===nl&&(t[i]=d.map(parseFloat))}else(null===c||void 0===c?void 0:c.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===u||0===d)?0===u?l.set(h.transform(u)):t[i]=c.transform(d):(s||(o=function(e){const t=[];return Hp.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),s=!0),a.push(i),r[i]=void 0!==r[i]?r[i]:t[i],l.jump(d))}),a.length){const n=a.indexOf("height")>=0?window.pageYOffset:null,i=((e,t,n)=>{const r=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:s}=o,a={};"none"===s&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{a[e]=Gp[e](r,o)}),t.render();const l=t.measureViewportBox();return n.forEach(n=>{const r=t.getValue(n);r&&r.jump(a[n]),e[n]=Gp[n](l,o)}),e})(t,e,a);return o.length&&o.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),e.render(),ua&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:t,transitionEnd:r}};function Jp(e,t,n,r){return(e=>Object.keys(e).some(Fp))(t)?Wp(e,t,n,r):{target:t,transitionEnd:r}}const Kp={current:null},Yp={current:!1};const Xp=new WeakMap,$p=["willChange"],Qp=["children"],Zp=Object.keys(Ea),ef=Zp.length,tf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],nf=ya.length;class rf{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Vl.render(this.render,!1,!0);const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget=c({},l),this.initialValues=n.initial?c({},l):{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=ba(n),this.isVariantNode=wa(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const d=this.scrapeMotionValuesFromProps(n,{}),{willChange:h}=d,p=o(d,$p);for(const o in p){const e=p[o];void 0!==l[o]&&La(e)&&(e.set(l[o],!1),ad(h)&&h.add(o))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Xp.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Yp.current||function(){if(Yp.current=!0,ua)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Kp.current=e.matches;e.addListener(t),t()}else Kp.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Kp.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xp.delete(this.current),this.projection&&this.projection.unmount(),ql(this.notifyUpdate),ql(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=Da.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Vl.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),i()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let i,s,{children:a}=e,l=o(e,Qp);for(let o=0;o<ef;o++){const e=Zp[o],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:a}=Ea[e];r&&(i=r),t(l)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),a&&(s=a))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:o,layoutScroll:s,layoutRoot:a}=l;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||o&&fa(o),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:s,layoutRoot:a})}return s}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<tf.length;n++){const t=tf[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],s=n[i];if(La(o))e.addValue(i,o),ad(r)&&r.add(i);else if(La(s))e.addValue(i,fd(o,{owner:e})),ad(r)&&r.remove(i);else if(s!==o)if(e.hasValue(i)){const t=e.getValue(i);!t.hasAnimated&&t.set(o)}else{const t=e.getStaticValue(i);e.addValue(i,fd(void 0!==t?t:o,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<nf;t++){const n=ya[t],r=this.props[n];(ma(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=fd(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=Pl(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||La(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new dd),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}const of=["transition","transitionEnd"];class sf extends rf{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:i}=e,s=o(e,of),{transformValues:a}=t,l=function(e,t,n){const r={};for(const i in e){const e=Sd(i,t);if(void 0!==e)r[i]=e;else{const e=n.getValue(i);e&&(r[i]=e.get())}}return r}(s,r||{},this);if(a&&(i&&(i=a(i)),s&&(s=a(s)),l&&(l=a(l))),n){!function(e,t,n){var r,i;const o=Object.keys(t).filter(t=>!e.hasValue(t)),s=o.length;if(s)for(let a=0;a<s;a++){const s=o[a],l=t[s];let u=null;Array.isArray(l)&&(u=l[0]),null===u&&(u=null!==(i=null!==(r=n[s])&&void 0!==r?r:e.readValue(s))&&void 0!==i?i:t[s]),void 0!==u&&null!==u&&("string"===typeof u&&(ld(u)||td(u))?u=parseFloat(u):!bd(u)&&cc.test(l)&&(u=ed(s,l)),e.addValue(s,fd(u,{owner:e})),void 0===n[s]&&(n[s]=u),null!==u&&e.setBaseTarget(s,u))}}(this,s,l);const e=((e,t,n,r)=>{const i=Lp(e,t,r);return Jp(e,t=i.target,n,r=i.transitionEnd)})(this,s,l,i);i=e.transitionEnd,s=e.target}return c({transition:r,transitionEnd:i},s)}}class af extends sf{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Da.has(t)){const e=Zc(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(Va(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Sh(e,n)}build(e,t,n,r){ll(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Ol(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;La(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,n,r){Cl(e,t,n,r)}}class lf extends sf{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Da.has(t)){const e=Zc(t);return e&&e.default||0}return t=kl.has(t)?t:ha(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return Il(e,t)}build(e,t,n,r){_l(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){Al(e,t,0,r)}mount(e){this.isSVGTag=Sl(e.tagName),super.mount(e)}}const uf=(e,t)=>Ra(e)?new lf(t,{enableHardwareAcceleration:!1}):new af(t,{enableHardwareAcceleration:!0}),cf={layout:{ProjectionNode:Np,MeasureLayout:Mh}},df=c(c(c(c({},Ud),mu),Mp),cf),hf=Ia((e,t)=>function(e,t,n,r){let{forwardMotionProps:i=!1}=t;return c(c({},Ra(e)?Gl:Wl),{},{preloadedFeatures:n,useRender:Tl(i),createVisualElement:r,Component:e})}(e,t,df,uf));const pf=e=>{let{text:t="",delay:n=200,className:i="",animateBy:o="words",direction:s="top",threshold:a=.1,rootMargin:l="0px",animationFrom:u,animationTo:c,easing:d=e=>e,onAnimationComplete:h,stepDuration:p=.35}=e;const f="words"===o?t.split(" "):t.split(""),[m,g]=(0,r.useState)(!1),v=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!v.current)return;const e=new IntersectionObserver(t=>{let[n]=t;n.isIntersecting&&(g(!0),e.unobserve(v.current))},{threshold:a,rootMargin:l});return e.observe(v.current),()=>e.disconnect()},[a,l]);const y=(0,r.useMemo)(()=>"top"===s?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[s]),b=(0,r.useMemo)(()=>[{filter:"blur(5px)",opacity:.5,y:"top"===s?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[s]),w=null!==u&&void 0!==u?u:y,_=null!==c&&void 0!==c?c:b,x=_.length+1,S=p*(x-1),E=Array.from({length:x},(e,t)=>1===x?0:t/(x-1));return(0,gn.jsx)("p",{ref:v,className:"blur-text ".concat(i," flex flex-wrap"),children:f.map((e,t)=>{const r=((e,t)=>{const n=new Set([...Object.keys(e),...t.flatMap(e=>Object.keys(e))]),r={};return n.forEach(n=>{r[n]=[e[n],...t.map(e=>e[n])]}),r})(w,_),i={duration:S,times:E,delay:t*n/1e3,ease:d};return(0,gn.jsxs)(hf.span,{initial:w,animate:m?r:w,transition:i,onAnimationComplete:t===f.length-1?h:void 0,style:{display:"inline-block",willChange:"transform, filter, opacity"},children:[" "===e?"\xa0":e,"words"===o&&t<f.length-1&&"\xa0"]},t)})})},ff=e=>{let{text:t,disabled:n=!1,speed:r=5,className:i=""}=e;const o="".concat(r,"s");return(0,gn.jsx)("div",{className:"text-[#b5b5b5a4] bg-clip-text inline-block ".concat(n?"":"animate-shine"," ").concat(i),style:{backgroundImage:"linear-gradient(120deg, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0.8) 50%, rgba(255, 255, 255, 0) 60%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",animationDuration:o,fontFamily:"Old Standard TT, serif"},children:t})},mf=e=>{let{navItems:t}=e;return(0,gn.jsxs)("div",{className:"h-screen bg-galaxy-dark relative overflow-hidden",children:[(0,gn.jsx)("div",{className:"fixed inset-0 z-0",children:(0,gn.jsx)(vn,{color:"#6b46c1",speed:.6,direction:"forward",scale:1.1,opacity:.8,mouseInteractive:!0})}),(0,gn.jsx)(oa,{logo:"",logoAlt:"",items:t,baseColor:"transparent",menuColor:"#fff",buttonBgColor:"transparent",buttonTextColor:"#fff",ease:"power3.out"}),(0,gn.jsx)("main",{className:"relative z-10 flex items-center justify-center h-screen px-6 sm:px-8 lg:px-12",children:(0,gn.jsxs)("div",{className:"text-center max-w-5xl mx-auto flex flex-col items-center justify-center w-full",children:[(0,gn.jsx)(pf,{text:"KIMI V2",className:"text-5xl sm:text-7xl md:text-9xl mb-8 sm:mb-10 text-white font-lato font-black",animateBy:"letters",delay:100,direction:"top"}),(0,gn.jsxs)("div",{className:"mb-10 sm:mb-12 leading-relaxed px-4",children:[(0,gn.jsx)("div",{className:"text-xl sm:text-2xl md:text-3xl font-lato animate-fade-in mb-4",children:(0,gn.jsx)(ff,{text:"The AI assistant that understands you better.",className:"text-xl sm:text-2xl md:text-3xl font-lato",speed:3})}),(0,gn.jsx)("div",{className:"text-lg sm:text-xl text-gray-400 animate-fade-in-delayed px-4 max-w-4xl mx-auto leading-relaxed whitespace-nowrap",children:"AI that thinks and responds like a human."})]}),(0,gn.jsx)("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-8 justify-center items-center px-4",children:(0,gn.jsx)(mt,{to:"/chat",className:"bg-gradient-to-r from-galaxy-purple to-galaxy-blue hover:from-purple-600 hover:to-blue-600 text-white font-bold py-4 sm:py-5 px-8 sm:px-10 rounded-full text-lg sm:text-xl font-lato transition-all duration-300 transform hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25 w-full sm:w-auto text-center",children:"Start Chatting"})})]})}),(0,gn.jsx)("div",{className:"absolute top-1/4 left-8 w-2 h-2 bg-galaxy-purple rounded-full opacity-60 animate-pulse"}),(0,gn.jsx)("div",{className:"absolute top-1/3 right-12 w-1 h-1 bg-galaxy-blue rounded-full opacity-40 animate-pulse delay-1000"}),(0,gn.jsx)("div",{className:"absolute bottom-1/4 left-16 w-1.5 h-1.5 bg-white rounded-full opacity-30 animate-pulse delay-2000"})]})};function gf(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return gf=function(e){this.s=e,this.n=e.next},gf.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new gf(e)}const vf={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function yf(e){4===e.length&&(e=e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t||console.warn("Unable to convert hex string ".concat(e," to rgb values")),[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255]}function bf(e){return void 0===e?[0,0,0]:3===arguments.length?arguments:isNaN(e)?"#"===e[0]?yf(e):vf[e.toLowerCase()]?yf(vf[e.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):(t=e,[((t=parseInt(t))>>16&255)/255,(t>>8&255)/255,(255&t)/255]);var t}class wf extends Array{constructor(e){return Array.isArray(e)?super(...e):super(...bf(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(bf(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}}const _f=["color","speed","amplitude","mouseReact","className"];function xf(e){let{color:t=[1,1,1],speed:n=1,amplitude:i=.1,mouseReact:s=!0,className:a=""}=e,l=o(e,_f);const u=(0,r.useRef)(null),d=(0,r.useRef)({x:.5,y:.5});return(0,r.useEffect)(()=>{if(!u.current)return;const e=u.current,r=new Dt,o=r.gl;let a;function l(){r.setSize(1*e.offsetWidth,1*e.offsetHeight),a&&(a.uniforms.uResolution.value=new wf(o.canvas.width,o.canvas.height,o.canvas.width/o.canvas.height))}o.clearColor(1,1,1,1),window.addEventListener("resize",l,!1),l();const c=new Vt(o);a=new Ht(o,{vertex:"\nattribute vec2 uv;\nattribute vec2 position;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 0, 1);\n}\n",fragment:"\nprecision highp float;\n\nuniform float uTime;\nuniform vec3 uColor;\nuniform vec3 uResolution;\nuniform vec2 uMouse;\nuniform float uAmplitude;\nuniform float uSpeed;\n\nvarying vec2 vUv;\n\nvoid main() {\n  float mr = min(uResolution.x, uResolution.y);\n  vec2 uv = (vUv.xy * 2.0 - 1.0) * uResolution.xy / mr;\n\n  uv += (uMouse - vec2(0.5)) * uAmplitude;\n\n  float d = -uTime * 0.5 * uSpeed;\n  float a = 0.0;\n  for (float i = 0.0; i < 8.0; ++i) {\n    a += cos(i - d - a * uv.x);\n    d += sin(uv.y * i + a);\n  }\n  d += uTime * 0.5 * uSpeed;\n  vec3 col = vec3(cos(uv * vec2(d, a)) * 0.6 + 0.4, cos(a + d) * 0.5 + 0.5);\n  col = cos(col * cos(vec3(d, a, 2.5)) * 0.5 + 0.5) * uColor;\n  gl_FragColor = vec4(col, 1.0);\n}\n",uniforms:{uTime:{value:0},uColor:{value:new wf(...t)},uResolution:{value:new wf(o.canvas.width,o.canvas.height,o.canvas.width/o.canvas.height)},uMouse:{value:new Float32Array([d.current.x,d.current.y])},uAmplitude:{value:i},uSpeed:{value:n}}});const h=new mn(o,{geometry:c,program:a});let p;function f(t){const n=e.getBoundingClientRect(),r=(t.clientX-n.left)/n.width,i=1-(t.clientY-n.top)/n.height;d.current={x:r,y:i},a.uniforms.uMouse.value[0]=r,a.uniforms.uMouse.value[1]=i}return p=requestAnimationFrame(function e(t){p=requestAnimationFrame(e),a.uniforms.uTime.value=.001*t,r.render({scene:h})}),e.appendChild(o.canvas),s&&document.addEventListener("mousemove",f),()=>{var t;cancelAnimationFrame(p),window.removeEventListener("resize",l),s&&document.removeEventListener("mousemove",f),e.removeChild(o.canvas),null===(t=o.getExtension("WEBGL_lose_context"))||void 0===t||t.loseContext()}},[t,n,i,s]),(0,gn.jsx)("div",c({ref:u,className:"w-full h-full ".concat(a)},l))}const Sf=e=>{let{isOpen:t,onClose:n,onAccessDenied:i}=e;const[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),[u,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),p=()=>{h(!0),c(""),setTimeout(()=>{"#KimzLOL4098"===o.trim()?(l(!0),c("")):c("Invalid invitation code. Please check and try again."),h(!1)},800)};return t?(0,gn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,gn.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:n}),(0,gn.jsxs)("div",{className:"relative z-60 bg-black/80 backdrop-blur-md border border-white/20 rounded-2xl p-4 sm:p-6 md:p-8 w-full max-w-sm sm:max-w-md shadow-2xl max-h-[90vh] overflow-y-auto scrollbar-hide",children:[(0,gn.jsxs)("div",{className:"text-left mb-6",children:[(0,gn.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-galaxy-purple to-galaxy-blue rounded-full flex items-center justify-center mb-4 shadow-lg",children:(0,gn.jsx)("span",{className:"text-white font-bold text-2xl",children:"K"})}),(0,gn.jsx)("h2",{className:"text-white font-lato font-bold text-2xl mb-2 text-left",children:"Welcome to Kimi V2!"}),(0,gn.jsx)("div",{className:"inline-block bg-orange-500/20 text-orange-300 px-3 py-1 rounded-full text-sm font-medium border border-orange-500/30",children:"\ud83d\udea7 Closed Beta"})]}),a?(0,gn.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,gn.jsx)("div",{className:"text-left mb-4",children:(0,gn.jsx)("div",{className:"inline-block bg-green-500/20 text-green-300 px-3 py-1.5 rounded-full text-sm font-medium border border-green-500/30 mb-4",children:"\u2705 Access Granted"})}),(0,gn.jsx)("p",{className:"text-gray-300 text-sm md:text-base font-lato leading-relaxed text-left",children:"Welcome to Kimi V2! You now have access to our AI-powered assistant."}),(0,gn.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:[(0,gn.jsx)("h3",{className:"text-white font-lato font-semibold text-sm mb-2 text-left",children:"What you can do:"}),(0,gn.jsxs)("ul",{className:"text-gray-300 text-sm space-y-1 font-lato text-left",children:[(0,gn.jsx)("li",{children:"\u2022 AI-powered conversations and assistance"}),(0,gn.jsx)("li",{children:"\u2022 Image generation and editing (2 edits/hour limit)"}),(0,gn.jsx)("li",{children:"\u2022 Task and memory management"}),(0,gn.jsx)("li",{children:"\u2022 Advanced AI features and tools"})]})]}),(0,gn.jsx)("div",{className:"bg-yellow-500/10 rounded-lg p-4 border border-yellow-500/30",children:(0,gn.jsxs)("p",{className:"text-yellow-300 text-sm font-lato text-left",children:[(0,gn.jsx)("span",{className:"font-semibold",children:"Beta Notice:"})," You're using an early access version. Features may change, and your feedback is valuable!"]})})]}):(0,gn.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,gn.jsx)("p",{className:"text-gray-300 text-sm md:text-base font-lato leading-relaxed text-left",children:"Kimi V2 is currently in closed beta. Please enter your invitation code to continue."}),(0,gn.jsxs)("div",{className:"space-y-3",children:[(0,gn.jsxs)("div",{children:[(0,gn.jsx)("label",{className:"block text-white font-lato font-medium text-sm mb-2",children:"Invitation Code"}),(0,gn.jsx)("input",{type:"text",value:o,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||a||p()},placeholder:"Enter your invitation code...",className:"w-full bg-white/10 border border-white/30 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-galaxy-purple focus:border-transparent font-lato text-sm transition-all duration-200",disabled:d})]}),u&&(0,gn.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:(0,gn.jsx)("p",{className:"text-red-300 text-sm font-lato text-left",children:u})})]})]}),(0,gn.jsx)("div",{className:"flex gap-3",children:a?(0,gn.jsx)("button",{onClick:()=>{n()},className:"flex-1 bg-gradient-to-r from-galaxy-purple to-galaxy-blue hover:from-purple-600 hover:to-blue-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 font-lato",children:"Get Started"}):(0,gn.jsxs)(gn.Fragment,{children:[(0,gn.jsx)("button",{onClick:()=>{i()},className:"flex-1 bg-gray-600/50 hover:bg-gray-600/70 text-gray-300 font-medium py-3 px-4 rounded-xl transition-all duration-200 font-lato",children:"Cancel"}),(0,gn.jsx)("button",{onClick:p,disabled:!o.trim()||d,className:"flex-1 bg-gradient-to-r from-galaxy-purple to-galaxy-blue hover:from-purple-600 hover:to-blue-600 disabled:from-gray-600 disabled:to-gray-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 disabled:hover:scale-100 disabled:cursor-not-allowed font-lato flex items-center justify-center gap-2",children:d?(0,gn.jsxs)(gn.Fragment,{children:[(0,gn.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Verifying..."]}):"Verify Code"})]})})]})]}):null};function Ef(e,t){this.v=e,this.k=t}function Tf(e){return new Ef(e,0)}function Cf(e){var t,n;function r(t,n){try{var o=e[t](n),s=o.value,a=s instanceof Ef;Promise.resolve(a?s.v:s).then(function(n){if(a){var l="return"===t?"return":"next";if(!s.k||n.done)return r(l,n);n=e[l](n).value}i(o.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise(function(o,s){var a={key:e,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}let kf,Af;function Of(e,t,n,r){var i,o;if(!(null===e||void 0===e?void 0:e.baseUrl)){const e={geminiUrl:kf,vertexUrl:Af};return t?null!==(i=e.vertexUrl)&&void 0!==i?i:n:null!==(o=e.geminiUrl)&&void 0!==o?o:r}return e.baseUrl}Cf.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Cf.prototype.next=function(e){return this._invoke("next",e)},Cf.prototype.throw=function(e){return this._invoke("throw",e)},Cf.prototype.return=function(e){return this._invoke("return",e)};class If{}function Pf(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return void 0!==e&&null!==e?String(e):""}throw new Error("Key '".concat(n,"' not found in valueMap."))})}function Rf(e,t,n){for(let o=0;o<t.length-1;o++){const r=t[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(!(i in e)){if(!Array.isArray(n))throw new Error("Value must be a list given an array path ".concat(r));e[i]=Array.from({length:n.length},()=>({}))}if(Array.isArray(e[i])){const r=e[i];if(Array.isArray(n))for(let e=0;e<r.length;e++){Rf(r[e],t.slice(o+1),n[e])}else for(const e of r)Rf(e,t.slice(o+1),n)}return}if(r.endsWith("[0]")){const i=r.slice(0,-3);i in e||(e[i]=[{}]);return void Rf(e[i][0],t.slice(o+1),n)}e[r]&&"object"===typeof e[r]||(e[r]={}),e=e[r]}const r=t[t.length-1],i=e[r];if(void 0!==i){if(!n||"object"===typeof n&&0===Object.keys(n).length)return;if(n===i)return;if("object"!==typeof i||"object"!==typeof n||null===i||null===n)throw new Error("Cannot set value for an existing key. Key: ".concat(r));Object.assign(i,n)}else if("_self"!==r||"object"!==typeof n||null===n||Array.isArray(n))e[r]=n;else{const t=n;Object.assign(e,t)}}function Nf(e,t){try{if(1===t.length&&"_self"===t[0])return e;for(let n=0;n<t.length;n++){if("object"!==typeof e||null===e)return;const r=t[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const r=e[i];if(!Array.isArray(r))return;return r.map(e=>Nf(e,t.slice(n+1)))}return}e=e[r]}return e}catch(n){if(n instanceof TypeError)return;throw n}}function Mf(e){if("string"!==typeof e)throw new Error("fromImageBytes must be a string");return e}function Df(e){const t={},n=Nf(e,["_self"]);return null!=n&&Rf(t,["video"],function(e){const t={},n=Nf(e,["video","uri"]);null!=n&&Rf(t,["uri"],n);const r=Nf(e,["video","encodedVideo"]);null!=r&&Rf(t,["videoBytes"],Mf(r));const i=Nf(e,["encoding"]);return null!=i&&Rf(t,["mimeType"],i),t}(n)),t}function jf(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["metadata"]);null!=r&&Rf(t,["metadata"],r);const i=Nf(e,["done"]);null!=i&&Rf(t,["done"],i);const o=Nf(e,["error"]);null!=o&&Rf(t,["error"],o);const s=Nf(e,["response","generateVideoResponse"]);return null!=s&&Rf(t,["response"],function(e){const t={},n=Nf(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Df(e))),Rf(t,["generatedVideos"],e)}const r=Nf(e,["raiMediaFilteredCount"]);null!=r&&Rf(t,["raiMediaFilteredCount"],r);const i=Nf(e,["raiMediaFilteredReasons"]);return null!=i&&Rf(t,["raiMediaFilteredReasons"],i),t}(s)),t}function Lf(e){const t={},n=Nf(e,["_self"]);return null!=n&&Rf(t,["video"],function(e){const t={},n=Nf(e,["gcsUri"]);null!=n&&Rf(t,["uri"],n);const r=Nf(e,["bytesBase64Encoded"]);null!=r&&Rf(t,["videoBytes"],Mf(r));const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(n)),t}function Uf(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["metadata"]);null!=r&&Rf(t,["metadata"],r);const i=Nf(e,["done"]);null!=i&&Rf(t,["done"],i);const o=Nf(e,["error"]);null!=o&&Rf(t,["error"],o);const s=Nf(e,["response"]);return null!=s&&Rf(t,["response"],function(e){const t={},n=Nf(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Lf(e))),Rf(t,["generatedVideos"],e)}const r=Nf(e,["raiMediaFilteredCount"]);null!=r&&Rf(t,["raiMediaFilteredCount"],r);const i=Nf(e,["raiMediaFilteredReasons"]);return null!=i&&Rf(t,["raiMediaFilteredReasons"],i),t}(s)),t}var Ff,Bf,Vf,qf,zf,Hf,Gf,Wf,Jf,Kf,Yf,Xf,$f,Qf,Zf,em,tm,nm,rm,im,om,sm,am,lm,um,cm,dm,hm,pm,fm,mm,gm,vm,ym,bm,wm,_m,xm,Sm,Em,Tm,Cm,km,Am,Om,Im,Pm;!function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(Ff||(Ff={})),function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"}(Bf||(Bf={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"}(Vf||(Vf={})),function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"}(qf||(qf={})),function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"}(zf||(zf={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"}(Hf||(Hf={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(Gf||(Gf={})),function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"}(Wf||(Wf={})),function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"}(Jf||(Jf={})),function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(Kf||(Kf={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"}(Yf||(Yf={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(Xf||(Xf={})),function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}($f||($f={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY"}(Qf||(Qf={})),function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(Zf||(Zf={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"}(em||(em={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(tm||(tm={})),function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(nm||(nm={})),function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(rm||(rm={})),function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(im||(im={})),function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"}(om||(om={})),function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"}(sm||(sm={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(am||(am={})),function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}(lm||(lm={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"}(um||(um={})),function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(cm||(cm={})),function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"}(dm||(dm={})),function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"}(hm||(hm={})),function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(pm||(pm={})),function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(fm||(fm={})),function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(mm||(mm={})),function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(gm||(gm={})),function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"}(vm||(vm={})),function(e){e.ASSET="ASSET",e.STYLE="STYLE"}(ym||(ym={})),function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"}(bm||(bm={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"}(wm||(wm={})),function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"}(_m||(_m={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"}(xm||(xm={})),function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(Sm||(Sm={})),function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(Em||(Em={})),function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"}(Tm||(Tm={})),function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(Cm||(Cm={})),function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"}(km||(km={})),function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(Am||(Am={})),function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"}(Om||(Om={})),function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"}(Im||(Im={}));class Rm{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Nm{get text(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",u=!1;const c=[];for(const d of null!==(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(d))"text"===e||"thought"===e||null===t&&void 0===t||c.push(e);if("string"===typeof d.text){if("boolean"===typeof d.thought&&d.thought)continue;u=!0,l+=d.text}}return c.length>0&&console.warn("there are non-text parts ".concat(c," in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.")),u?l:void 0}get data(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const u=[];for(const c of null!==(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(c))"inlineData"===e||null===t&&void 0===t||u.push(e);c.inlineData&&"string"===typeof c.inlineData.data&&(l+=atob(c.inlineData.data))}return u.length>0&&console.warn("there are non-data parts ".concat(u," in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.")),l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,r,i,o,s,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);return 0!==(null===l||void 0===l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,r,i,o,s,a,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);return 0!==(null===u||void 0===u?void 0:u.length)?null===(l=null===u||void 0===u?void 0:u[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,r,i,o,s,a,l;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=null===(a=null===(s=null===(o=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===o?void 0:o.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);return 0!==(null===u||void 0===u?void 0:u.length)?null===(l=null===u||void 0===u?void 0:u[0])||void 0===l?void 0:l.output:void 0}}class Mm{}class Dm{}class jm{}class Lm{}class Um{}class Fm{}class Bm{}class Vm{}class qm{}class zm{}class Hm{_fromAPIResponse(e){let{apiResponse:t,isVertexAI:n}=e;const r=new Hm;let i;const o=t;return i=n?Uf(o):jf(o),Object.assign(r,i),r}}class Gm{}class Wm{}class Jm{}class Km{}class Ym{}class Xm{}class $m{}class Qm{get text(){var e,t,n;let r="",i=!1;const o=[];for(const s of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(s))"text"!==e&&"thought"!==e&&null!==t&&o.push(e);if("string"===typeof s.text){if("boolean"===typeof s.thought&&s.thought)continue;i=!0,r+=s.text}}return o.length>0&&console.warn("there are non-text parts ".concat(o," in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.")),i?r:void 0}get data(){var e,t,n;let r="";const i=[];for(const o of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(o))"inlineData"!==e&&null!==t&&i.push(e);o.inlineData&&"string"===typeof o.inlineData.data&&(r+=atob(o.inlineData.data))}return i.length>0&&console.warn("there are non-data parts ".concat(i," in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.")),r.length>0?btoa(r):void 0}}class Zm{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}function eg(e,t){if(!t||"string"!==typeof t)throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return"publishers/".concat(e[0],"/models/").concat(e[1])}return"publishers/google/models/".concat(t)}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:"models/".concat(t)}function tg(e,t){const n=eg(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(n):n.startsWith("models/")&&e.isVertexAI()?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/publishers/google/").concat(n):n:""}function ng(e){return Array.isArray(e)?e.map(e=>rg(e)):[rg(e)]}function rg(e){if("object"===typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: ".concat(typeof e))}function ig(e){const t=rg(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error("Unsupported mime type: ".concat(t.mimeType))}function og(e){const t=rg(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error("Unsupported mime type: ".concat(t.mimeType))}function sg(e){if(null===e||void 0===e)throw new Error("PartUnion is required");if("object"===typeof e)return e;if("string"===typeof e)return{text:e};throw new Error("Unsupported part type: ".concat(typeof e))}function ag(e){if(null===e||void 0===e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>sg(e)):[sg(e)]}function lg(e){return null!==e&&void 0!==e&&"object"===typeof e&&"parts"in e&&Array.isArray(e.parts)}function ug(e){return null!==e&&void 0!==e&&"object"===typeof e&&"functionCall"in e}function cg(e){return null!==e&&void 0!==e&&"object"===typeof e&&"functionResponse"in e}function dg(e){if(null===e||void 0===e)throw new Error("ContentUnion is required");return lg(e)?e:{role:"user",parts:ag(e)}}function hg(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const t=dg(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){const e=dg(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>dg(e)):[dg(t)]}function pg(e){if(null===e||void 0===e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(ug(e)||cg(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dg(e)]}const t=[],n=[],r=lg(e[0]);for(const i of e){const e=lg(i);if(e!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(i);else{if(ug(i)||cg(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||t.push({role:"user",parts:ag(n)}),t}function fg(e){const t={},n=["items"],r=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;null!=o&&2==o.length&&("null"===o[0].type?(t.nullable=!0,e=o[1]):"null"===o[1].type&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(e=>"null"!==e);if(1===n.length)t.type=Object.values(Vf).includes(n[0].toUpperCase())?n[0].toUpperCase():Vf.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(Vf).includes(e.toUpperCase())?e.toUpperCase():Vf.TYPE_UNSPECIFIED})}}(e.type,t);for(const[s,a]of Object.entries(e))if(null!=a)if("type"==s){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(Vf).includes(a.toUpperCase())?a.toUpperCase():Vf.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=fg(a);else if(r.includes(s)){const e=[];for(const n of a)"null"!=n.type?e.push(fg(n)):t.nullable=!0;t[s]=e}else if(i.includes(s)){const e={};for(const[t,n]of Object.entries(a))e[t]=fg(n);t[s]=e}else{if("additionalProperties"===s)continue;t[s]=a}return t}function mg(e){return fg(e)}function gg(e){if("object"===typeof e)return e;if("string"===typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: ".concat(typeof e))}function vg(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function yg(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=fg(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=fg(t.response));return e}function bg(e){if(void 0===e||null===e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function wg(e,t){if("string"!==typeof t)throw new Error("name must be a string");return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=!t.startsWith("".concat(n,"/"))&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?"projects/".concat(e.getProject(),"/").concat(t):t.startsWith("".concat(n,"/"))?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(t):i?"projects/".concat(e.getProject(),"/locations/").concat(e.getLocation(),"/").concat(n,"/").concat(t):t:i?"".concat(n,"/").concat(t):t}(e,t,"cachedContents")}function _g(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function xg(e){return Mf(e)}function Sg(e){var t;let n;var r;if(null!==(r=e)&&void 0!==r&&"object"===typeof r&&"name"in r&&(n=e.name),(!function(e){return null!==e&&void 0!==e&&"object"===typeof e&&"uri"in e}(e)||(n=e.uri,void 0!==n))&&(!function(e){return null!==e&&void 0!==e&&"object"===typeof e&&"video"in e}(e)||(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0!==n))){if("string"===typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error("Could not extract file name from URI ".concat(n));n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Eg(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function Tg(e){for(const t of["models","tunedModels","publisherModels"])if(Cg(e,t))return e[t];return[]}function Cg(e,t){return null!==e&&"object"===typeof e&&t in e}function kg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior);return{functionDeclarations:[r]}}function Ag(e,t){let n;if("string"===typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error("Unsupported string source for Vertex AI: ".concat(t));n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error("Unsupported string source for Gemini API: ".concat(t));n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||1!==r)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||1!==i)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Og(e){if("object"!==typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!==typeof n||null===n)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||0===r.length)return e;let i=!1;for(const o of r){if("object"!==typeof o||null===o)continue;const e=o.response;if("object"!==typeof e||null===e)continue;if(void 0!==e.embedding){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Ig(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error("Invalid batch job name: ".concat(n,"."))}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error("Invalid batch job name: ".concat(n,"."))}function Pg(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":e}function Rg(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["fileUri"]);null!=n&&Rf(t,["fileUri"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function Ng(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Rg(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}function Mg(e){const t={},n=Nf(e,["timeRangeFilter"]);if(null!=n&&Rf(t,["timeRangeFilter"],function(e){const t={},n=Nf(e,["startTime"]);null!=n&&Rf(t,["startTime"],n);const r=Nf(e,["endTime"]);return null!=r&&Rf(t,["endTime"],r),t}(n)),void 0!==Nf(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function Dg(e){const t={},n=Nf(e,["dynamicRetrievalConfig"]);return null!=n&&Rf(t,["dynamicRetrievalConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["dynamicThreshold"]);return null!=r&&Rf(t,["dynamicThreshold"],r),t}(n)),t}function jg(e){const t={},n=Nf(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["behavior"]);null!=n&&Rf(t,["behavior"],n);const r=Nf(e,["description"]);null!=r&&Rf(t,["description"],r);const i=Nf(e,["name"]);null!=i&&Rf(t,["name"],i);const o=Nf(e,["parameters"]);null!=o&&Rf(t,["parameters"],o);const s=Nf(e,["parametersJsonSchema"]);null!=s&&Rf(t,["parametersJsonSchema"],s);const a=Nf(e,["response"]);null!=a&&Rf(t,["response"],a);const l=Nf(e,["responseJsonSchema"]);return null!=l&&Rf(t,["responseJsonSchema"],l),t}(e))),Rf(t,["functionDeclarations"],e)}if(void 0!==Nf(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=Nf(e,["googleSearch"]);null!=r&&Rf(t,["googleSearch"],Mg(r));const i=Nf(e,["googleSearchRetrieval"]);if(null!=i&&Rf(t,["googleSearchRetrieval"],Dg(i)),void 0!==Nf(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Nf(e,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Nf(e,["urlContext"])&&Rf(t,["urlContext"],{});const o=Nf(e,["computerUse"]);null!=o&&Rf(t,["computerUse"],function(e){const t={},n=Nf(e,["environment"]);return null!=n&&Rf(t,["environment"],n),t}(o));const s=Nf(e,["codeExecution"]);return null!=s&&Rf(t,["codeExecution"],s),t}function Lg(e){const t={},n=Nf(e,["latLng"]);null!=n&&Rf(t,["latLng"],function(e){const t={},n=Nf(e,["latitude"]);null!=n&&Rf(t,["latitude"],n);const r=Nf(e,["longitude"]);return null!=r&&Rf(t,["longitude"],r),t}(n));const r=Nf(e,["languageCode"]);return null!=r&&Rf(t,["languageCode"],r),t}function Ug(e){const t={},n=Nf(e,["functionCallingConfig"]);null!=n&&Rf(t,["functionCallingConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["allowedFunctionNames"]);return null!=r&&Rf(t,["allowedFunctionNames"],r),t}(n));const r=Nf(e,["retrievalConfig"]);return null!=r&&Rf(t,["retrievalConfig"],Lg(r)),t}function Fg(e){const t={},n=Nf(e,["prebuiltVoiceConfig"]);return null!=n&&Rf(t,["prebuiltVoiceConfig"],function(e){const t={},n=Nf(e,["voiceName"]);return null!=n&&Rf(t,["voiceName"],n),t}(n)),t}function Bg(e){const t={},n=Nf(e,["speakerVoiceConfigs"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["speaker"]);null!=n&&Rf(t,["speaker"],n);const r=Nf(e,["voiceConfig"]);return null!=r&&Rf(t,["voiceConfig"],Fg(r)),t}(e))),Rf(t,["speakerVoiceConfigs"],e)}return t}function Vg(e,t,n){const r={},i=Nf(t,["systemInstruction"]);void 0!==n&&null!=i&&Rf(n,["systemInstruction"],Ng(dg(i)));const o=Nf(t,["temperature"]);null!=o&&Rf(r,["temperature"],o);const s=Nf(t,["topP"]);null!=s&&Rf(r,["topP"],s);const a=Nf(t,["topK"]);null!=a&&Rf(r,["topK"],a);const l=Nf(t,["candidateCount"]);null!=l&&Rf(r,["candidateCount"],l);const u=Nf(t,["maxOutputTokens"]);null!=u&&Rf(r,["maxOutputTokens"],u);const c=Nf(t,["stopSequences"]);null!=c&&Rf(r,["stopSequences"],c);const d=Nf(t,["responseLogprobs"]);null!=d&&Rf(r,["responseLogprobs"],d);const h=Nf(t,["logprobs"]);null!=h&&Rf(r,["logprobs"],h);const p=Nf(t,["presencePenalty"]);null!=p&&Rf(r,["presencePenalty"],p);const f=Nf(t,["frequencyPenalty"]);null!=f&&Rf(r,["frequencyPenalty"],f);const m=Nf(t,["seed"]);null!=m&&Rf(r,["seed"],m);const g=Nf(t,["responseMimeType"]);null!=g&&Rf(r,["responseMimeType"],g);const v=Nf(t,["responseSchema"]);null!=v&&Rf(r,["responseSchema"],function(e){const t={},n=Nf(e,["anyOf"]);null!=n&&Rf(t,["anyOf"],n);const r=Nf(e,["default"]);null!=r&&Rf(t,["default"],r);const i=Nf(e,["description"]);null!=i&&Rf(t,["description"],i);const o=Nf(e,["enum"]);null!=o&&Rf(t,["enum"],o);const s=Nf(e,["example"]);null!=s&&Rf(t,["example"],s);const a=Nf(e,["format"]);null!=a&&Rf(t,["format"],a);const l=Nf(e,["items"]);null!=l&&Rf(t,["items"],l);const u=Nf(e,["maxItems"]);null!=u&&Rf(t,["maxItems"],u);const c=Nf(e,["maxLength"]);null!=c&&Rf(t,["maxLength"],c);const d=Nf(e,["maxProperties"]);null!=d&&Rf(t,["maxProperties"],d);const h=Nf(e,["maximum"]);null!=h&&Rf(t,["maximum"],h);const p=Nf(e,["minItems"]);null!=p&&Rf(t,["minItems"],p);const f=Nf(e,["minLength"]);null!=f&&Rf(t,["minLength"],f);const m=Nf(e,["minProperties"]);null!=m&&Rf(t,["minProperties"],m);const g=Nf(e,["minimum"]);null!=g&&Rf(t,["minimum"],g);const v=Nf(e,["nullable"]);null!=v&&Rf(t,["nullable"],v);const y=Nf(e,["pattern"]);null!=y&&Rf(t,["pattern"],y);const b=Nf(e,["properties"]);null!=b&&Rf(t,["properties"],b);const w=Nf(e,["propertyOrdering"]);null!=w&&Rf(t,["propertyOrdering"],w);const _=Nf(e,["required"]);null!=_&&Rf(t,["required"],_);const x=Nf(e,["title"]);null!=x&&Rf(t,["title"],x);const S=Nf(e,["type"]);return null!=S&&Rf(t,["type"],S),t}(mg(v)));const y=Nf(t,["responseJsonSchema"]);if(null!=y&&Rf(r,["responseJsonSchema"],y),void 0!==Nf(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==Nf(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=Nf(t,["safetySettings"]);if(void 0!==n&&null!=b){let e=b;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==Nf(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const n=Nf(e,["category"]);null!=n&&Rf(t,["category"],n);const r=Nf(e,["threshold"]);return null!=r&&Rf(t,["threshold"],r),t}(e))),Rf(n,["safetySettings"],e)}const w=Nf(t,["tools"]);if(void 0!==n&&null!=w){let e=bg(w);Array.isArray(e)&&(e=e.map(e=>jg(yg(e)))),Rf(n,["tools"],e)}const _=Nf(t,["toolConfig"]);if(void 0!==n&&null!=_&&Rf(n,["toolConfig"],Ug(_)),void 0!==Nf(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const x=Nf(t,["cachedContent"]);void 0!==n&&null!=x&&Rf(n,["cachedContent"],wg(e,x));const S=Nf(t,["responseModalities"]);null!=S&&Rf(r,["responseModalities"],S);const E=Nf(t,["mediaResolution"]);null!=E&&Rf(r,["mediaResolution"],E);const T=Nf(t,["speechConfig"]);if(null!=T&&Rf(r,["speechConfig"],function(e){const t={},n=Nf(e,["voiceConfig"]);null!=n&&Rf(t,["voiceConfig"],Fg(n));const r=Nf(e,["multiSpeakerVoiceConfig"]);null!=r&&Rf(t,["multiSpeakerVoiceConfig"],Bg(r));const i=Nf(e,["languageCode"]);return null!=i&&Rf(t,["languageCode"],i),t}(gg(T))),void 0!==Nf(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=Nf(t,["thinkingConfig"]);return null!=C&&Rf(r,["thinkingConfig"],function(e){const t={},n=Nf(e,["includeThoughts"]);null!=n&&Rf(t,["includeThoughts"],n);const r=Nf(e,["thinkingBudget"]);return null!=r&&Rf(t,["thinkingBudget"],r),t}(C)),r}function qg(e,t){const n={};if(void 0!==Nf(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==Nf(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==Nf(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=Nf(t,["fileName"]);null!=r&&Rf(n,["fileName"],r);const i=Nf(t,["inlinedRequests"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["request","model"],eg(e,r));const i=Nf(t,["contents"]);if(null!=i){let e=pg(i);Array.isArray(e)&&(e=e.map(e=>Ng(e))),Rf(n,["request","contents"],e)}const o=Nf(t,["config"]);return null!=o&&Rf(n,["request","generationConfig"],Vg(e,o,n)),n}(e,t))),Rf(n,["requests","requests"],t)}return n}function zg(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["src"]);null!=i&&Rf(n,["batch","inputConfig"],qg(e,Ag(e,i)));const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e,t){const n=Nf(e,["displayName"]);if(void 0!==t&&null!=n&&Rf(t,["batch","displayName"],n),void 0!==Nf(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.");return{}}(o,n)),n}function Hg(e,t){const n={},r=Nf(t,["contents"]);null!=r&&Rf(n,["requests[]","request","content"],hg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],function(e,t){const n=Nf(e,["taskType"]);void 0!==t&&null!=n&&Rf(t,["requests[]","taskType"],n);const r=Nf(e,["title"]);void 0!==t&&null!=r&&Rf(t,["requests[]","title"],r);const i=Nf(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&Rf(t,["requests[]","outputDimensionality"],i),void 0!==Nf(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==Nf(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(i,n)),n}function Gg(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["src"]);null!=i&&Rf(n,["batch","inputConfig"],function(e,t){const n={},r=Nf(t,["fileName"]);null!=r&&Rf(n,["file_name"],r);const i=Nf(t,["inlinedRequests"]);return null!=i&&Rf(n,["requests"],Hg(e,i)),n}(e,i));const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e,t){const n=Nf(e,["displayName"]);return void 0!==t&&null!=n&&Rf(t,["batch","displayName"],n),{}}(o,n)),n}function Wg(e){const t={},n=Nf(e,["config"]);return null!=n&&Rf(t,["config"],function(e,t){const n=Nf(e,["pageSize"]);void 0!==t&&null!=n&&Rf(t,["_query","pageSize"],n);const r=Nf(e,["pageToken"]);if(void 0!==t&&null!=r&&Rf(t,["_query","pageToken"],r),void 0!==Nf(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.");return{}}(n,t)),t}function Jg(e,t){const n=Nf(e,["displayName"]);void 0!==t&&null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["dest"]);return void 0!==t&&null!=r&&Rf(t,["outputConfig"],function(e){const t={},n=Nf(e,["format"]);null!=n&&Rf(t,["predictionsFormat"],n);const r=Nf(e,["gcsUri"]);null!=r&&Rf(t,["gcsDestination","outputUriPrefix"],r);const i=Nf(e,["bigqueryUri"]);if(null!=i&&Rf(t,["bigqueryDestination","outputUri"],i),void 0!==Nf(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==Nf(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==Nf(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!==typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error("Unsupported destination: ".concat(t))}(r))),{}}function Kg(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["model"],eg(e,r));const i=Nf(t,["src"]);null!=i&&Rf(n,["inputConfig"],function(e){const t={},n=Nf(e,["format"]);null!=n&&Rf(t,["instancesFormat"],n);const r=Nf(e,["gcsUri"]);null!=r&&Rf(t,["gcsSource","uris"],r);const i=Nf(e,["bigqueryUri"]);if(null!=i&&Rf(t,["bigquerySource","inputUri"],i),void 0!==Nf(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==Nf(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(Ag(e,i)));const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],Jg(o,n)),n}function Yg(e){const t={},n=Nf(e,["config"]);return null!=n&&Rf(t,["config"],function(e,t){const n=Nf(e,["pageSize"]);void 0!==t&&null!=n&&Rf(t,["_query","pageSize"],n);const r=Nf(e,["pageToken"]);void 0!==t&&null!=r&&Rf(t,["_query","pageToken"],r);const i=Nf(e,["filter"]);return void 0!==t&&null!=i&&Rf(t,["_query","filter"],i),{}}(n,t)),t}function Xg(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={},n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={},n=Nf(e,["fileUri"]);null!=n&&Rf(t,["fileUri"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function $g(e){const t={},n=Nf(e,["urlMetadata"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["retrievedUrl"]);null!=n&&Rf(t,["retrievedUrl"],n);const r=Nf(e,["urlRetrievalStatus"]);return null!=r&&Rf(t,["urlRetrievalStatus"],r),t}(e))),Rf(t,["urlMetadata"],e)}return t}function Qg(e){const t={},n=Nf(e,["content"]);null!=n&&Rf(t,["content"],function(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Xg(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}(n));const r=Nf(e,["citationMetadata"]);null!=r&&Rf(t,["citationMetadata"],function(e){const t={},n=Nf(e,["citationSources"]);return null!=n&&Rf(t,["citations"],n),t}(r));const i=Nf(e,["tokenCount"]);null!=i&&Rf(t,["tokenCount"],i);const o=Nf(e,["finishReason"]);null!=o&&Rf(t,["finishReason"],o);const s=Nf(e,["urlContextMetadata"]);null!=s&&Rf(t,["urlContextMetadata"],$g(s));const a=Nf(e,["avgLogprobs"]);null!=a&&Rf(t,["avgLogprobs"],a);const l=Nf(e,["groundingMetadata"]);null!=l&&Rf(t,["groundingMetadata"],l);const u=Nf(e,["index"]);null!=u&&Rf(t,["index"],u);const c=Nf(e,["logprobsResult"]);null!=c&&Rf(t,["logprobsResult"],c);const d=Nf(e,["safetyRatings"]);return null!=d&&Rf(t,["safetyRatings"],d),t}function Zg(e){const t={},n=Nf(e,["details"]);null!=n&&Rf(t,["details"],n);const r=Nf(e,["code"]);null!=r&&Rf(t,["code"],r);const i=Nf(e,["message"]);return null!=i&&Rf(t,["message"],i),t}function ev(e){const t={},n=Nf(e,["response"]);null!=n&&Rf(t,["response"],function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Qg(e))),Rf(t,["candidates"],e)}const i=Nf(e,["modelVersion"]);null!=i&&Rf(t,["modelVersion"],i);const o=Nf(e,["promptFeedback"]);null!=o&&Rf(t,["promptFeedback"],o);const s=Nf(e,["responseId"]);null!=s&&Rf(t,["responseId"],s);const a=Nf(e,["usageMetadata"]);return null!=a&&Rf(t,["usageMetadata"],a),t}(n));const r=Nf(e,["error"]);return null!=r&&Rf(t,["error"],Zg(r)),t}function tv(e){const t={},n=Nf(e,["embedding"]);null!=n&&Rf(t,["embedding"],function(e){const t={},n=Nf(e,["values"]);return null!=n&&Rf(t,["values"],n),t}(n));const r=Nf(e,["tokenCount"]);return null!=r&&Rf(t,["tokenCount"],r),t}function nv(e){const t={},n=Nf(e,["responsesFile"]);null!=n&&Rf(t,["fileName"],n);const r=Nf(e,["inlinedResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>ev(e))),Rf(t,["inlinedResponses"],e)}const i=Nf(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["response"]);null!=n&&Rf(t,["response"],tv(n));const r=Nf(e,["error"]);return null!=r&&Rf(t,["error"],Zg(r)),t}(e))),Rf(t,["inlinedEmbedContentResponses"],e)}return t}function rv(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["metadata","displayName"]);null!=r&&Rf(t,["displayName"],r);const i=Nf(e,["metadata","state"]);null!=i&&Rf(t,["state"],Pg(i));const o=Nf(e,["metadata","createTime"]);null!=o&&Rf(t,["createTime"],o);const s=Nf(e,["metadata","endTime"]);null!=s&&Rf(t,["endTime"],s);const a=Nf(e,["metadata","updateTime"]);null!=a&&Rf(t,["updateTime"],a);const l=Nf(e,["metadata","model"]);null!=l&&Rf(t,["model"],l);const u=Nf(e,["metadata","output"]);return null!=u&&Rf(t,["dest"],nv(Og(u))),t}function iv(e){const t={},n=Nf(e,["details"]);null!=n&&Rf(t,["details"],n);const r=Nf(e,["code"]);null!=r&&Rf(t,["code"],r);const i=Nf(e,["message"]);return null!=i&&Rf(t,["message"],i),t}function ov(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["displayName"]);null!=r&&Rf(t,["displayName"],r);const i=Nf(e,["state"]);null!=i&&Rf(t,["state"],Pg(i));const o=Nf(e,["error"]);null!=o&&Rf(t,["error"],iv(o));const s=Nf(e,["createTime"]);null!=s&&Rf(t,["createTime"],s);const a=Nf(e,["startTime"]);null!=a&&Rf(t,["startTime"],a);const l=Nf(e,["endTime"]);null!=l&&Rf(t,["endTime"],l);const u=Nf(e,["updateTime"]);null!=u&&Rf(t,["updateTime"],u);const c=Nf(e,["model"]);null!=c&&Rf(t,["model"],c);const d=Nf(e,["inputConfig"]);null!=d&&Rf(t,["src"],function(e){const t={},n=Nf(e,["instancesFormat"]);null!=n&&Rf(t,["format"],n);const r=Nf(e,["gcsSource","uris"]);null!=r&&Rf(t,["gcsUri"],r);const i=Nf(e,["bigquerySource","inputUri"]);return null!=i&&Rf(t,["bigqueryUri"],i),t}(d));const h=Nf(e,["outputConfig"]);return null!=h&&Rf(t,["dest"],function(e){const t={},n=Nf(e,["predictionsFormat"]);null!=n&&Rf(t,["format"],n);const r=Nf(e,["gcsDestination","outputUriPrefix"]);null!=r&&Rf(t,["gcsUri"],r);const i=Nf(e,["bigqueryDestination","outputUri"]);return null!=i&&Rf(t,["bigqueryUri"],i),t}(Og(h))),t}!function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"}(Pm||(Pm={}));class sv{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null===t||void 0===t?void 0:t.sdkHttpResponse,this.idxInternal=0;let o={config:{}};o=n&&0!==Object.keys(n).length?"object"===typeof n?Object.assign({},n):n:{config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=null!==(i=null===(r=o.config)||void 0===r?void 0:r.pageSize)&&void 0!==i?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}class av extends If{constructor(e){var t;super(),t=this,this.apiClient=e,this.create=async e=>{var t,n;if(this.apiClient.isVertexAI())return e.config=this.formatDestination(e.src,e.config),this.createInternal(e);const r=e.src;if(!(Array.isArray(e.src)||void 0!==r.inlinedRequests))return this.createInternal(e);const i=this.createInlinedGenerateContentRequest(e),o=i.path,s=i.body,a=zg(this.apiClient,e)._query||{};return this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()).then(e=>rv(e))},this.createEmbeddings=async e=>{var t,n;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(void 0!==e.src.inlinedRequests))return this.createEmbeddingsInternal(e);const r=this.createInlinedEmbedContentRequest(e),i=r.path,o=r.body,s=Gg(this.apiClient,e)._query||{};return this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()).then(e=>rv(e))},this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sv(Pm.PAGED_ITEM_BATCH_JOBS,e=>t.listInternal(e),await t.listInternal(e),e)}}createInlinedGenerateContentRequest(e){const t=zg(this.apiClient,e),n=Pf("{model}:batchGenerateContent",t._url),r=t.batch.inputConfig.requests,i=r.requests,o=[];for(const s of i){const e=Object.assign({},s);if(e.systemInstruction){const t=e.systemInstruction;delete e.systemInstruction;const n=e.request;n.systemInstruction=t,e.request=n}o.push(e)}return r.requests=o,delete t.config,delete t._url,delete t._query,{path:n,body:t}}createInlinedEmbedContentRequest(e){const t=Gg(this.apiClient,e),n=Pf("{model}:asyncBatchEmbedContent",t._url),r=t.batch.inputConfig.requests,i=r.requests,o=[];delete r.config;for(const s of i){const e=Object.assign({},s),t=e.request;for(const n in e)"request"!==n&&(t[n]=e[n],delete e[n]);o.push(e)}return r.requests=o,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"===typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"===typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},r=Date.now().toString();if(n.displayName||(n.displayName="genaiBatchJob_".concat(r)),void 0===n.dest){const t=this.getGcsUri(e),i=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest="".concat(t.slice(0,-6),"/dest"):n.dest="".concat(t,"_dest_").concat(r);else{if(!i)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest="".concat(i,"_dest_").concat(r)}}return n}async createInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Kg(this.apiClient,e);return s=Pf("batchPredictionJobs",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o.then(e=>ov(e))}{const t=zg(this.apiClient,e);return s=Pf("{model}:batchGenerateContent",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o.then(e=>rv(e))}}async createEmbeddingsInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Gg(this.apiClient,e);return i=Pf("{model}:asyncBatchEmbedContent",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>rv(e))}}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],Ig(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("batchPredictionJobs/{name}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o.then(e=>ov(e))}{const t=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],Ig(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("batches/{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o.then(e=>rv(e))}}async cancel(e){var t,n,r,i;let o="",s={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],Ig(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);o=Pf("batchPredictionJobs/{name}:cancel",r._url),s=r._query,delete r.config,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],Ig(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);o=Pf("batches/{name}:cancel",t._url),s=t._query,delete t.config,delete t._url,delete t._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal})}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Yg(e);return s=Pf("batchPredictionJobs",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["batchPredictionJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>ov(e))),Rf(t,["batchJobs"],e)}return t}(e),n=new $m;return Object.assign(n,t),n})}{const t=Wg(e);return s=Pf("batches",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["operations"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>rv(e))),Rf(t,["batchJobs"],e)}return t}(e),n=new $m;return Object.assign(n,t),n})}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],Ig(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("batchPredictionJobs/{name}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["name"]);null!=r&&Rf(t,["name"],r);const i=Nf(e,["done"]);null!=i&&Rf(t,["done"],i);const o=Nf(e,["error"]);return null!=o&&Rf(t,["error"],iv(o)),t}(e))}{const t=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],Ig(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("batches/{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["name"]);null!=r&&Rf(t,["name"],r);const i=Nf(e,["done"]);null!=i&&Rf(t,["done"],i);const o=Nf(e,["error"]);return null!=o&&Rf(t,["error"],Zg(o)),t}(e))}}}function lv(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["fileUri"]);null!=n&&Rf(t,["fileUri"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function uv(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>lv(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}function cv(e){const t={},n=Nf(e,["timeRangeFilter"]);if(null!=n&&Rf(t,["timeRangeFilter"],function(e){const t={},n=Nf(e,["startTime"]);null!=n&&Rf(t,["startTime"],n);const r=Nf(e,["endTime"]);return null!=r&&Rf(t,["endTime"],r),t}(n)),void 0!==Nf(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function dv(e){const t={},n=Nf(e,["dynamicRetrievalConfig"]);return null!=n&&Rf(t,["dynamicRetrievalConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["dynamicThreshold"]);return null!=r&&Rf(t,["dynamicThreshold"],r),t}(n)),t}function hv(e){const t={},n=Nf(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["behavior"]);null!=n&&Rf(t,["behavior"],n);const r=Nf(e,["description"]);null!=r&&Rf(t,["description"],r);const i=Nf(e,["name"]);null!=i&&Rf(t,["name"],i);const o=Nf(e,["parameters"]);null!=o&&Rf(t,["parameters"],o);const s=Nf(e,["parametersJsonSchema"]);null!=s&&Rf(t,["parametersJsonSchema"],s);const a=Nf(e,["response"]);null!=a&&Rf(t,["response"],a);const l=Nf(e,["responseJsonSchema"]);return null!=l&&Rf(t,["responseJsonSchema"],l),t}(e))),Rf(t,["functionDeclarations"],e)}if(void 0!==Nf(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=Nf(e,["googleSearch"]);null!=r&&Rf(t,["googleSearch"],cv(r));const i=Nf(e,["googleSearchRetrieval"]);if(null!=i&&Rf(t,["googleSearchRetrieval"],dv(i)),void 0!==Nf(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Nf(e,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Nf(e,["urlContext"])&&Rf(t,["urlContext"],{});const o=Nf(e,["computerUse"]);null!=o&&Rf(t,["computerUse"],function(e){const t={},n=Nf(e,["environment"]);return null!=n&&Rf(t,["environment"],n),t}(o));const s=Nf(e,["codeExecution"]);return null!=s&&Rf(t,["codeExecution"],s),t}function pv(e){const t={},n=Nf(e,["latLng"]);null!=n&&Rf(t,["latLng"],function(e){const t={},n=Nf(e,["latitude"]);null!=n&&Rf(t,["latitude"],n);const r=Nf(e,["longitude"]);return null!=r&&Rf(t,["longitude"],r),t}(n));const r=Nf(e,["languageCode"]);return null!=r&&Rf(t,["languageCode"],r),t}function fv(e){const t={},n=Nf(e,["functionCallingConfig"]);null!=n&&Rf(t,["functionCallingConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["allowedFunctionNames"]);return null!=r&&Rf(t,["allowedFunctionNames"],r),t}(n));const r=Nf(e,["retrievalConfig"]);return null!=r&&Rf(t,["retrievalConfig"],pv(r)),t}function mv(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["model"],tg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],function(e,t){const n=Nf(e,["ttl"]);void 0!==t&&null!=n&&Rf(t,["ttl"],n);const r=Nf(e,["expireTime"]);void 0!==t&&null!=r&&Rf(t,["expireTime"],r);const i=Nf(e,["displayName"]);void 0!==t&&null!=i&&Rf(t,["displayName"],i);const o=Nf(e,["contents"]);if(void 0!==t&&null!=o){let e=pg(o);Array.isArray(e)&&(e=e.map(e=>uv(e))),Rf(t,["contents"],e)}const s=Nf(e,["systemInstruction"]);void 0!==t&&null!=s&&Rf(t,["systemInstruction"],uv(dg(s)));const a=Nf(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>hv(e))),Rf(t,["tools"],e)}const l=Nf(e,["toolConfig"]);if(void 0!==t&&null!=l&&Rf(t,["toolConfig"],fv(l)),void 0!==Nf(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}(i,n)),n}function gv(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],wg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],function(e,t){const n=Nf(e,["ttl"]);void 0!==t&&null!=n&&Rf(t,["ttl"],n);const r=Nf(e,["expireTime"]);return void 0!==t&&null!=r&&Rf(t,["expireTime"],r),{}}(i,n)),n}function vv(e){const t={},n=Nf(e,["config"]);return null!=n&&Rf(t,["config"],function(e,t){const n=Nf(e,["pageSize"]);void 0!==t&&null!=n&&Rf(t,["_query","pageSize"],n);const r=Nf(e,["pageToken"]);return void 0!==t&&null!=r&&Rf(t,["_query","pageToken"],r),{}}(n,t)),t}function yv(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["data"]);null!=r&&Rf(t,["data"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["fileUri"]);null!=r&&Rf(t,["fileUri"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function bv(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>yv(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}function wv(e){const t={},n=Nf(e,["timeRangeFilter"]);null!=n&&Rf(t,["timeRangeFilter"],function(e){const t={},n=Nf(e,["startTime"]);null!=n&&Rf(t,["startTime"],n);const r=Nf(e,["endTime"]);return null!=r&&Rf(t,["endTime"],r),t}(n));const r=Nf(e,["excludeDomains"]);return null!=r&&Rf(t,["excludeDomains"],r),t}function _v(e){const t={},n=Nf(e,["dynamicRetrievalConfig"]);return null!=n&&Rf(t,["dynamicRetrievalConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["dynamicThreshold"]);return null!=r&&Rf(t,["dynamicThreshold"],r),t}(n)),t}function xv(e){const t={},n=Nf(e,["apiKeyConfig"]);null!=n&&Rf(t,["apiKeyConfig"],function(e){const t={},n=Nf(e,["apiKeyString"]);return null!=n&&Rf(t,["apiKeyString"],n),t}(n));const r=Nf(e,["authType"]);null!=r&&Rf(t,["authType"],r);const i=Nf(e,["googleServiceAccountConfig"]);null!=i&&Rf(t,["googleServiceAccountConfig"],i);const o=Nf(e,["httpBasicAuthConfig"]);null!=o&&Rf(t,["httpBasicAuthConfig"],o);const s=Nf(e,["oauthConfig"]);null!=s&&Rf(t,["oauthConfig"],s);const a=Nf(e,["oidcConfig"]);return null!=a&&Rf(t,["oidcConfig"],a),t}function Sv(e){const t={},n=Nf(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==Nf(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=Nf(e,["description"]);null!=n&&Rf(t,["description"],n);const r=Nf(e,["name"]);null!=r&&Rf(t,["name"],r);const i=Nf(e,["parameters"]);null!=i&&Rf(t,["parameters"],i);const o=Nf(e,["parametersJsonSchema"]);null!=o&&Rf(t,["parametersJsonSchema"],o);const s=Nf(e,["response"]);null!=s&&Rf(t,["response"],s);const a=Nf(e,["responseJsonSchema"]);return null!=a&&Rf(t,["responseJsonSchema"],a),t}(e))),Rf(t,["functionDeclarations"],e)}const r=Nf(e,["retrieval"]);null!=r&&Rf(t,["retrieval"],r);const i=Nf(e,["googleSearch"]);null!=i&&Rf(t,["googleSearch"],wv(i));const o=Nf(e,["googleSearchRetrieval"]);null!=o&&Rf(t,["googleSearchRetrieval"],_v(o));const s=Nf(e,["enterpriseWebSearch"]);null!=s&&Rf(t,["enterpriseWebSearch"],function(e){const t={},n=Nf(e,["excludeDomains"]);return null!=n&&Rf(t,["excludeDomains"],n),t}(s));const a=Nf(e,["googleMaps"]);null!=a&&Rf(t,["googleMaps"],function(e){const t={},n=Nf(e,["authConfig"]);return null!=n&&Rf(t,["authConfig"],xv(n)),t}(a));null!=Nf(e,["urlContext"])&&Rf(t,["urlContext"],{});const l=Nf(e,["computerUse"]);null!=l&&Rf(t,["computerUse"],function(e){const t={},n=Nf(e,["environment"]);return null!=n&&Rf(t,["environment"],n),t}(l));const u=Nf(e,["codeExecution"]);return null!=u&&Rf(t,["codeExecution"],u),t}function Ev(e){const t={},n=Nf(e,["latLng"]);null!=n&&Rf(t,["latLng"],function(e){const t={},n=Nf(e,["latitude"]);null!=n&&Rf(t,["latitude"],n);const r=Nf(e,["longitude"]);return null!=r&&Rf(t,["longitude"],r),t}(n));const r=Nf(e,["languageCode"]);return null!=r&&Rf(t,["languageCode"],r),t}function Tv(e){const t={},n=Nf(e,["functionCallingConfig"]);null!=n&&Rf(t,["functionCallingConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["allowedFunctionNames"]);return null!=r&&Rf(t,["allowedFunctionNames"],r),t}(n));const r=Nf(e,["retrievalConfig"]);return null!=r&&Rf(t,["retrievalConfig"],Ev(r)),t}function Cv(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["model"],tg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],function(e,t){const n=Nf(e,["ttl"]);void 0!==t&&null!=n&&Rf(t,["ttl"],n);const r=Nf(e,["expireTime"]);void 0!==t&&null!=r&&Rf(t,["expireTime"],r);const i=Nf(e,["displayName"]);void 0!==t&&null!=i&&Rf(t,["displayName"],i);const o=Nf(e,["contents"]);if(void 0!==t&&null!=o){let e=pg(o);Array.isArray(e)&&(e=e.map(e=>bv(e))),Rf(t,["contents"],e)}const s=Nf(e,["systemInstruction"]);void 0!==t&&null!=s&&Rf(t,["systemInstruction"],bv(dg(s)));const a=Nf(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>Sv(e))),Rf(t,["tools"],e)}const l=Nf(e,["toolConfig"]);void 0!==t&&null!=l&&Rf(t,["toolConfig"],Tv(l));const u=Nf(e,["kmsKeyName"]);return void 0!==t&&null!=u&&Rf(t,["encryption_spec","kmsKeyName"],u),{}}(i,n)),n}function kv(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],wg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],function(e,t){const n=Nf(e,["ttl"]);void 0!==t&&null!=n&&Rf(t,["ttl"],n);const r=Nf(e,["expireTime"]);return void 0!==t&&null!=r&&Rf(t,["expireTime"],r),{}}(i,n)),n}function Av(e){const t={},n=Nf(e,["config"]);return null!=n&&Rf(t,["config"],function(e,t){const n=Nf(e,["pageSize"]);void 0!==t&&null!=n&&Rf(t,["_query","pageSize"],n);const r=Nf(e,["pageToken"]);return void 0!==t&&null!=r&&Rf(t,["_query","pageToken"],r),{}}(n,t)),t}function Ov(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["displayName"]);null!=r&&Rf(t,["displayName"],r);const i=Nf(e,["model"]);null!=i&&Rf(t,["model"],i);const o=Nf(e,["createTime"]);null!=o&&Rf(t,["createTime"],o);const s=Nf(e,["updateTime"]);null!=s&&Rf(t,["updateTime"],s);const a=Nf(e,["expireTime"]);null!=a&&Rf(t,["expireTime"],a);const l=Nf(e,["usageMetadata"]);return null!=l&&Rf(t,["usageMetadata"],l),t}function Iv(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["displayName"]);null!=r&&Rf(t,["displayName"],r);const i=Nf(e,["model"]);null!=i&&Rf(t,["model"],i);const o=Nf(e,["createTime"]);null!=o&&Rf(t,["createTime"],o);const s=Nf(e,["updateTime"]);null!=s&&Rf(t,["updateTime"],s);const a=Nf(e,["expireTime"]);null!=a&&Rf(t,["expireTime"],a);const l=Nf(e,["usageMetadata"]);return null!=l&&Rf(t,["usageMetadata"],l),t}class Pv extends If{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sv(Pm.PAGED_ITEM_CACHED_CONTENTS,e=>t.listInternal(e),await t.listInternal(e),e)}}async create(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Cv(this.apiClient,e);return s=Pf("cachedContents",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o.then(e=>Iv(e))}{const t=mv(this.apiClient,e);return s=Pf("cachedContents",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o.then(e=>Ov(e))}}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],wg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("{name}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o.then(e=>Iv(e))}{const t=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],wg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o.then(e=>Ov(e))}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],wg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("{name}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);return null!=n&&Rf(t,["sdkHttpResponse"],n),t}(e),n=new Wm;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=Nf(t,["name"]);null!=r&&Rf(n,["_url","name"],wg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);return null!=n&&Rf(t,["sdkHttpResponse"],n),t}(e),n=new Wm;return Object.assign(n,t),n})}}async update(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=kv(this.apiClient,e);return s=Pf("{name}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o.then(e=>Iv(e))}{const t=gv(this.apiClient,e);return s=Pf("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o.then(e=>Ov(e))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Av(e);return s=Pf("cachedContents",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Iv(e))),Rf(t,["cachedContents"],e)}return t}(e),n=new Jm;return Object.assign(n,t),n})}{const t=vv(e);return s=Pf("cachedContents",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Ov(e))),Rf(t,["cachedContents"],e)}return t}(e),n=new Jm;return Object.assign(n,t),n})}}}function Rv(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nv(e){return this instanceof Nv?(this.v=e,this):new Nv(e)}function Mv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=i[e](t)).value instanceof Nv?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(nT){c(o[0][3],nT)}var n}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Dv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Rv(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}function jv(e){var t;if(void 0==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&Lv(n)}function Lv(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function Uv(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let r=0;for(;r<n;)if("user"===e[r].role)t.push(e[r]),r++;else{const i=[];let o=!0;for(;r<n&&"model"===e[r].role;)i.push(e[r]),o&&!Lv(e[r])&&(o=!1),r++;o?t.push(...i):t.pop()}return t}"function"===typeof SuppressedError&&SuppressedError;class Fv{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Bv(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Bv{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error("Role must be user or model, but got ".concat(t.role,"."))}(i)}async sendMessage(e){var t;await this.sendPromise;const n=dg(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,i;const o=await r,s=null===(t=null===(e=o.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,a=o.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let u=[];null!=a&&(u=null!==(i=a.slice(l))&&void 0!==i?i:[]);const c=s?[s]:[];this.recordHistory(n,c,u)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const n=dg(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,n)}getHistory(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Uv(this.history):this.history;return structuredClone(e)}processStreamResponse(e,t){var n,r;return Mv(this,arguments,function*(){var i,o,s,a;const l=[];try{for(var u,c=!0,d=Dv(e);!(i=(u=yield Nv(d.next())).done);c=!0){a=u.value,c=!1;const e=a;if(jv(e)){const t=null===(r=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===r?void 0:r.content;void 0!==t&&l.push(t)}yield yield Nv(e)}}catch(h){o={error:h}}finally{try{c||i||!(s=d.return)||(yield Nv(s.call(d)))}finally{if(o)throw o.error}}this.recordHistory(t,l)})}recordHistory(e,t,n){let r=[];t.length>0&&t.every(e=>void 0!==e.role)?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Uv(n)):this.history.push(e),this.history.push(...r)}}class Vv extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Vv.prototype)}}function qv(e){const t={},n=Nf(e,["config"]);return null!=n&&Rf(t,["config"],function(e,t){const n=Nf(e,["pageSize"]);void 0!==t&&null!=n&&Rf(t,["_query","pageSize"],n);const r=Nf(e,["pageToken"]);return void 0!==t&&null!=r&&Rf(t,["_query","pageToken"],r),{}}(n,t)),t}function zv(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["displayName"]);null!=r&&Rf(t,["displayName"],r);const i=Nf(e,["mimeType"]);null!=i&&Rf(t,["mimeType"],i);const o=Nf(e,["sizeBytes"]);null!=o&&Rf(t,["sizeBytes"],o);const s=Nf(e,["createTime"]);null!=s&&Rf(t,["createTime"],s);const a=Nf(e,["expirationTime"]);null!=a&&Rf(t,["expirationTime"],a);const l=Nf(e,["updateTime"]);null!=l&&Rf(t,["updateTime"],l);const u=Nf(e,["sha256Hash"]);null!=u&&Rf(t,["sha256Hash"],u);const c=Nf(e,["uri"]);null!=c&&Rf(t,["uri"],c);const d=Nf(e,["downloadUri"]);null!=d&&Rf(t,["downloadUri"],d);const h=Nf(e,["state"]);null!=h&&Rf(t,["state"],h);const p=Nf(e,["source"]);null!=p&&Rf(t,["source"],p);const f=Nf(e,["videoMetadata"]);null!=f&&Rf(t,["videoMetadata"],f);const m=Nf(e,["error"]);return null!=m&&Rf(t,["error"],function(e){const t={},n=Nf(e,["details"]);null!=n&&Rf(t,["details"],n);const r=Nf(e,["message"]);null!=r&&Rf(t,["message"],r);const i=Nf(e,["code"]);return null!=i&&Rf(t,["code"],i),t}(m)),t}function Hv(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["displayName"]);null!=r&&Rf(t,["displayName"],r);const i=Nf(e,["mimeType"]);null!=i&&Rf(t,["mimeType"],i);const o=Nf(e,["sizeBytes"]);null!=o&&Rf(t,["sizeBytes"],o);const s=Nf(e,["createTime"]);null!=s&&Rf(t,["createTime"],s);const a=Nf(e,["expirationTime"]);null!=a&&Rf(t,["expirationTime"],a);const l=Nf(e,["updateTime"]);null!=l&&Rf(t,["updateTime"],l);const u=Nf(e,["sha256Hash"]);null!=u&&Rf(t,["sha256Hash"],u);const c=Nf(e,["uri"]);null!=c&&Rf(t,["uri"],c);const d=Nf(e,["downloadUri"]);null!=d&&Rf(t,["downloadUri"],d);const h=Nf(e,["state"]);null!=h&&Rf(t,["state"],h);const p=Nf(e,["source"]);null!=p&&Rf(t,["source"],p);const f=Nf(e,["videoMetadata"]);null!=f&&Rf(t,["videoMetadata"],f);const m=Nf(e,["error"]);return null!=m&&Rf(t,["error"],function(e){const t={},n=Nf(e,["details"]);null!=n&&Rf(t,["details"],n);const r=Nf(e,["message"]);null!=r&&Rf(t,["message"],r);const i=Nf(e,["code"]);return null!=i&&Rf(t,["code"],i),t}(m)),t}class Gv extends If{constructor(e){var t;super(),t=this,this.apiClient=e,this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sv(Pm.PAGED_ITEM_FILES,e=>t.listInternal(e),await t.listInternal(e),e)}}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>Hv(e))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=qv(e);return i=Pf("files",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["files"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Hv(e))),Rf(t,["files"],e)}return t}(e),n=new Km;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=Nf(e,["file"]);null!=n&&Rf(t,["file"],zv(n));const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);return i=Pf("upload/v1beta/files",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);return null!=n&&Rf(t,["sdkHttpResponse"],n),t}(e),n=new Ym;return Object.assign(n,t),n})}}async get(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["_url","file"],Sg(n));const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);return i=Pf("files/{file}",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>Hv(e))}}async delete(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["_url","file"],Sg(n));const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);return i=Pf("files/{file}",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);return null!=n&&Rf(t,["sdkHttpResponse"],n),t}(e),n=new Xm;return Object.assign(n,t),n})}}}function Wv(e){const t={},n=Nf(e,["prebuiltVoiceConfig"]);return null!=n&&Rf(t,["prebuiltVoiceConfig"],function(e){const t={},n=Nf(e,["voiceName"]);return null!=n&&Rf(t,["voiceName"],n),t}(n)),t}function Jv(e){const t={},n=Nf(e,["speakerVoiceConfigs"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["speaker"]);null!=n&&Rf(t,["speaker"],n);const r=Nf(e,["voiceConfig"]);return null!=r&&Rf(t,["voiceConfig"],Wv(r)),t}(e))),Rf(t,["speakerVoiceConfigs"],e)}return t}function Kv(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["fileUri"]);null!=n&&Rf(t,["fileUri"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function Yv(e){const t={},n=Nf(e,["timeRangeFilter"]);if(null!=n&&Rf(t,["timeRangeFilter"],function(e){const t={},n=Nf(e,["startTime"]);null!=n&&Rf(t,["startTime"],n);const r=Nf(e,["endTime"]);return null!=r&&Rf(t,["endTime"],r),t}(n)),void 0!==Nf(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function Xv(e){const t={},n=Nf(e,["dynamicRetrievalConfig"]);return null!=n&&Rf(t,["dynamicRetrievalConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["dynamicThreshold"]);return null!=r&&Rf(t,["dynamicThreshold"],r),t}(n)),t}function $v(e){const t={},n=Nf(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["behavior"]);null!=n&&Rf(t,["behavior"],n);const r=Nf(e,["description"]);null!=r&&Rf(t,["description"],r);const i=Nf(e,["name"]);null!=i&&Rf(t,["name"],i);const o=Nf(e,["parameters"]);null!=o&&Rf(t,["parameters"],o);const s=Nf(e,["parametersJsonSchema"]);null!=s&&Rf(t,["parametersJsonSchema"],s);const a=Nf(e,["response"]);null!=a&&Rf(t,["response"],a);const l=Nf(e,["responseJsonSchema"]);return null!=l&&Rf(t,["responseJsonSchema"],l),t}(e))),Rf(t,["functionDeclarations"],e)}if(void 0!==Nf(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=Nf(e,["googleSearch"]);null!=r&&Rf(t,["googleSearch"],Yv(r));const i=Nf(e,["googleSearchRetrieval"]);if(null!=i&&Rf(t,["googleSearchRetrieval"],Xv(i)),void 0!==Nf(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Nf(e,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Nf(e,["urlContext"])&&Rf(t,["urlContext"],{});const o=Nf(e,["computerUse"]);null!=o&&Rf(t,["computerUse"],function(e){const t={},n=Nf(e,["environment"]);return null!=n&&Rf(t,["environment"],n),t}(o));const s=Nf(e,["codeExecution"]);return null!=s&&Rf(t,["codeExecution"],s),t}function Qv(e){const t={},n=Nf(e,["automaticActivityDetection"]);null!=n&&Rf(t,["automaticActivityDetection"],function(e){const t={},n=Nf(e,["disabled"]);null!=n&&Rf(t,["disabled"],n);const r=Nf(e,["startOfSpeechSensitivity"]);null!=r&&Rf(t,["startOfSpeechSensitivity"],r);const i=Nf(e,["endOfSpeechSensitivity"]);null!=i&&Rf(t,["endOfSpeechSensitivity"],i);const o=Nf(e,["prefixPaddingMs"]);null!=o&&Rf(t,["prefixPaddingMs"],o);const s=Nf(e,["silenceDurationMs"]);return null!=s&&Rf(t,["silenceDurationMs"],s),t}(n));const r=Nf(e,["activityHandling"]);null!=r&&Rf(t,["activityHandling"],r);const i=Nf(e,["turnCoverage"]);return null!=i&&Rf(t,["turnCoverage"],i),t}function Zv(e){const t={},n=Nf(e,["triggerTokens"]);null!=n&&Rf(t,["triggerTokens"],n);const r=Nf(e,["slidingWindow"]);return null!=r&&Rf(t,["slidingWindow"],function(e){const t={},n=Nf(e,["targetTokens"]);return null!=n&&Rf(t,["targetTokens"],n),t}(r)),t}function ey(e,t){const n=Nf(e,["generationConfig"]);void 0!==t&&null!=n&&Rf(t,["setup","generationConfig"],n);const r=Nf(e,["responseModalities"]);void 0!==t&&null!=r&&Rf(t,["setup","generationConfig","responseModalities"],r);const i=Nf(e,["temperature"]);void 0!==t&&null!=i&&Rf(t,["setup","generationConfig","temperature"],i);const o=Nf(e,["topP"]);void 0!==t&&null!=o&&Rf(t,["setup","generationConfig","topP"],o);const s=Nf(e,["topK"]);void 0!==t&&null!=s&&Rf(t,["setup","generationConfig","topK"],s);const a=Nf(e,["maxOutputTokens"]);void 0!==t&&null!=a&&Rf(t,["setup","generationConfig","maxOutputTokens"],a);const l=Nf(e,["mediaResolution"]);void 0!==t&&null!=l&&Rf(t,["setup","generationConfig","mediaResolution"],l);const u=Nf(e,["seed"]);void 0!==t&&null!=u&&Rf(t,["setup","generationConfig","seed"],u);const c=Nf(e,["speechConfig"]);void 0!==t&&null!=c&&Rf(t,["setup","generationConfig","speechConfig"],function(e){const t={},n=Nf(e,["voiceConfig"]);null!=n&&Rf(t,["voiceConfig"],Wv(n));const r=Nf(e,["multiSpeakerVoiceConfig"]);null!=r&&Rf(t,["multiSpeakerVoiceConfig"],Jv(r));const i=Nf(e,["languageCode"]);return null!=i&&Rf(t,["languageCode"],i),t}(vg(c)));const d=Nf(e,["enableAffectiveDialog"]);void 0!==t&&null!=d&&Rf(t,["setup","generationConfig","enableAffectiveDialog"],d);const h=Nf(e,["systemInstruction"]);void 0!==t&&null!=h&&Rf(t,["setup","systemInstruction"],function(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Kv(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}(dg(h)));const p=Nf(e,["tools"]);if(void 0!==t&&null!=p){let e=bg(p);Array.isArray(e)&&(e=e.map(e=>$v(yg(e)))),Rf(t,["setup","tools"],e)}const f=Nf(e,["sessionResumption"]);void 0!==t&&null!=f&&Rf(t,["setup","sessionResumption"],function(e){const t={},n=Nf(e,["handle"]);if(null!=n&&Rf(t,["handle"],n),void 0!==Nf(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(f));const m=Nf(e,["inputAudioTranscription"]);void 0!==t&&null!=m&&Rf(t,["setup","inputAudioTranscription"],{});const g=Nf(e,["outputAudioTranscription"]);void 0!==t&&null!=g&&Rf(t,["setup","outputAudioTranscription"],{});const v=Nf(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&Rf(t,["setup","realtimeInputConfig"],Qv(v));const y=Nf(e,["contextWindowCompression"]);void 0!==t&&null!=y&&Rf(t,["setup","contextWindowCompression"],Zv(y));const b=Nf(e,["proactivity"]);return void 0!==t&&null!=b&&Rf(t,["setup","proactivity"],function(e){const t={},n=Nf(e,["proactiveAudio"]);return null!=n&&Rf(t,["proactiveAudio"],n),t}(b)),{}}function ty(e){const t={},n=Nf(e,["media"]);null!=n&&Rf(t,["mediaChunks"],ng(n));const r=Nf(e,["audio"]);null!=r&&Rf(t,["audio"],og(r));const i=Nf(e,["audioStreamEnd"]);null!=i&&Rf(t,["audioStreamEnd"],i);const o=Nf(e,["video"]);null!=o&&Rf(t,["video"],ig(o));const s=Nf(e,["text"]);null!=s&&Rf(t,["text"],s);null!=Nf(e,["activityStart"])&&Rf(t,["activityStart"],{});return null!=Nf(e,["activityEnd"])&&Rf(t,["activityEnd"],{}),t}function ny(e){const t={},n=Nf(e,["text"]);null!=n&&Rf(t,["text"],n);const r=Nf(e,["weight"]);return null!=r&&Rf(t,["weight"],r),t}function ry(e){const t={},n=Nf(e,["temperature"]);null!=n&&Rf(t,["temperature"],n);const r=Nf(e,["topK"]);null!=r&&Rf(t,["topK"],r);const i=Nf(e,["seed"]);null!=i&&Rf(t,["seed"],i);const o=Nf(e,["guidance"]);null!=o&&Rf(t,["guidance"],o);const s=Nf(e,["bpm"]);null!=s&&Rf(t,["bpm"],s);const a=Nf(e,["density"]);null!=a&&Rf(t,["density"],a);const l=Nf(e,["brightness"]);null!=l&&Rf(t,["brightness"],l);const u=Nf(e,["scale"]);null!=u&&Rf(t,["scale"],u);const c=Nf(e,["muteBass"]);null!=c&&Rf(t,["muteBass"],c);const d=Nf(e,["muteDrums"]);null!=d&&Rf(t,["muteDrums"],d);const h=Nf(e,["onlyBassAndDrums"]);null!=h&&Rf(t,["onlyBassAndDrums"],h);const p=Nf(e,["musicGenerationMode"]);return null!=p&&Rf(t,["musicGenerationMode"],p),t}function iy(e){const t={},n=Nf(e,["model"]);return null!=n&&Rf(t,["model"],n),t}function oy(e){const t={},n=Nf(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>ny(e))),Rf(t,["weightedPrompts"],e)}return t}function sy(e){const t={},n=Nf(e,["setup"]);null!=n&&Rf(t,["setup"],iy(n));const r=Nf(e,["clientContent"]);null!=r&&Rf(t,["clientContent"],oy(r));const i=Nf(e,["musicGenerationConfig"]);null!=i&&Rf(t,["musicGenerationConfig"],ry(i));const o=Nf(e,["playbackControl"]);return null!=o&&Rf(t,["playbackControl"],o),t}function ay(e){const t={},n=Nf(e,["prebuiltVoiceConfig"]);return null!=n&&Rf(t,["prebuiltVoiceConfig"],function(e){const t={},n=Nf(e,["voiceName"]);return null!=n&&Rf(t,["voiceName"],n),t}(n)),t}function ly(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["data"]);null!=r&&Rf(t,["data"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["fileUri"]);null!=r&&Rf(t,["fileUri"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function uy(e){const t={},n=Nf(e,["timeRangeFilter"]);null!=n&&Rf(t,["timeRangeFilter"],function(e){const t={},n=Nf(e,["startTime"]);null!=n&&Rf(t,["startTime"],n);const r=Nf(e,["endTime"]);return null!=r&&Rf(t,["endTime"],r),t}(n));const r=Nf(e,["excludeDomains"]);return null!=r&&Rf(t,["excludeDomains"],r),t}function cy(e){const t={},n=Nf(e,["dynamicRetrievalConfig"]);return null!=n&&Rf(t,["dynamicRetrievalConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["dynamicThreshold"]);return null!=r&&Rf(t,["dynamicThreshold"],r),t}(n)),t}function dy(e){const t={},n=Nf(e,["apiKeyConfig"]);null!=n&&Rf(t,["apiKeyConfig"],function(e){const t={},n=Nf(e,["apiKeyString"]);return null!=n&&Rf(t,["apiKeyString"],n),t}(n));const r=Nf(e,["authType"]);null!=r&&Rf(t,["authType"],r);const i=Nf(e,["googleServiceAccountConfig"]);null!=i&&Rf(t,["googleServiceAccountConfig"],i);const o=Nf(e,["httpBasicAuthConfig"]);null!=o&&Rf(t,["httpBasicAuthConfig"],o);const s=Nf(e,["oauthConfig"]);null!=s&&Rf(t,["oauthConfig"],s);const a=Nf(e,["oidcConfig"]);return null!=a&&Rf(t,["oidcConfig"],a),t}function hy(e){const t={},n=Nf(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==Nf(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=Nf(e,["description"]);null!=n&&Rf(t,["description"],n);const r=Nf(e,["name"]);null!=r&&Rf(t,["name"],r);const i=Nf(e,["parameters"]);null!=i&&Rf(t,["parameters"],i);const o=Nf(e,["parametersJsonSchema"]);null!=o&&Rf(t,["parametersJsonSchema"],o);const s=Nf(e,["response"]);null!=s&&Rf(t,["response"],s);const a=Nf(e,["responseJsonSchema"]);return null!=a&&Rf(t,["responseJsonSchema"],a),t}(e))),Rf(t,["functionDeclarations"],e)}const r=Nf(e,["retrieval"]);null!=r&&Rf(t,["retrieval"],r);const i=Nf(e,["googleSearch"]);null!=i&&Rf(t,["googleSearch"],uy(i));const o=Nf(e,["googleSearchRetrieval"]);null!=o&&Rf(t,["googleSearchRetrieval"],cy(o));const s=Nf(e,["enterpriseWebSearch"]);null!=s&&Rf(t,["enterpriseWebSearch"],function(e){const t={},n=Nf(e,["excludeDomains"]);return null!=n&&Rf(t,["excludeDomains"],n),t}(s));const a=Nf(e,["googleMaps"]);null!=a&&Rf(t,["googleMaps"],function(e){const t={},n=Nf(e,["authConfig"]);return null!=n&&Rf(t,["authConfig"],dy(n)),t}(a));null!=Nf(e,["urlContext"])&&Rf(t,["urlContext"],{});const l=Nf(e,["computerUse"]);null!=l&&Rf(t,["computerUse"],function(e){const t={},n=Nf(e,["environment"]);return null!=n&&Rf(t,["environment"],n),t}(l));const u=Nf(e,["codeExecution"]);return null!=u&&Rf(t,["codeExecution"],u),t}function py(e){const t={},n=Nf(e,["automaticActivityDetection"]);null!=n&&Rf(t,["automaticActivityDetection"],function(e){const t={},n=Nf(e,["disabled"]);null!=n&&Rf(t,["disabled"],n);const r=Nf(e,["startOfSpeechSensitivity"]);null!=r&&Rf(t,["startOfSpeechSensitivity"],r);const i=Nf(e,["endOfSpeechSensitivity"]);null!=i&&Rf(t,["endOfSpeechSensitivity"],i);const o=Nf(e,["prefixPaddingMs"]);null!=o&&Rf(t,["prefixPaddingMs"],o);const s=Nf(e,["silenceDurationMs"]);return null!=s&&Rf(t,["silenceDurationMs"],s),t}(n));const r=Nf(e,["activityHandling"]);null!=r&&Rf(t,["activityHandling"],r);const i=Nf(e,["turnCoverage"]);return null!=i&&Rf(t,["turnCoverage"],i),t}function fy(e){const t={},n=Nf(e,["triggerTokens"]);null!=n&&Rf(t,["triggerTokens"],n);const r=Nf(e,["slidingWindow"]);return null!=r&&Rf(t,["slidingWindow"],function(e){const t={},n=Nf(e,["targetTokens"]);return null!=n&&Rf(t,["targetTokens"],n),t}(r)),t}function my(e,t){const n=Nf(e,["generationConfig"]);void 0!==t&&null!=n&&Rf(t,["setup","generationConfig"],n);const r=Nf(e,["responseModalities"]);void 0!==t&&null!=r&&Rf(t,["setup","generationConfig","responseModalities"],r);const i=Nf(e,["temperature"]);void 0!==t&&null!=i&&Rf(t,["setup","generationConfig","temperature"],i);const o=Nf(e,["topP"]);void 0!==t&&null!=o&&Rf(t,["setup","generationConfig","topP"],o);const s=Nf(e,["topK"]);void 0!==t&&null!=s&&Rf(t,["setup","generationConfig","topK"],s);const a=Nf(e,["maxOutputTokens"]);void 0!==t&&null!=a&&Rf(t,["setup","generationConfig","maxOutputTokens"],a);const l=Nf(e,["mediaResolution"]);void 0!==t&&null!=l&&Rf(t,["setup","generationConfig","mediaResolution"],l);const u=Nf(e,["seed"]);void 0!==t&&null!=u&&Rf(t,["setup","generationConfig","seed"],u);const c=Nf(e,["speechConfig"]);void 0!==t&&null!=c&&Rf(t,["setup","generationConfig","speechConfig"],function(e){const t={},n=Nf(e,["voiceConfig"]);if(null!=n&&Rf(t,["voiceConfig"],ay(n)),void 0!==Nf(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=Nf(e,["languageCode"]);return null!=r&&Rf(t,["languageCode"],r),t}(vg(c)));const d=Nf(e,["enableAffectiveDialog"]);void 0!==t&&null!=d&&Rf(t,["setup","generationConfig","enableAffectiveDialog"],d);const h=Nf(e,["systemInstruction"]);void 0!==t&&null!=h&&Rf(t,["setup","systemInstruction"],function(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>ly(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}(dg(h)));const p=Nf(e,["tools"]);if(void 0!==t&&null!=p){let e=bg(p);Array.isArray(e)&&(e=e.map(e=>hy(yg(e)))),Rf(t,["setup","tools"],e)}const f=Nf(e,["sessionResumption"]);void 0!==t&&null!=f&&Rf(t,["setup","sessionResumption"],function(e){const t={},n=Nf(e,["handle"]);null!=n&&Rf(t,["handle"],n);const r=Nf(e,["transparent"]);return null!=r&&Rf(t,["transparent"],r),t}(f));const m=Nf(e,["inputAudioTranscription"]);void 0!==t&&null!=m&&Rf(t,["setup","inputAudioTranscription"],{});const g=Nf(e,["outputAudioTranscription"]);void 0!==t&&null!=g&&Rf(t,["setup","outputAudioTranscription"],{});const v=Nf(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&Rf(t,["setup","realtimeInputConfig"],py(v));const y=Nf(e,["contextWindowCompression"]);void 0!==t&&null!=y&&Rf(t,["setup","contextWindowCompression"],fy(y));const b=Nf(e,["proactivity"]);return void 0!==t&&null!=b&&Rf(t,["setup","proactivity"],function(e){const t={},n=Nf(e,["proactiveAudio"]);return null!=n&&Rf(t,["proactiveAudio"],n),t}(b)),{}}function gy(e){const t={},n=Nf(e,["media"]);null!=n&&Rf(t,["mediaChunks"],ng(n));const r=Nf(e,["audio"]);null!=r&&Rf(t,["audio"],og(r));const i=Nf(e,["audioStreamEnd"]);null!=i&&Rf(t,["audioStreamEnd"],i);const o=Nf(e,["video"]);null!=o&&Rf(t,["video"],ig(o));const s=Nf(e,["text"]);null!=s&&Rf(t,["text"],s);null!=Nf(e,["activityStart"])&&Rf(t,["activityStart"],{});return null!=Nf(e,["activityEnd"])&&Rf(t,["activityEnd"],{}),t}function vy(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}function yy(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={},n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={},n=Nf(e,["fileUri"]);null!=n&&Rf(t,["fileUri"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],vy(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function by(e){const t={},n=Nf(e,["text"]);null!=n&&Rf(t,["text"],n);const r=Nf(e,["finished"]);return null!=r&&Rf(t,["finished"],r),t}function wy(e){const t={},n=Nf(e,["urlMetadata"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["retrievedUrl"]);null!=n&&Rf(t,["retrievedUrl"],n);const r=Nf(e,["urlRetrievalStatus"]);return null!=r&&Rf(t,["urlRetrievalStatus"],r),t}(e))),Rf(t,["urlMetadata"],e)}return t}function _y(e){const t={},n=Nf(e,["modelTurn"]);null!=n&&Rf(t,["modelTurn"],function(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>yy(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}(n));const r=Nf(e,["turnComplete"]);null!=r&&Rf(t,["turnComplete"],r);const i=Nf(e,["interrupted"]);null!=i&&Rf(t,["interrupted"],i);const o=Nf(e,["groundingMetadata"]);null!=o&&Rf(t,["groundingMetadata"],o);const s=Nf(e,["generationComplete"]);null!=s&&Rf(t,["generationComplete"],s);const a=Nf(e,["inputTranscription"]);null!=a&&Rf(t,["inputTranscription"],by(a));const l=Nf(e,["outputTranscription"]);null!=l&&Rf(t,["outputTranscription"],by(l));const u=Nf(e,["urlContextMetadata"]);return null!=u&&Rf(t,["urlContextMetadata"],wy(u)),t}function xy(e){const t={},n=Nf(e,["modality"]);null!=n&&Rf(t,["modality"],n);const r=Nf(e,["tokenCount"]);return null!=r&&Rf(t,["tokenCount"],r),t}function Sy(e){const t={};null!=Nf(e,["setupComplete"])&&Rf(t,["setupComplete"],{});const n=Nf(e,["serverContent"]);null!=n&&Rf(t,["serverContent"],_y(n));const r=Nf(e,["toolCall"]);null!=r&&Rf(t,["toolCall"],function(e){const t={},n=Nf(e,["functionCalls"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>vy(e))),Rf(t,["functionCalls"],e)}return t}(r));const i=Nf(e,["toolCallCancellation"]);null!=i&&Rf(t,["toolCallCancellation"],function(e){const t={},n=Nf(e,["ids"]);return null!=n&&Rf(t,["ids"],n),t}(i));const o=Nf(e,["usageMetadata"]);null!=o&&Rf(t,["usageMetadata"],function(e){const t={},n=Nf(e,["promptTokenCount"]);null!=n&&Rf(t,["promptTokenCount"],n);const r=Nf(e,["cachedContentTokenCount"]);null!=r&&Rf(t,["cachedContentTokenCount"],r);const i=Nf(e,["responseTokenCount"]);null!=i&&Rf(t,["responseTokenCount"],i);const o=Nf(e,["toolUsePromptTokenCount"]);null!=o&&Rf(t,["toolUsePromptTokenCount"],o);const s=Nf(e,["thoughtsTokenCount"]);null!=s&&Rf(t,["thoughtsTokenCount"],s);const a=Nf(e,["totalTokenCount"]);null!=a&&Rf(t,["totalTokenCount"],a);const l=Nf(e,["promptTokensDetails"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>xy(e))),Rf(t,["promptTokensDetails"],e)}const u=Nf(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>xy(e))),Rf(t,["cacheTokensDetails"],e)}const c=Nf(e,["responseTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>xy(e))),Rf(t,["responseTokensDetails"],e)}const d=Nf(e,["toolUsePromptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>xy(e))),Rf(t,["toolUsePromptTokensDetails"],e)}return t}(o));const s=Nf(e,["goAway"]);null!=s&&Rf(t,["goAway"],function(e){const t={},n=Nf(e,["timeLeft"]);return null!=n&&Rf(t,["timeLeft"],n),t}(s));const a=Nf(e,["sessionResumptionUpdate"]);return null!=a&&Rf(t,["sessionResumptionUpdate"],function(e){const t={},n=Nf(e,["newHandle"]);null!=n&&Rf(t,["newHandle"],n);const r=Nf(e,["resumable"]);null!=r&&Rf(t,["resumable"],r);const i=Nf(e,["lastConsumedClientMessageIndex"]);return null!=i&&Rf(t,["lastConsumedClientMessageIndex"],i),t}(a)),t}function Ey(e){const t={},n=Nf(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["text"]);null!=n&&Rf(t,["text"],n);const r=Nf(e,["weight"]);return null!=r&&Rf(t,["weight"],r),t}(e))),Rf(t,["weightedPrompts"],e)}return t}function Ty(e){const t={},n=Nf(e,["clientContent"]);null!=n&&Rf(t,["clientContent"],Ey(n));const r=Nf(e,["musicGenerationConfig"]);return null!=r&&Rf(t,["musicGenerationConfig"],function(e){const t={},n=Nf(e,["temperature"]);null!=n&&Rf(t,["temperature"],n);const r=Nf(e,["topK"]);null!=r&&Rf(t,["topK"],r);const i=Nf(e,["seed"]);null!=i&&Rf(t,["seed"],i);const o=Nf(e,["guidance"]);null!=o&&Rf(t,["guidance"],o);const s=Nf(e,["bpm"]);null!=s&&Rf(t,["bpm"],s);const a=Nf(e,["density"]);null!=a&&Rf(t,["density"],a);const l=Nf(e,["brightness"]);null!=l&&Rf(t,["brightness"],l);const u=Nf(e,["scale"]);null!=u&&Rf(t,["scale"],u);const c=Nf(e,["muteBass"]);null!=c&&Rf(t,["muteBass"],c);const d=Nf(e,["muteDrums"]);null!=d&&Rf(t,["muteDrums"],d);const h=Nf(e,["onlyBassAndDrums"]);null!=h&&Rf(t,["onlyBassAndDrums"],h);const p=Nf(e,["musicGenerationMode"]);return null!=p&&Rf(t,["musicGenerationMode"],p),t}(r)),t}function Cy(e){const t={},n=Nf(e,["audioChunks"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);null!=r&&Rf(t,["mimeType"],r);const i=Nf(e,["sourceMetadata"]);return null!=i&&Rf(t,["sourceMetadata"],Ty(i)),t}(e))),Rf(t,["audioChunks"],e)}return t}function ky(e){const t={};null!=Nf(e,["setupComplete"])&&Rf(t,["setupComplete"],{});const n=Nf(e,["serverContent"]);null!=n&&Rf(t,["serverContent"],Cy(n));const r=Nf(e,["filteredPrompt"]);return null!=r&&Rf(t,["filteredPrompt"],function(e){const t={},n=Nf(e,["text"]);null!=n&&Rf(t,["text"],n);const r=Nf(e,["filteredReason"]);return null!=r&&Rf(t,["filteredReason"],r),t}(r)),t}function Ay(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}function Oy(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["data"]);null!=r&&Rf(t,["data"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["fileUri"]);null!=r&&Rf(t,["fileUri"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],Ay(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function Iy(e){const t={},n=Nf(e,["text"]);null!=n&&Rf(t,["text"],n);const r=Nf(e,["finished"]);return null!=r&&Rf(t,["finished"],r),t}function Py(e){const t={},n=Nf(e,["modelTurn"]);null!=n&&Rf(t,["modelTurn"],function(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Oy(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}(n));const r=Nf(e,["turnComplete"]);null!=r&&Rf(t,["turnComplete"],r);const i=Nf(e,["interrupted"]);null!=i&&Rf(t,["interrupted"],i);const o=Nf(e,["groundingMetadata"]);null!=o&&Rf(t,["groundingMetadata"],o);const s=Nf(e,["generationComplete"]);null!=s&&Rf(t,["generationComplete"],s);const a=Nf(e,["inputTranscription"]);null!=a&&Rf(t,["inputTranscription"],Iy(a));const l=Nf(e,["outputTranscription"]);return null!=l&&Rf(t,["outputTranscription"],Iy(l)),t}function Ry(e){const t={},n=Nf(e,["modality"]);null!=n&&Rf(t,["modality"],n);const r=Nf(e,["tokenCount"]);return null!=r&&Rf(t,["tokenCount"],r),t}function Ny(e){const t={},n=Nf(e,["setupComplete"]);null!=n&&Rf(t,["setupComplete"],function(e){const t={},n=Nf(e,["sessionId"]);return null!=n&&Rf(t,["sessionId"],n),t}(n));const r=Nf(e,["serverContent"]);null!=r&&Rf(t,["serverContent"],Py(r));const i=Nf(e,["toolCall"]);null!=i&&Rf(t,["toolCall"],function(e){const t={},n=Nf(e,["functionCalls"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Ay(e))),Rf(t,["functionCalls"],e)}return t}(i));const o=Nf(e,["toolCallCancellation"]);null!=o&&Rf(t,["toolCallCancellation"],function(e){const t={},n=Nf(e,["ids"]);return null!=n&&Rf(t,["ids"],n),t}(o));const s=Nf(e,["usageMetadata"]);null!=s&&Rf(t,["usageMetadata"],function(e){const t={},n=Nf(e,["promptTokenCount"]);null!=n&&Rf(t,["promptTokenCount"],n);const r=Nf(e,["cachedContentTokenCount"]);null!=r&&Rf(t,["cachedContentTokenCount"],r);const i=Nf(e,["candidatesTokenCount"]);null!=i&&Rf(t,["responseTokenCount"],i);const o=Nf(e,["toolUsePromptTokenCount"]);null!=o&&Rf(t,["toolUsePromptTokenCount"],o);const s=Nf(e,["thoughtsTokenCount"]);null!=s&&Rf(t,["thoughtsTokenCount"],s);const a=Nf(e,["totalTokenCount"]);null!=a&&Rf(t,["totalTokenCount"],a);const l=Nf(e,["promptTokensDetails"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>Ry(e))),Rf(t,["promptTokensDetails"],e)}const u=Nf(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>Ry(e))),Rf(t,["cacheTokensDetails"],e)}const c=Nf(e,["candidatesTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>Ry(e))),Rf(t,["responseTokensDetails"],e)}const d=Nf(e,["toolUsePromptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>Ry(e))),Rf(t,["toolUsePromptTokensDetails"],e)}const h=Nf(e,["trafficType"]);return null!=h&&Rf(t,["trafficType"],h),t}(s));const a=Nf(e,["goAway"]);null!=a&&Rf(t,["goAway"],function(e){const t={},n=Nf(e,["timeLeft"]);return null!=n&&Rf(t,["timeLeft"],n),t}(a));const l=Nf(e,["sessionResumptionUpdate"]);return null!=l&&Rf(t,["sessionResumptionUpdate"],function(e){const t={},n=Nf(e,["newHandle"]);null!=n&&Rf(t,["newHandle"],n);const r=Nf(e,["resumable"]);null!=r&&Rf(t,["resumable"],r);const i=Nf(e,["lastConsumedClientMessageIndex"]);return null!=i&&Rf(t,["lastConsumedClientMessageIndex"],i),t}(l)),t}function My(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["fileUri"]);null!=n&&Rf(t,["fileUri"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function Dy(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>My(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}function jy(e){const t={},n=Nf(e,["timeRangeFilter"]);if(null!=n&&Rf(t,["timeRangeFilter"],function(e){const t={},n=Nf(e,["startTime"]);null!=n&&Rf(t,["startTime"],n);const r=Nf(e,["endTime"]);return null!=r&&Rf(t,["endTime"],r),t}(n)),void 0!==Nf(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function Ly(e){const t={},n=Nf(e,["dynamicRetrievalConfig"]);return null!=n&&Rf(t,["dynamicRetrievalConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["dynamicThreshold"]);return null!=r&&Rf(t,["dynamicThreshold"],r),t}(n)),t}function Uy(e){const t={},n=Nf(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["behavior"]);null!=n&&Rf(t,["behavior"],n);const r=Nf(e,["description"]);null!=r&&Rf(t,["description"],r);const i=Nf(e,["name"]);null!=i&&Rf(t,["name"],i);const o=Nf(e,["parameters"]);null!=o&&Rf(t,["parameters"],o);const s=Nf(e,["parametersJsonSchema"]);null!=s&&Rf(t,["parametersJsonSchema"],s);const a=Nf(e,["response"]);null!=a&&Rf(t,["response"],a);const l=Nf(e,["responseJsonSchema"]);return null!=l&&Rf(t,["responseJsonSchema"],l),t}(e))),Rf(t,["functionDeclarations"],e)}if(void 0!==Nf(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=Nf(e,["googleSearch"]);null!=r&&Rf(t,["googleSearch"],jy(r));const i=Nf(e,["googleSearchRetrieval"]);if(null!=i&&Rf(t,["googleSearchRetrieval"],Ly(i)),void 0!==Nf(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Nf(e,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Nf(e,["urlContext"])&&Rf(t,["urlContext"],{});const o=Nf(e,["computerUse"]);null!=o&&Rf(t,["computerUse"],function(e){const t={},n=Nf(e,["environment"]);return null!=n&&Rf(t,["environment"],n),t}(o));const s=Nf(e,["codeExecution"]);return null!=s&&Rf(t,["codeExecution"],s),t}function Fy(e){const t={},n=Nf(e,["latLng"]);null!=n&&Rf(t,["latLng"],function(e){const t={},n=Nf(e,["latitude"]);null!=n&&Rf(t,["latitude"],n);const r=Nf(e,["longitude"]);return null!=r&&Rf(t,["longitude"],r),t}(n));const r=Nf(e,["languageCode"]);return null!=r&&Rf(t,["languageCode"],r),t}function By(e){const t={},n=Nf(e,["functionCallingConfig"]);null!=n&&Rf(t,["functionCallingConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["allowedFunctionNames"]);return null!=r&&Rf(t,["allowedFunctionNames"],r),t}(n));const r=Nf(e,["retrievalConfig"]);return null!=r&&Rf(t,["retrievalConfig"],Fy(r)),t}function Vy(e){const t={},n=Nf(e,["prebuiltVoiceConfig"]);return null!=n&&Rf(t,["prebuiltVoiceConfig"],function(e){const t={},n=Nf(e,["voiceName"]);return null!=n&&Rf(t,["voiceName"],n),t}(n)),t}function qy(e){const t={},n=Nf(e,["speakerVoiceConfigs"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["speaker"]);null!=n&&Rf(t,["speaker"],n);const r=Nf(e,["voiceConfig"]);return null!=r&&Rf(t,["voiceConfig"],Vy(r)),t}(e))),Rf(t,["speakerVoiceConfigs"],e)}return t}function zy(e,t,n){const r={},i=Nf(t,["systemInstruction"]);void 0!==n&&null!=i&&Rf(n,["systemInstruction"],Dy(dg(i)));const o=Nf(t,["temperature"]);null!=o&&Rf(r,["temperature"],o);const s=Nf(t,["topP"]);null!=s&&Rf(r,["topP"],s);const a=Nf(t,["topK"]);null!=a&&Rf(r,["topK"],a);const l=Nf(t,["candidateCount"]);null!=l&&Rf(r,["candidateCount"],l);const u=Nf(t,["maxOutputTokens"]);null!=u&&Rf(r,["maxOutputTokens"],u);const c=Nf(t,["stopSequences"]);null!=c&&Rf(r,["stopSequences"],c);const d=Nf(t,["responseLogprobs"]);null!=d&&Rf(r,["responseLogprobs"],d);const h=Nf(t,["logprobs"]);null!=h&&Rf(r,["logprobs"],h);const p=Nf(t,["presencePenalty"]);null!=p&&Rf(r,["presencePenalty"],p);const f=Nf(t,["frequencyPenalty"]);null!=f&&Rf(r,["frequencyPenalty"],f);const m=Nf(t,["seed"]);null!=m&&Rf(r,["seed"],m);const g=Nf(t,["responseMimeType"]);null!=g&&Rf(r,["responseMimeType"],g);const v=Nf(t,["responseSchema"]);null!=v&&Rf(r,["responseSchema"],function(e){const t={},n=Nf(e,["anyOf"]);null!=n&&Rf(t,["anyOf"],n);const r=Nf(e,["default"]);null!=r&&Rf(t,["default"],r);const i=Nf(e,["description"]);null!=i&&Rf(t,["description"],i);const o=Nf(e,["enum"]);null!=o&&Rf(t,["enum"],o);const s=Nf(e,["example"]);null!=s&&Rf(t,["example"],s);const a=Nf(e,["format"]);null!=a&&Rf(t,["format"],a);const l=Nf(e,["items"]);null!=l&&Rf(t,["items"],l);const u=Nf(e,["maxItems"]);null!=u&&Rf(t,["maxItems"],u);const c=Nf(e,["maxLength"]);null!=c&&Rf(t,["maxLength"],c);const d=Nf(e,["maxProperties"]);null!=d&&Rf(t,["maxProperties"],d);const h=Nf(e,["maximum"]);null!=h&&Rf(t,["maximum"],h);const p=Nf(e,["minItems"]);null!=p&&Rf(t,["minItems"],p);const f=Nf(e,["minLength"]);null!=f&&Rf(t,["minLength"],f);const m=Nf(e,["minProperties"]);null!=m&&Rf(t,["minProperties"],m);const g=Nf(e,["minimum"]);null!=g&&Rf(t,["minimum"],g);const v=Nf(e,["nullable"]);null!=v&&Rf(t,["nullable"],v);const y=Nf(e,["pattern"]);null!=y&&Rf(t,["pattern"],y);const b=Nf(e,["properties"]);null!=b&&Rf(t,["properties"],b);const w=Nf(e,["propertyOrdering"]);null!=w&&Rf(t,["propertyOrdering"],w);const _=Nf(e,["required"]);null!=_&&Rf(t,["required"],_);const x=Nf(e,["title"]);null!=x&&Rf(t,["title"],x);const S=Nf(e,["type"]);return null!=S&&Rf(t,["type"],S),t}(mg(v)));const y=Nf(t,["responseJsonSchema"]);if(null!=y&&Rf(r,["responseJsonSchema"],y),void 0!==Nf(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==Nf(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=Nf(t,["safetySettings"]);if(void 0!==n&&null!=b){let e=b;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==Nf(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const n=Nf(e,["category"]);null!=n&&Rf(t,["category"],n);const r=Nf(e,["threshold"]);return null!=r&&Rf(t,["threshold"],r),t}(e))),Rf(n,["safetySettings"],e)}const w=Nf(t,["tools"]);if(void 0!==n&&null!=w){let e=bg(w);Array.isArray(e)&&(e=e.map(e=>Uy(yg(e)))),Rf(n,["tools"],e)}const _=Nf(t,["toolConfig"]);if(void 0!==n&&null!=_&&Rf(n,["toolConfig"],By(_)),void 0!==Nf(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const x=Nf(t,["cachedContent"]);void 0!==n&&null!=x&&Rf(n,["cachedContent"],wg(e,x));const S=Nf(t,["responseModalities"]);null!=S&&Rf(r,["responseModalities"],S);const E=Nf(t,["mediaResolution"]);null!=E&&Rf(r,["mediaResolution"],E);const T=Nf(t,["speechConfig"]);if(null!=T&&Rf(r,["speechConfig"],function(e){const t={},n=Nf(e,["voiceConfig"]);null!=n&&Rf(t,["voiceConfig"],Vy(n));const r=Nf(e,["multiSpeakerVoiceConfig"]);null!=r&&Rf(t,["multiSpeakerVoiceConfig"],qy(r));const i=Nf(e,["languageCode"]);return null!=i&&Rf(t,["languageCode"],i),t}(gg(T))),void 0!==Nf(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=Nf(t,["thinkingConfig"]);return null!=C&&Rf(r,["thinkingConfig"],function(e){const t={},n=Nf(e,["includeThoughts"]);null!=n&&Rf(t,["includeThoughts"],n);const r=Nf(e,["thinkingBudget"]);return null!=r&&Rf(t,["thinkingBudget"],r),t}(C)),r}function Hy(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["contents"]);if(null!=i){let e=pg(i);Array.isArray(e)&&(e=e.map(e=>Dy(e))),Rf(n,["contents"],e)}const o=Nf(t,["config"]);return null!=o&&Rf(n,["generationConfig"],zy(e,o,n)),n}function Gy(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["contents"]);null!=i&&Rf(n,["requests[]","content"],hg(e,i));const o=Nf(t,["config"]);null!=o&&Rf(n,["config"],function(e,t){const n=Nf(e,["taskType"]);void 0!==t&&null!=n&&Rf(t,["requests[]","taskType"],n);const r=Nf(e,["title"]);void 0!==t&&null!=r&&Rf(t,["requests[]","title"],r);const i=Nf(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&Rf(t,["requests[]","outputDimensionality"],i),void 0!==Nf(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==Nf(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(o,n));const s=Nf(t,["model"]);return void 0!==s&&Rf(n,["requests[]","model"],eg(e,s)),n}function Wy(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["prompt"]);null!=i&&Rf(n,["instances[0]","prompt"],i);const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e,t){if(void 0!==Nf(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==Nf(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=Nf(e,["numberOfImages"]);void 0!==t&&null!=n&&Rf(t,["parameters","sampleCount"],n);const r=Nf(e,["aspectRatio"]);void 0!==t&&null!=r&&Rf(t,["parameters","aspectRatio"],r);const i=Nf(e,["guidanceScale"]);if(void 0!==t&&null!=i&&Rf(t,["parameters","guidanceScale"],i),void 0!==Nf(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=Nf(e,["safetyFilterLevel"]);void 0!==t&&null!=o&&Rf(t,["parameters","safetySetting"],o);const s=Nf(e,["personGeneration"]);void 0!==t&&null!=s&&Rf(t,["parameters","personGeneration"],s);const a=Nf(e,["includeSafetyAttributes"]);void 0!==t&&null!=a&&Rf(t,["parameters","includeSafetyAttributes"],a);const l=Nf(e,["includeRaiReason"]);void 0!==t&&null!=l&&Rf(t,["parameters","includeRaiReason"],l);const u=Nf(e,["language"]);void 0!==t&&null!=u&&Rf(t,["parameters","language"],u);const c=Nf(e,["outputMimeType"]);void 0!==t&&null!=c&&Rf(t,["parameters","outputOptions","mimeType"],c);const d=Nf(e,["outputCompressionQuality"]);if(void 0!==t&&null!=d&&Rf(t,["parameters","outputOptions","compressionQuality"],d),void 0!==Nf(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");const h=Nf(e,["imageSize"]);if(void 0!==t&&null!=h&&Rf(t,["parameters","sampleImageSize"],h),void 0!==Nf(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(o,n)),n}function Jy(e,t){const n={},r=Nf(t,["config"]);return null!=r&&Rf(n,["config"],function(e,t,n){const r=Nf(t,["pageSize"]);void 0!==n&&null!=r&&Rf(n,["_query","pageSize"],r);const i=Nf(t,["pageToken"]);void 0!==n&&null!=i&&Rf(n,["_query","pageToken"],i);const o=Nf(t,["filter"]);void 0!==n&&null!=o&&Rf(n,["_query","filter"],o);const s=Nf(t,["queryBase"]);return void 0!==n&&null!=s&&Rf(n,["_url","models_url"],Eg(e,s)),{}}(e,r,n)),n}function Ky(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","name"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],function(e,t){const n=Nf(e,["displayName"]);void 0!==t&&null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["description"]);void 0!==t&&null!=r&&Rf(t,["description"],r);const i=Nf(e,["defaultCheckpointId"]);return void 0!==t&&null!=i&&Rf(t,["defaultCheckpointId"],i),{}}(i,n)),n}function Yy(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["contents"]);if(null!=i){let e=pg(i);Array.isArray(e)&&(e=e.map(e=>Dy(e))),Rf(n,["contents"],e)}const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e){if(void 0!==Nf(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==Nf(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==Nf(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.");return{}}(o)),n}function Xy(e){const t={};if(void 0!==Nf(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=Nf(e,["imageBytes"]);null!=n&&Rf(t,["bytesBase64Encoded"],xg(n));const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}function $y(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["prompt"]);null!=i&&Rf(n,["instances[0]","prompt"],i);const o=Nf(t,["image"]);if(null!=o&&Rf(n,["instances[0]","image"],Xy(o)),void 0!==Nf(t,["video"]))throw new Error("video parameter is not supported in Gemini API.");const s=Nf(t,["source"]);null!=s&&Rf(n,["config"],function(e,t){const n=Nf(e,["prompt"]);void 0!==t&&null!=n&&Rf(t,["instances[0]","prompt"],n);const r=Nf(e,["image"]);if(void 0!==t&&null!=r&&Rf(t,["instances[0]","image"],Xy(r)),void 0!==Nf(e,["video"]))throw new Error("video parameter is not supported in Gemini API.");return{}}(s,n));const a=Nf(t,["config"]);return null!=a&&Rf(n,["config"],function(e,t){const n=Nf(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&Rf(t,["parameters","sampleCount"],n),void 0!==Nf(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==Nf(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const r=Nf(e,["durationSeconds"]);if(void 0!==t&&null!=r&&Rf(t,["parameters","durationSeconds"],r),void 0!==Nf(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=Nf(e,["aspectRatio"]);void 0!==t&&null!=i&&Rf(t,["parameters","aspectRatio"],i);const o=Nf(e,["resolution"]);void 0!==t&&null!=o&&Rf(t,["parameters","resolution"],o);const s=Nf(e,["personGeneration"]);if(void 0!==t&&null!=s&&Rf(t,["parameters","personGeneration"],s),void 0!==Nf(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=Nf(e,["negativePrompt"]);void 0!==t&&null!=a&&Rf(t,["parameters","negativePrompt"],a);const l=Nf(e,["enhancePrompt"]);if(void 0!==t&&null!=l&&Rf(t,["parameters","enhancePrompt"],l),void 0!==Nf(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");if(void 0!==Nf(e,["lastFrame"]))throw new Error("lastFrame parameter is not supported in Gemini API.");if(void 0!==Nf(e,["referenceImages"]))throw new Error("referenceImages parameter is not supported in Gemini API.");if(void 0!==Nf(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==Nf(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}(a,n)),n}function Qy(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["data"]);null!=r&&Rf(t,["data"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["fileUri"]);null!=r&&Rf(t,["fileUri"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function Zy(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Qy(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}function eb(e){const t={},n=Nf(e,["timeRangeFilter"]);null!=n&&Rf(t,["timeRangeFilter"],function(e){const t={},n=Nf(e,["startTime"]);null!=n&&Rf(t,["startTime"],n);const r=Nf(e,["endTime"]);return null!=r&&Rf(t,["endTime"],r),t}(n));const r=Nf(e,["excludeDomains"]);return null!=r&&Rf(t,["excludeDomains"],r),t}function tb(e){const t={},n=Nf(e,["dynamicRetrievalConfig"]);return null!=n&&Rf(t,["dynamicRetrievalConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["dynamicThreshold"]);return null!=r&&Rf(t,["dynamicThreshold"],r),t}(n)),t}function nb(e){const t={},n=Nf(e,["apiKeyConfig"]);null!=n&&Rf(t,["apiKeyConfig"],function(e){const t={},n=Nf(e,["apiKeyString"]);return null!=n&&Rf(t,["apiKeyString"],n),t}(n));const r=Nf(e,["authType"]);null!=r&&Rf(t,["authType"],r);const i=Nf(e,["googleServiceAccountConfig"]);null!=i&&Rf(t,["googleServiceAccountConfig"],i);const o=Nf(e,["httpBasicAuthConfig"]);null!=o&&Rf(t,["httpBasicAuthConfig"],o);const s=Nf(e,["oauthConfig"]);null!=s&&Rf(t,["oauthConfig"],s);const a=Nf(e,["oidcConfig"]);return null!=a&&Rf(t,["oidcConfig"],a),t}function rb(e){const t={},n=Nf(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==Nf(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=Nf(e,["description"]);null!=n&&Rf(t,["description"],n);const r=Nf(e,["name"]);null!=r&&Rf(t,["name"],r);const i=Nf(e,["parameters"]);null!=i&&Rf(t,["parameters"],i);const o=Nf(e,["parametersJsonSchema"]);null!=o&&Rf(t,["parametersJsonSchema"],o);const s=Nf(e,["response"]);null!=s&&Rf(t,["response"],s);const a=Nf(e,["responseJsonSchema"]);return null!=a&&Rf(t,["responseJsonSchema"],a),t}(e))),Rf(t,["functionDeclarations"],e)}const r=Nf(e,["retrieval"]);null!=r&&Rf(t,["retrieval"],r);const i=Nf(e,["googleSearch"]);null!=i&&Rf(t,["googleSearch"],eb(i));const o=Nf(e,["googleSearchRetrieval"]);null!=o&&Rf(t,["googleSearchRetrieval"],tb(o));const s=Nf(e,["enterpriseWebSearch"]);null!=s&&Rf(t,["enterpriseWebSearch"],function(e){const t={},n=Nf(e,["excludeDomains"]);return null!=n&&Rf(t,["excludeDomains"],n),t}(s));const a=Nf(e,["googleMaps"]);null!=a&&Rf(t,["googleMaps"],function(e){const t={},n=Nf(e,["authConfig"]);return null!=n&&Rf(t,["authConfig"],nb(n)),t}(a));null!=Nf(e,["urlContext"])&&Rf(t,["urlContext"],{});const l=Nf(e,["computerUse"]);null!=l&&Rf(t,["computerUse"],function(e){const t={},n=Nf(e,["environment"]);return null!=n&&Rf(t,["environment"],n),t}(l));const u=Nf(e,["codeExecution"]);return null!=u&&Rf(t,["codeExecution"],u),t}function ib(e){const t={},n=Nf(e,["latLng"]);null!=n&&Rf(t,["latLng"],function(e){const t={},n=Nf(e,["latitude"]);null!=n&&Rf(t,["latitude"],n);const r=Nf(e,["longitude"]);return null!=r&&Rf(t,["longitude"],r),t}(n));const r=Nf(e,["languageCode"]);return null!=r&&Rf(t,["languageCode"],r),t}function ob(e){const t={},n=Nf(e,["functionCallingConfig"]);null!=n&&Rf(t,["functionCallingConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["allowedFunctionNames"]);return null!=r&&Rf(t,["allowedFunctionNames"],r),t}(n));const r=Nf(e,["retrievalConfig"]);return null!=r&&Rf(t,["retrievalConfig"],ib(r)),t}function sb(e){const t={},n=Nf(e,["prebuiltVoiceConfig"]);return null!=n&&Rf(t,["prebuiltVoiceConfig"],function(e){const t={},n=Nf(e,["voiceName"]);return null!=n&&Rf(t,["voiceName"],n),t}(n)),t}function ab(e,t,n){const r={},i=Nf(t,["systemInstruction"]);void 0!==n&&null!=i&&Rf(n,["systemInstruction"],Zy(dg(i)));const o=Nf(t,["temperature"]);null!=o&&Rf(r,["temperature"],o);const s=Nf(t,["topP"]);null!=s&&Rf(r,["topP"],s);const a=Nf(t,["topK"]);null!=a&&Rf(r,["topK"],a);const l=Nf(t,["candidateCount"]);null!=l&&Rf(r,["candidateCount"],l);const u=Nf(t,["maxOutputTokens"]);null!=u&&Rf(r,["maxOutputTokens"],u);const c=Nf(t,["stopSequences"]);null!=c&&Rf(r,["stopSequences"],c);const d=Nf(t,["responseLogprobs"]);null!=d&&Rf(r,["responseLogprobs"],d);const h=Nf(t,["logprobs"]);null!=h&&Rf(r,["logprobs"],h);const p=Nf(t,["presencePenalty"]);null!=p&&Rf(r,["presencePenalty"],p);const f=Nf(t,["frequencyPenalty"]);null!=f&&Rf(r,["frequencyPenalty"],f);const m=Nf(t,["seed"]);null!=m&&Rf(r,["seed"],m);const g=Nf(t,["responseMimeType"]);null!=g&&Rf(r,["responseMimeType"],g);const v=Nf(t,["responseSchema"]);null!=v&&Rf(r,["responseSchema"],function(e){const t={},n=Nf(e,["anyOf"]);null!=n&&Rf(t,["anyOf"],n);const r=Nf(e,["default"]);null!=r&&Rf(t,["default"],r);const i=Nf(e,["description"]);null!=i&&Rf(t,["description"],i);const o=Nf(e,["enum"]);null!=o&&Rf(t,["enum"],o);const s=Nf(e,["example"]);null!=s&&Rf(t,["example"],s);const a=Nf(e,["format"]);null!=a&&Rf(t,["format"],a);const l=Nf(e,["items"]);null!=l&&Rf(t,["items"],l);const u=Nf(e,["maxItems"]);null!=u&&Rf(t,["maxItems"],u);const c=Nf(e,["maxLength"]);null!=c&&Rf(t,["maxLength"],c);const d=Nf(e,["maxProperties"]);null!=d&&Rf(t,["maxProperties"],d);const h=Nf(e,["maximum"]);null!=h&&Rf(t,["maximum"],h);const p=Nf(e,["minItems"]);null!=p&&Rf(t,["minItems"],p);const f=Nf(e,["minLength"]);null!=f&&Rf(t,["minLength"],f);const m=Nf(e,["minProperties"]);null!=m&&Rf(t,["minProperties"],m);const g=Nf(e,["minimum"]);null!=g&&Rf(t,["minimum"],g);const v=Nf(e,["nullable"]);null!=v&&Rf(t,["nullable"],v);const y=Nf(e,["pattern"]);null!=y&&Rf(t,["pattern"],y);const b=Nf(e,["properties"]);null!=b&&Rf(t,["properties"],b);const w=Nf(e,["propertyOrdering"]);null!=w&&Rf(t,["propertyOrdering"],w);const _=Nf(e,["required"]);null!=_&&Rf(t,["required"],_);const x=Nf(e,["title"]);null!=x&&Rf(t,["title"],x);const S=Nf(e,["type"]);return null!=S&&Rf(t,["type"],S),t}(mg(v)));const y=Nf(t,["responseJsonSchema"]);null!=y&&Rf(r,["responseJsonSchema"],y);const b=Nf(t,["routingConfig"]);null!=b&&Rf(r,["routingConfig"],b);const w=Nf(t,["modelSelectionConfig"]);null!=w&&Rf(r,["modelConfig"],function(e){const t={},n=Nf(e,["featureSelectionPreference"]);return null!=n&&Rf(t,["featureSelectionPreference"],n),t}(w));const _=Nf(t,["safetySettings"]);if(void 0!==n&&null!=_){let e=_;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["method"]);null!=n&&Rf(t,["method"],n);const r=Nf(e,["category"]);null!=r&&Rf(t,["category"],r);const i=Nf(e,["threshold"]);return null!=i&&Rf(t,["threshold"],i),t}(e))),Rf(n,["safetySettings"],e)}const x=Nf(t,["tools"]);if(void 0!==n&&null!=x){let e=bg(x);Array.isArray(e)&&(e=e.map(e=>rb(yg(e)))),Rf(n,["tools"],e)}const S=Nf(t,["toolConfig"]);void 0!==n&&null!=S&&Rf(n,["toolConfig"],ob(S));const E=Nf(t,["labels"]);void 0!==n&&null!=E&&Rf(n,["labels"],E);const T=Nf(t,["cachedContent"]);void 0!==n&&null!=T&&Rf(n,["cachedContent"],wg(e,T));const C=Nf(t,["responseModalities"]);null!=C&&Rf(r,["responseModalities"],C);const k=Nf(t,["mediaResolution"]);null!=k&&Rf(r,["mediaResolution"],k);const A=Nf(t,["speechConfig"]);null!=A&&Rf(r,["speechConfig"],function(e){const t={},n=Nf(e,["voiceConfig"]);if(null!=n&&Rf(t,["voiceConfig"],sb(n)),void 0!==Nf(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=Nf(e,["languageCode"]);return null!=r&&Rf(t,["languageCode"],r),t}(gg(A)));const O=Nf(t,["audioTimestamp"]);null!=O&&Rf(r,["audioTimestamp"],O);const I=Nf(t,["thinkingConfig"]);return null!=I&&Rf(r,["thinkingConfig"],function(e){const t={},n=Nf(e,["includeThoughts"]);null!=n&&Rf(t,["includeThoughts"],n);const r=Nf(e,["thinkingBudget"]);return null!=r&&Rf(t,["thinkingBudget"],r),t}(I)),r}function lb(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["contents"]);if(null!=i){let e=pg(i);Array.isArray(e)&&(e=e.map(e=>Zy(e))),Rf(n,["contents"],e)}const o=Nf(t,["config"]);return null!=o&&Rf(n,["generationConfig"],ab(e,o,n)),n}function ub(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["contents"]);null!=i&&Rf(n,["instances[]","content"],hg(e,i));const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e,t){const n=Nf(e,["taskType"]);void 0!==t&&null!=n&&Rf(t,["instances[]","task_type"],n);const r=Nf(e,["title"]);void 0!==t&&null!=r&&Rf(t,["instances[]","title"],r);const i=Nf(e,["outputDimensionality"]);void 0!==t&&null!=i&&Rf(t,["parameters","outputDimensionality"],i);const o=Nf(e,["mimeType"]);void 0!==t&&null!=o&&Rf(t,["instances[]","mimeType"],o);const s=Nf(e,["autoTruncate"]);return void 0!==t&&null!=s&&Rf(t,["parameters","autoTruncate"],s),{}}(o,n)),n}function cb(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["prompt"]);null!=i&&Rf(n,["instances[0]","prompt"],i);const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e,t){const n=Nf(e,["outputGcsUri"]);void 0!==t&&null!=n&&Rf(t,["parameters","storageUri"],n);const r=Nf(e,["negativePrompt"]);void 0!==t&&null!=r&&Rf(t,["parameters","negativePrompt"],r);const i=Nf(e,["numberOfImages"]);void 0!==t&&null!=i&&Rf(t,["parameters","sampleCount"],i);const o=Nf(e,["aspectRatio"]);void 0!==t&&null!=o&&Rf(t,["parameters","aspectRatio"],o);const s=Nf(e,["guidanceScale"]);void 0!==t&&null!=s&&Rf(t,["parameters","guidanceScale"],s);const a=Nf(e,["seed"]);void 0!==t&&null!=a&&Rf(t,["parameters","seed"],a);const l=Nf(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&Rf(t,["parameters","safetySetting"],l);const u=Nf(e,["personGeneration"]);void 0!==t&&null!=u&&Rf(t,["parameters","personGeneration"],u);const c=Nf(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&Rf(t,["parameters","includeSafetyAttributes"],c);const d=Nf(e,["includeRaiReason"]);void 0!==t&&null!=d&&Rf(t,["parameters","includeRaiReason"],d);const h=Nf(e,["language"]);void 0!==t&&null!=h&&Rf(t,["parameters","language"],h);const p=Nf(e,["outputMimeType"]);void 0!==t&&null!=p&&Rf(t,["parameters","outputOptions","mimeType"],p);const f=Nf(e,["outputCompressionQuality"]);void 0!==t&&null!=f&&Rf(t,["parameters","outputOptions","compressionQuality"],f);const m=Nf(e,["addWatermark"]);void 0!==t&&null!=m&&Rf(t,["parameters","addWatermark"],m);const g=Nf(e,["imageSize"]);void 0!==t&&null!=g&&Rf(t,["parameters","sampleImageSize"],g);const v=Nf(e,["enhancePrompt"]);return void 0!==t&&null!=v&&Rf(t,["parameters","enhancePrompt"],v),{}}(o,n)),n}function db(e){const t={},n=Nf(e,["gcsUri"]);null!=n&&Rf(t,["gcsUri"],n);const r=Nf(e,["imageBytes"]);null!=r&&Rf(t,["bytesBase64Encoded"],xg(r));const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}function hb(e){const t={},n=Nf(e,["referenceImage"]);null!=n&&Rf(t,["referenceImage"],db(n));const r=Nf(e,["referenceId"]);null!=r&&Rf(t,["referenceId"],r);const i=Nf(e,["referenceType"]);null!=i&&Rf(t,["referenceType"],i);const o=Nf(e,["maskImageConfig"]);null!=o&&Rf(t,["maskImageConfig"],function(e){const t={},n=Nf(e,["maskMode"]);null!=n&&Rf(t,["maskMode"],n);const r=Nf(e,["segmentationClasses"]);null!=r&&Rf(t,["maskClasses"],r);const i=Nf(e,["maskDilation"]);return null!=i&&Rf(t,["dilation"],i),t}(o));const s=Nf(e,["controlImageConfig"]);null!=s&&Rf(t,["controlImageConfig"],function(e){const t={},n=Nf(e,["controlType"]);null!=n&&Rf(t,["controlType"],n);const r=Nf(e,["enableControlImageComputation"]);return null!=r&&Rf(t,["computeControl"],r),t}(s));const a=Nf(e,["styleImageConfig"]);null!=a&&Rf(t,["styleImageConfig"],function(e){const t={},n=Nf(e,["styleDescription"]);return null!=n&&Rf(t,["styleDescription"],n),t}(a));const l=Nf(e,["subjectImageConfig"]);return null!=l&&Rf(t,["subjectImageConfig"],function(e){const t={},n=Nf(e,["subjectType"]);null!=n&&Rf(t,["subjectType"],n);const r=Nf(e,["subjectDescription"]);return null!=r&&Rf(t,["subjectDescription"],r),t}(l)),t}function pb(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["prompt"]);null!=i&&Rf(n,["instances[0]","prompt"],i);const o=Nf(t,["referenceImages"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>hb(e))),Rf(n,["instances[0]","referenceImages"],e)}const s=Nf(t,["config"]);return null!=s&&Rf(n,["config"],function(e,t){const n=Nf(e,["outputGcsUri"]);void 0!==t&&null!=n&&Rf(t,["parameters","storageUri"],n);const r=Nf(e,["negativePrompt"]);void 0!==t&&null!=r&&Rf(t,["parameters","negativePrompt"],r);const i=Nf(e,["numberOfImages"]);void 0!==t&&null!=i&&Rf(t,["parameters","sampleCount"],i);const o=Nf(e,["aspectRatio"]);void 0!==t&&null!=o&&Rf(t,["parameters","aspectRatio"],o);const s=Nf(e,["guidanceScale"]);void 0!==t&&null!=s&&Rf(t,["parameters","guidanceScale"],s);const a=Nf(e,["seed"]);void 0!==t&&null!=a&&Rf(t,["parameters","seed"],a);const l=Nf(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&Rf(t,["parameters","safetySetting"],l);const u=Nf(e,["personGeneration"]);void 0!==t&&null!=u&&Rf(t,["parameters","personGeneration"],u);const c=Nf(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&Rf(t,["parameters","includeSafetyAttributes"],c);const d=Nf(e,["includeRaiReason"]);void 0!==t&&null!=d&&Rf(t,["parameters","includeRaiReason"],d);const h=Nf(e,["language"]);void 0!==t&&null!=h&&Rf(t,["parameters","language"],h);const p=Nf(e,["outputMimeType"]);void 0!==t&&null!=p&&Rf(t,["parameters","outputOptions","mimeType"],p);const f=Nf(e,["outputCompressionQuality"]);void 0!==t&&null!=f&&Rf(t,["parameters","outputOptions","compressionQuality"],f);const m=Nf(e,["addWatermark"]);void 0!==t&&null!=m&&Rf(t,["parameters","addWatermark"],m);const g=Nf(e,["editMode"]);void 0!==t&&null!=g&&Rf(t,["parameters","editMode"],g);const v=Nf(e,["baseSteps"]);return void 0!==t&&null!=v&&Rf(t,["parameters","editConfig","baseSteps"],v),{}}(s,n)),n}function fb(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["image"]);null!=i&&Rf(n,["instances[0]","image"],db(i));const o=Nf(t,["upscaleFactor"]);null!=o&&Rf(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=Nf(t,["config"]);return null!=s&&Rf(n,["config"],function(e,t){const n=Nf(e,["outputGcsUri"]);void 0!==t&&null!=n&&Rf(t,["parameters","storageUri"],n);const r=Nf(e,["includeRaiReason"]);void 0!==t&&null!=r&&Rf(t,["parameters","includeRaiReason"],r);const i=Nf(e,["outputMimeType"]);void 0!==t&&null!=i&&Rf(t,["parameters","outputOptions","mimeType"],i);const o=Nf(e,["outputCompressionQuality"]);void 0!==t&&null!=o&&Rf(t,["parameters","outputOptions","compressionQuality"],o);const s=Nf(e,["enhanceInputImage"]);void 0!==t&&null!=s&&Rf(t,["parameters","upscaleConfig","enhanceInputImage"],s);const a=Nf(e,["imagePreservationFactor"]);void 0!==t&&null!=a&&Rf(t,["parameters","upscaleConfig","imagePreservationFactor"],a);const l=Nf(e,["numberOfImages"]);void 0!==t&&null!=l&&Rf(t,["parameters","sampleCount"],l);const u=Nf(e,["mode"]);return void 0!==t&&null!=u&&Rf(t,["parameters","mode"],u),{}}(s,n)),n}function mb(e,t){const n=Nf(e,["prompt"]);void 0!==t&&null!=n&&Rf(t,["instances[0]","prompt"],n);const r=Nf(e,["personImage"]);void 0!==t&&null!=r&&Rf(t,["instances[0]","personImage","image"],db(r));const i=Nf(e,["productImages"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["productImage"]);return null!=n&&Rf(t,["image"],db(n)),t}(e))),Rf(t,["instances[0]","productImages"],e)}return{}}function gb(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["source"]);null!=i&&Rf(n,["config"],mb(i,n));const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e,t){const n=Nf(e,["numberOfImages"]);void 0!==t&&null!=n&&Rf(t,["parameters","sampleCount"],n);const r=Nf(e,["baseSteps"]);void 0!==t&&null!=r&&Rf(t,["parameters","editConfig","baseSteps"],r);const i=Nf(e,["outputGcsUri"]);void 0!==t&&null!=i&&Rf(t,["parameters","storageUri"],i);const o=Nf(e,["seed"]);void 0!==t&&null!=o&&Rf(t,["parameters","seed"],o);const s=Nf(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&Rf(t,["parameters","safetySetting"],s);const a=Nf(e,["personGeneration"]);void 0!==t&&null!=a&&Rf(t,["parameters","personGeneration"],a);const l=Nf(e,["addWatermark"]);void 0!==t&&null!=l&&Rf(t,["parameters","addWatermark"],l);const u=Nf(e,["outputMimeType"]);void 0!==t&&null!=u&&Rf(t,["parameters","outputOptions","mimeType"],u);const c=Nf(e,["outputCompressionQuality"]);void 0!==t&&null!=c&&Rf(t,["parameters","outputOptions","compressionQuality"],c);const d=Nf(e,["enhancePrompt"]);return void 0!==t&&null!=d&&Rf(t,["parameters","enhancePrompt"],d),{}}(o,n)),n}function vb(e,t){const n=Nf(e,["prompt"]);void 0!==t&&null!=n&&Rf(t,["instances[0]","prompt"],n);const r=Nf(e,["image"]);void 0!==t&&null!=r&&Rf(t,["instances[0]","image"],db(r));const i=Nf(e,["scribbleImage"]);return void 0!==t&&null!=i&&Rf(t,["instances[0]","scribble"],function(e){const t={},n=Nf(e,["image"]);return null!=n&&Rf(t,["image"],db(n)),t}(i)),{}}function yb(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["source"]);null!=i&&Rf(n,["config"],vb(i,n));const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e,t){const n=Nf(e,["mode"]);void 0!==t&&null!=n&&Rf(t,["parameters","mode"],n);const r=Nf(e,["maxPredictions"]);void 0!==t&&null!=r&&Rf(t,["parameters","maxPredictions"],r);const i=Nf(e,["confidenceThreshold"]);void 0!==t&&null!=i&&Rf(t,["parameters","confidenceThreshold"],i);const o=Nf(e,["maskDilation"]);void 0!==t&&null!=o&&Rf(t,["parameters","maskDilation"],o);const s=Nf(e,["binaryColorThreshold"]);return void 0!==t&&null!=s&&Rf(t,["parameters","binaryColorThreshold"],s),{}}(o,n)),n}function bb(e,t){const n={},r=Nf(t,["config"]);return null!=r&&Rf(n,["config"],function(e,t,n){const r=Nf(t,["pageSize"]);void 0!==n&&null!=r&&Rf(n,["_query","pageSize"],r);const i=Nf(t,["pageToken"]);void 0!==n&&null!=i&&Rf(n,["_query","pageToken"],i);const o=Nf(t,["filter"]);void 0!==n&&null!=o&&Rf(n,["_query","filter"],o);const s=Nf(t,["queryBase"]);return void 0!==n&&null!=s&&Rf(n,["_url","models_url"],Eg(e,s)),{}}(e,r,n)),n}function wb(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],function(e,t){const n=Nf(e,["displayName"]);void 0!==t&&null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["description"]);void 0!==t&&null!=r&&Rf(t,["description"],r);const i=Nf(e,["defaultCheckpointId"]);return void 0!==t&&null!=i&&Rf(t,["defaultCheckpointId"],i),{}}(i,n)),n}function _b(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["contents"]);if(null!=i){let e=pg(i);Array.isArray(e)&&(e=e.map(e=>Zy(e))),Rf(n,["contents"],e)}const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],function(e,t){const n=Nf(e,["systemInstruction"]);void 0!==t&&null!=n&&Rf(t,["systemInstruction"],Zy(dg(n)));const r=Nf(e,["tools"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>rb(e))),Rf(t,["tools"],e)}const i=Nf(e,["generationConfig"]);return void 0!==t&&null!=i&&Rf(t,["generationConfig"],i),{}}(o,n)),n}function xb(e){const t={},n=Nf(e,["uri"]);null!=n&&Rf(t,["gcsUri"],n);const r=Nf(e,["videoBytes"]);null!=r&&Rf(t,["bytesBase64Encoded"],xg(r));const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}function Sb(e,t){const n=Nf(e,["numberOfVideos"]);void 0!==t&&null!=n&&Rf(t,["parameters","sampleCount"],n);const r=Nf(e,["outputGcsUri"]);void 0!==t&&null!=r&&Rf(t,["parameters","storageUri"],r);const i=Nf(e,["fps"]);void 0!==t&&null!=i&&Rf(t,["parameters","fps"],i);const o=Nf(e,["durationSeconds"]);void 0!==t&&null!=o&&Rf(t,["parameters","durationSeconds"],o);const s=Nf(e,["seed"]);void 0!==t&&null!=s&&Rf(t,["parameters","seed"],s);const a=Nf(e,["aspectRatio"]);void 0!==t&&null!=a&&Rf(t,["parameters","aspectRatio"],a);const l=Nf(e,["resolution"]);void 0!==t&&null!=l&&Rf(t,["parameters","resolution"],l);const u=Nf(e,["personGeneration"]);void 0!==t&&null!=u&&Rf(t,["parameters","personGeneration"],u);const c=Nf(e,["pubsubTopic"]);void 0!==t&&null!=c&&Rf(t,["parameters","pubsubTopic"],c);const d=Nf(e,["negativePrompt"]);void 0!==t&&null!=d&&Rf(t,["parameters","negativePrompt"],d);const h=Nf(e,["enhancePrompt"]);void 0!==t&&null!=h&&Rf(t,["parameters","enhancePrompt"],h);const p=Nf(e,["generateAudio"]);void 0!==t&&null!=p&&Rf(t,["parameters","generateAudio"],p);const f=Nf(e,["lastFrame"]);void 0!==t&&null!=f&&Rf(t,["instances[0]","lastFrame"],db(f));const m=Nf(e,["referenceImages"]);if(void 0!==t&&null!=m){let e=m;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["image"]);null!=n&&Rf(t,["image"],db(n));const r=Nf(e,["referenceType"]);return null!=r&&Rf(t,["referenceType"],r),t}(e))),Rf(t,["instances[0]","referenceImages"],e)}const g=Nf(e,["mask"]);void 0!==t&&null!=g&&Rf(t,["instances[0]","mask"],function(e){const t={},n=Nf(e,["image"]);null!=n&&Rf(t,["_self"],db(n));const r=Nf(e,["maskMode"]);return null!=r&&Rf(t,["maskMode"],r),t}(g));const v=Nf(e,["compressionQuality"]);return void 0!==t&&null!=v&&Rf(t,["parameters","compressionQuality"],v),{}}function Eb(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["prompt"]);null!=i&&Rf(n,["instances[0]","prompt"],i);const o=Nf(t,["image"]);null!=o&&Rf(n,["instances[0]","image"],db(o));const s=Nf(t,["video"]);null!=s&&Rf(n,["instances[0]","video"],xb(s));const a=Nf(t,["source"]);null!=a&&Rf(n,["config"],function(e,t){const n=Nf(e,["prompt"]);void 0!==t&&null!=n&&Rf(t,["instances[0]","prompt"],n);const r=Nf(e,["image"]);void 0!==t&&null!=r&&Rf(t,["instances[0]","image"],db(r));const i=Nf(e,["video"]);return void 0!==t&&null!=i&&Rf(t,["instances[0]","video"],xb(i)),{}}(a,n));const l=Nf(t,["config"]);return null!=l&&Rf(n,["config"],Sb(l,n)),n}function Tb(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={},n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={},n=Nf(e,["fileUri"]);null!=n&&Rf(t,["fileUri"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function Cb(e){const t={},n=Nf(e,["urlMetadata"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["retrievedUrl"]);null!=n&&Rf(t,["retrievedUrl"],n);const r=Nf(e,["urlRetrievalStatus"]);return null!=r&&Rf(t,["urlRetrievalStatus"],r),t}(e))),Rf(t,["urlMetadata"],e)}return t}function kb(e){const t={},n=Nf(e,["content"]);null!=n&&Rf(t,["content"],function(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Tb(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}(n));const r=Nf(e,["citationMetadata"]);null!=r&&Rf(t,["citationMetadata"],function(e){const t={},n=Nf(e,["citationSources"]);return null!=n&&Rf(t,["citations"],n),t}(r));const i=Nf(e,["tokenCount"]);null!=i&&Rf(t,["tokenCount"],i);const o=Nf(e,["finishReason"]);null!=o&&Rf(t,["finishReason"],o);const s=Nf(e,["urlContextMetadata"]);null!=s&&Rf(t,["urlContextMetadata"],Cb(s));const a=Nf(e,["avgLogprobs"]);null!=a&&Rf(t,["avgLogprobs"],a);const l=Nf(e,["groundingMetadata"]);null!=l&&Rf(t,["groundingMetadata"],l);const u=Nf(e,["index"]);null!=u&&Rf(t,["index"],u);const c=Nf(e,["logprobsResult"]);null!=c&&Rf(t,["logprobsResult"],c);const d=Nf(e,["safetyRatings"]);return null!=d&&Rf(t,["safetyRatings"],d),t}function Ab(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>kb(e))),Rf(t,["candidates"],e)}const i=Nf(e,["modelVersion"]);null!=i&&Rf(t,["modelVersion"],i);const o=Nf(e,["promptFeedback"]);null!=o&&Rf(t,["promptFeedback"],o);const s=Nf(e,["responseId"]);null!=s&&Rf(t,["responseId"],s);const a=Nf(e,["usageMetadata"]);return null!=a&&Rf(t,["usageMetadata"],a),t}function Ob(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["values"]);return null!=n&&Rf(t,["values"],n),t}(e))),Rf(t,["embeddings"],e)}return null!=Nf(e,["metadata"])&&Rf(t,["metadata"],{}),t}function Ib(e){const t={},n=Nf(e,["safetyAttributes","categories"]);null!=n&&Rf(t,["categories"],n);const r=Nf(e,["safetyAttributes","scores"]);null!=r&&Rf(t,["scores"],r);const i=Nf(e,["contentType"]);return null!=i&&Rf(t,["contentType"],i),t}function Pb(e){const t={},n=Nf(e,["_self"]);null!=n&&Rf(t,["image"],function(e){const t={},n=Nf(e,["bytesBase64Encoded"]);null!=n&&Rf(t,["imageBytes"],xg(n));const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(n));const r=Nf(e,["raiFilteredReason"]);null!=r&&Rf(t,["raiFilteredReason"],r);const i=Nf(e,["_self"]);return null!=i&&Rf(t,["safetyAttributes"],Ib(i)),t}function Rb(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["displayName"]);null!=r&&Rf(t,["displayName"],r);const i=Nf(e,["description"]);null!=i&&Rf(t,["description"],i);const o=Nf(e,["version"]);null!=o&&Rf(t,["version"],o);const s=Nf(e,["_self"]);null!=s&&Rf(t,["tunedModelInfo"],function(e){const t={},n=Nf(e,["baseModel"]);null!=n&&Rf(t,["baseModel"],n);const r=Nf(e,["createTime"]);null!=r&&Rf(t,["createTime"],r);const i=Nf(e,["updateTime"]);return null!=i&&Rf(t,["updateTime"],i),t}(s));const a=Nf(e,["inputTokenLimit"]);null!=a&&Rf(t,["inputTokenLimit"],a);const l=Nf(e,["outputTokenLimit"]);null!=l&&Rf(t,["outputTokenLimit"],l);const u=Nf(e,["supportedGenerationMethods"]);return null!=u&&Rf(t,["supportedActions"],u),t}function Nb(e){const t={},n=Nf(e,["_self"]);return null!=n&&Rf(t,["video"],function(e){const t={},n=Nf(e,["video","uri"]);null!=n&&Rf(t,["uri"],n);const r=Nf(e,["video","encodedVideo"]);null!=r&&Rf(t,["videoBytes"],xg(r));const i=Nf(e,["encoding"]);return null!=i&&Rf(t,["mimeType"],i),t}(n)),t}function Mb(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["metadata"]);null!=r&&Rf(t,["metadata"],r);const i=Nf(e,["done"]);null!=i&&Rf(t,["done"],i);const o=Nf(e,["error"]);null!=o&&Rf(t,["error"],o);const s=Nf(e,["response","generateVideoResponse"]);return null!=s&&Rf(t,["response"],function(e){const t={},n=Nf(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Nb(e))),Rf(t,["generatedVideos"],e)}const r=Nf(e,["raiMediaFilteredCount"]);null!=r&&Rf(t,["raiMediaFilteredCount"],r);const i=Nf(e,["raiMediaFilteredReasons"]);return null!=i&&Rf(t,["raiMediaFilteredReasons"],i),t}(s)),t}function Db(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["data"]);null!=r&&Rf(t,["data"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={},n=Nf(e,["displayName"]);null!=n&&Rf(t,["displayName"],n);const r=Nf(e,["fileUri"]);null!=r&&Rf(t,["fileUri"],r);const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function jb(e){const t={},n=Nf(e,["urlMetadata"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["retrievedUrl"]);null!=n&&Rf(t,["retrievedUrl"],n);const r=Nf(e,["urlRetrievalStatus"]);return null!=r&&Rf(t,["urlRetrievalStatus"],r),t}(e))),Rf(t,["urlMetadata"],e)}return t}function Lb(e){const t={},n=Nf(e,["content"]);null!=n&&Rf(t,["content"],function(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Db(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}(n));const r=Nf(e,["citationMetadata"]);null!=r&&Rf(t,["citationMetadata"],function(e){const t={},n=Nf(e,["citations"]);return null!=n&&Rf(t,["citations"],n),t}(r));const i=Nf(e,["finishMessage"]);null!=i&&Rf(t,["finishMessage"],i);const o=Nf(e,["finishReason"]);null!=o&&Rf(t,["finishReason"],o);const s=Nf(e,["urlContextMetadata"]);null!=s&&Rf(t,["urlContextMetadata"],jb(s));const a=Nf(e,["avgLogprobs"]);null!=a&&Rf(t,["avgLogprobs"],a);const l=Nf(e,["groundingMetadata"]);null!=l&&Rf(t,["groundingMetadata"],l);const u=Nf(e,["index"]);null!=u&&Rf(t,["index"],u);const c=Nf(e,["logprobsResult"]);null!=c&&Rf(t,["logprobsResult"],c);const d=Nf(e,["safetyRatings"]);return null!=d&&Rf(t,["safetyRatings"],d),t}function Ub(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Lb(e))),Rf(t,["candidates"],e)}const i=Nf(e,["createTime"]);null!=i&&Rf(t,["createTime"],i);const o=Nf(e,["modelVersion"]);null!=o&&Rf(t,["modelVersion"],o);const s=Nf(e,["promptFeedback"]);null!=s&&Rf(t,["promptFeedback"],s);const a=Nf(e,["responseId"]);null!=a&&Rf(t,["responseId"],a);const l=Nf(e,["usageMetadata"]);return null!=l&&Rf(t,["usageMetadata"],l),t}function Fb(e){const t={},n=Nf(e,["values"]);null!=n&&Rf(t,["values"],n);const r=Nf(e,["statistics"]);return null!=r&&Rf(t,["statistics"],function(e){const t={},n=Nf(e,["truncated"]);null!=n&&Rf(t,["truncated"],n);const r=Nf(e,["token_count"]);return null!=r&&Rf(t,["tokenCount"],r),t}(r)),t}function Bb(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["predictions[]","embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Fb(e))),Rf(t,["embeddings"],e)}const i=Nf(e,["metadata"]);return null!=i&&Rf(t,["metadata"],function(e){const t={},n=Nf(e,["billableCharacterCount"]);return null!=n&&Rf(t,["billableCharacterCount"],n),t}(i)),t}function Vb(e){const t={},n=Nf(e,["gcsUri"]);null!=n&&Rf(t,["gcsUri"],n);const r=Nf(e,["bytesBase64Encoded"]);null!=r&&Rf(t,["imageBytes"],xg(r));const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}function qb(e){const t={},n=Nf(e,["safetyAttributes","categories"]);null!=n&&Rf(t,["categories"],n);const r=Nf(e,["safetyAttributes","scores"]);null!=r&&Rf(t,["scores"],r);const i=Nf(e,["contentType"]);return null!=i&&Rf(t,["contentType"],i),t}function zb(e){const t={},n=Nf(e,["_self"]);null!=n&&Rf(t,["image"],Vb(n));const r=Nf(e,["raiFilteredReason"]);null!=r&&Rf(t,["raiFilteredReason"],r);const i=Nf(e,["_self"]);null!=i&&Rf(t,["safetyAttributes"],qb(i));const o=Nf(e,["prompt"]);return null!=o&&Rf(t,["enhancedPrompt"],o),t}function Hb(e){const t={},n=Nf(e,["_self"]);null!=n&&Rf(t,["mask"],Vb(n));const r=Nf(e,["labels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["label"]);null!=n&&Rf(t,["label"],n);const r=Nf(e,["score"]);return null!=r&&Rf(t,["score"],r),t}(e))),Rf(t,["labels"],e)}return t}function Gb(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["displayName"]);null!=r&&Rf(t,["displayName"],r);const i=Nf(e,["description"]);null!=i&&Rf(t,["description"],i);const o=Nf(e,["versionId"]);null!=o&&Rf(t,["version"],o);const s=Nf(e,["deployedModels"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["endpoint"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["deployedModelId"]);return null!=r&&Rf(t,["deployedModelId"],r),t}(e))),Rf(t,["endpoints"],e)}const a=Nf(e,["labels"]);null!=a&&Rf(t,["labels"],a);const l=Nf(e,["_self"]);null!=l&&Rf(t,["tunedModelInfo"],function(e){const t={},n=Nf(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&Rf(t,["baseModel"],n);const r=Nf(e,["createTime"]);null!=r&&Rf(t,["createTime"],r);const i=Nf(e,["updateTime"]);return null!=i&&Rf(t,["updateTime"],i),t}(l));const u=Nf(e,["defaultCheckpointId"]);null!=u&&Rf(t,["defaultCheckpointId"],u);const c=Nf(e,["checkpoints"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["checkpointId"]);null!=n&&Rf(t,["checkpointId"],n);const r=Nf(e,["epoch"]);null!=r&&Rf(t,["epoch"],r);const i=Nf(e,["step"]);return null!=i&&Rf(t,["step"],i),t}(e))),Rf(t,["checkpoints"],e)}return t}function Wb(e){const t={},n=Nf(e,["_self"]);return null!=n&&Rf(t,["video"],function(e){const t={},n=Nf(e,["gcsUri"]);null!=n&&Rf(t,["uri"],n);const r=Nf(e,["bytesBase64Encoded"]);null!=r&&Rf(t,["videoBytes"],xg(r));const i=Nf(e,["mimeType"]);return null!=i&&Rf(t,["mimeType"],i),t}(n)),t}function Jb(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["name"],n);const r=Nf(e,["metadata"]);null!=r&&Rf(t,["metadata"],r);const i=Nf(e,["done"]);null!=i&&Rf(t,["done"],i);const o=Nf(e,["error"]);null!=o&&Rf(t,["error"],o);const s=Nf(e,["response"]);return null!=s&&Rf(t,["response"],function(e){const t={},n=Nf(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Wb(e))),Rf(t,["generatedVideos"],e)}const r=Nf(e,["raiMediaFilteredCount"]);null!=r&&Rf(t,["raiMediaFilteredCount"],r);const i=Nf(e,["raiMediaFilteredReasons"]);return null!=i&&Rf(t,["raiMediaFilteredReasons"],i),t}(s)),t}const Kb="x-goog-api-client",Yb="google-genai-sdk/".concat("1.19.0"),Xb=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class $b{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?"https://".concat(this.clientOptions.location,"-aiplatform.googleapis.com/"):"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return"projects/".concat(this.clientOptions.project,"/locations/").concat(this.clientOptions.location)}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];n&&r.push(this.getBaseResourcePath()),""!==e&&r.push(e);return new URL("".concat(r.join("/")))}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[o,s]of Object.entries(e.queryParams))r.searchParams.append(o,String(s));let i={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(t))"object"===typeof i?n[r]=Object.assign(Object.assign({},n[r]),i):void 0!==i&&(n[r]=i);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);r.searchParams.has("alt")&&"sse"===r.searchParams.get("alt")||r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const r=new AbortController,i=r.signal;if(t.timeout&&(null===t||void 0===t?void 0:t.timeout)>0){const e=setTimeout(()=>r.abort(),t.timeout);e&&"function"===typeof e.unref&&e.unref()}n&&n.addEventListener("abort",()=>{r.abort()}),e.signal=i}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"===typeof e.body&&e.body.length>0)try{const t=JSON.parse(e.body);if("object"!==typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(nT){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}function r(e,t){const n=Object.assign({},e);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const e=t[i],o=n[i];e&&"object"===typeof e&&!Array.isArray(e)&&o&&"object"===typeof o&&!Array.isArray(o)?n[i]=r(o,e):(o&&e&&typeof o!==typeof e&&console.warn('includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "'.concat(i,'". Original type: ').concat(typeof o,", New type: ").concat(typeof e,". Overwriting.")),n[i]=e)}return n}const i=r(n,t);e.body=JSON.stringify(i)}(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Qb(e),new Rm(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Qb(e),this.processStreamResponse(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}processStreamResponse(e){var t;return Mv(this,arguments,function*(){const n=null===(t=null===e||void 0===e?void 0:e.body)||void 0===t?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:i,value:o}=yield Nv(n.read());if(i){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const s=r.decode(o,{stream:!0});try{const e=JSON.parse(s);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,r=t.code,i="got status: ".concat(n,". ").concat(JSON.stringify(e));if(r>=400&&r<600){throw new Vv({message:i,status:r})}}}catch(nT){if("ApiError"===nT.name)throw nT}t+=s;let a=t.match(Xb);for(;a;){const n=a[1];try{const r=new Response(n,{headers:null===e||void 0===e?void 0:e.headers,status:null===e||void 0===e?void 0:e.status,statusText:null===e||void 0===e?void 0:e.statusText});yield yield Nv(new Rm(r)),t=t.slice(a[0].length),a=t.match(Xb)}catch(nT){throw new Error("exception parsing stream chunk ".concat(n,". ").concat(nT))}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw new Error("exception ".concat(e," sending request"))})}getDefaultHeaders(){const e={},t=Yb+" "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[Kb]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,r]of Object.entries(e.headers))t.append(n,r);e.timeout&&e.timeout>0&&t.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const r={};null!=t&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name="files/".concat(r.name));const i=this.clientOptions.uploader,o=await i.stat(e);r.sizeBytes=String(o.size);const s=null!==(n=null===t||void 0===t?void 0:t.mimeType)&&void 0!==n?n:o.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=s;const a=await this.fetchUploadUrl(r,t);return i.upload(e,a,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t){var n;let r={};r=(null===t||void 0===t?void 0:t.httpOptions)?t.httpOptions:{apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(e.sizeBytes),"X-Goog-Upload-Header-Content-Type":"".concat(e.mimeType)}};const i={file:e},o=await this.request({path:Pf("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:r});if(!o||!(null===o||void 0===o?void 0:o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const s=null===(n=null===o||void 0===o?void 0:o.headers)||void 0===n?void 0:n["x-goog-upload-url"];if(void 0===s)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return s}}async function Qb(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;r=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(r);if(n>=400&&n<600){throw new Vv({message:i,status:n})}throw new Error(i)}}let Zb=!1;function ew(e){for(const t of e){if(nw(t))return!0;if("object"===typeof t&&"inputSchema"in t)return!0}return Zb}function tw(e){var t;const n=null!==(t=e[Kb])&&void 0!==t?t:"";e[Kb]=(n+" ".concat("mcp_used/unknown")).trimStart()}function nw(e){return null!==e&&"object"===typeof e&&e instanceof iw}function rw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Mv(this,arguments,function*(){let n,r=0;for(;r<t;){const t=yield Nv(e.listTools({cursor:n}));for(const e of t.tools)yield yield Nv(e),r++;if(!t.nextCursor)break;n=t.nextCursor}})}class iw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new iw(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const i={},o=[];for(const c of this.mcpClients)try{for(var s,a=!0,l=(t=void 0,Dv(rw(c)));!(e=(s=await l.next()).done);a=!0){r=s.value,a=!1;const e=r;o.push(e);const t=e.name;if(i[t])throw new Error("Duplicate function name ".concat(t," found in MCP tools. Please ensure function names are unique."));i[t]=c}}catch(u){t={error:u}}finally{try{a||e||!(n=l.return)||await n.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[],r=new Set;for(const i of e){const e=i.name;if(r.has(e))throw new Error("Duplicate function name ".concat(e," found in MCP tools. Please ensure function names are unique."));r.add(e);const o=kg(i,t);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const i=await e.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return t}}class ow{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),a="".concat(r,"/ws/google.ai.generativelanguage.").concat(i,".GenerativeService.BidiGenerateMusic?key=").concat(s);let l=()=>{};const u=new Promise(e=>{l=e}),c=e.callbacks,d=(this.apiClient,{onopen:function(){l({})},onmessage:e=>{!async function(e,t,n){const r=new Zm;let i;i=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data);const o=ky(i);Object.assign(r,o),t(r)}(0,c.onmessage,e)},onerror:null!==(t=null===c||void 0===c?void 0:c.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null===c||void 0===c?void 0:c.onclose)&&void 0!==n?n:function(e){}}),h=this.webSocketFactory.create(a,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(o),d);h.connect(),await u;const p=sy({setup:iy({model:eg(this.apiClient,e.model)})});return h.send(JSON.stringify(p)),new sw(h,this.apiClient)}}class sw{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=oy(function(e){const t={},n=Nf(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>ny(e))),Rf(t,["weightedPrompts"],e)}return t}(e));this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=sy(function(e){const t={},n=Nf(e,["musicGenerationConfig"]);return null!=n&&Rf(t,["musicGenerationConfig"],ry(n)),t}(e));this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t=sy({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Im.PLAY)}pause(){this.sendPlaybackControl(Im.PAUSE)}stop(){this.sendPlaybackControl(Im.STOP)}resetContext(){this.sendPlaybackControl(Im.RESET_CONTEXT)}close(){this.conn.close()}}class aw{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new ow(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,i,o,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let u;const c=this.apiClient.getHeaders();e.config&&e.config.tools&&ew(e.config.tools)&&tw(c);const d=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}(c);if(this.apiClient.isVertexAI())u="".concat(a,"/ws/google.cloud.aiplatform.").concat(l,".LlmBidiService/BidiGenerateContent"),await this.auth.addAuthHeaders(d);else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null===e||void 0===e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==l&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),u="".concat(a,"/ws/google.ai.generativelanguage.").concat(l,".GenerativeService.").concat(t,"?").concat(n,"=").concat(e)}let h=()=>{};const p=new Promise(e=>{h=e}),f=e.callbacks,m=this.apiClient,g={onopen:function(){var e;null===(e=null===f||void 0===f?void 0:f.onopen)||void 0===e||e.call(f),h({})},onmessage:e=>{!async function(e,t,n){const r=new Qm;let i;i=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const o=JSON.parse(i);if(e.isVertexAI()){const e=Ny(o);Object.assign(r,e)}else{const e=Sy(o);Object.assign(r,e)}t(r)}(m,f.onmessage,e)},onerror:null!==(t=null===f||void 0===f?void 0:f.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null===f||void 0===f?void 0:f.onclose)&&void 0!==n?n:function(e){}},v=this.webSocketFactory.create(u,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(d),g);v.connect(),await p;let y=eg(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&y.startsWith("publishers/")){const e=this.apiClient.getProject(),t=this.apiClient.getLocation();y="projects/".concat(e,"/locations/").concat(t,"/")+y}let b={};this.apiClient.isVertexAI()&&void 0===(null===(r=e.config)||void 0===r?void 0:r.responseModalities)&&(void 0===e.config?e.config={responseModalities:[em.AUDIO]}:e.config.responseModalities=[em.AUDIO]),(null===(i=e.config)||void 0===i?void 0:i.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const w=null!==(s=null===(o=e.config)||void 0===o?void 0:o.tools)&&void 0!==s?s:[],_=[];for(const S of w)if(this.isCallableTool(S)){const e=S;_.push(await e.tool())}else _.push(S);_.length>0&&(e.config.tools=_);const x={model:y,config:e.config,callbacks:e.callbacks};return b=this.apiClient.isVertexAI()?function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["setup","model"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],my(i,n)),n}(this.apiClient,x):function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["setup","model"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],ey(i,n)),n}(this.apiClient,x),delete b.config,v.send(JSON.stringify(b)),new uw(v,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"===typeof e.callTool}}const lw={turnComplete:!0};class uw{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let n=[];try{n=pg(t.turns),n=e.isVertexAI()?n.map(e=>Zy(e)):n.map(e=>Dy(e))}catch(rT){throw new Error('Failed to parse client content "turns", type: \''.concat(typeof t.turns,"'"))}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const r of n){if("object"!==typeof r||null===r||!("name"in r)||!("response"in r))throw new Error("Could not parse function response, type '".concat(typeof r,"'."));if(!e.isVertexAI()&&!("id"in r))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},lw),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:gy(e)}:{realtimeInput:ty(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function cw(e){var t,n,r;if(null===(t=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let i=!1;for(const s of null!==(n=null===e||void 0===e?void 0:e.tools)&&void 0!==n?n:[])if(dw(s)){i=!0;break}if(!i)return!0;const o=null===(r=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===r?void 0:r.maximumRemoteCalls;return!!(o&&(o<0||!Number.isInteger(o))||0==o)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0)}function dw(e){return"callTool"in e&&"function"===typeof e.callTool}function hw(e){var t;return!(null===(t=null===e||void 0===e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}class pw extends If{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,r,i,o;const s=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some(e=>dw(e)))&&void 0!==r&&r}(e)||cw(e.config))return await this.generateContentInternal(s);if(function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some(e=>!dw(e)))&&void 0!==r&&r}(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let a,l;const u=pg(s.contents),c=null!==(r=null===(n=null===(t=s.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let d=0;for(;d<c&&(a=await this.generateContentInternal(s),a.functionCalls&&0!==a.functionCalls.length);){const t=a.candidates[0].content,n=[];for(const r of null!==(o=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==o?o:[])if(dw(r)){const e=r,t=await e.callTool(a.functionCalls);n.push(...t)}d++,l={role:"user",parts:n},s.contents=pg(s.contents),s.contents.push(t),s.contents.push(l),hw(s.config)&&(u.push(t),u.push(l))}return hw(s.config)&&(a.automaticFunctionCallingHistory=u),a},this.generateContentStream=async e=>{if(this.maybeMoveToResponseJsonSchem(e),cw(e.config)){const t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n;const r=[];if(null===e||void 0===e?void 0:e.generatedImages)for(const o of e.generatedImages)o&&(null===o||void 0===o?void 0:o.safetyAttributes)&&"Positive Prompt"===(null===(t=null===o||void 0===o?void 0:o.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null===o||void 0===o?void 0:o.safetyAttributes:r.push(o);let i;return i=n?{generatedImages:r,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:r,sdkHttpResponse:e.sdkHttpResponse},i}),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null===e||void 0===e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new sv(Pm.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,r;const i=null===(t=e.config)||void 0===t?void 0:t.tools;if(!i)return e;const o=await Promise.all(i.map(async e=>{if(dw(e)){const t=e;return await t.tool()}return e})),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(s.config.tools=o,e.config&&e.config.tools&&ew(e.config.tools)){const t=null!==(r=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==r?r:{};let i=Object.assign({},t);0===Object.keys(i).length&&(i=this.apiClient.getDefaultHeaders()),tw(i),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:i})}return s}async initAfcToolsMap(e){var t,n,r;const i=new Map;for(const o of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(dw(o)){const e=o,t=await e.tool();for(const n of null!==(r=t.functionDeclarations)&&void 0!==r?r:[]){if(!n.name)throw new Error("Function declaration name is required.");if(i.has(n.name))throw new Error("Duplicate tool declaration name: ".concat(n.name));i.set(n.name,e)}}return i}async processAfcStream(e){var t,n,r;const i=null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let o=!1,s=0;return function(e,t,n){var r,a;return Mv(this,arguments,function*(){for(var l,u,c,d;s<i;){o&&(s++,o=!1);const g=yield Nv(e.processParamsMaybeAddMcpUsage(n)),v=yield Nv(e.generateContentStreamInternal(g)),y=[],b=[];try{for(var h,p=!0,f=(u=void 0,Dv(v));!(l=(h=yield Nv(f.next())).done);p=!0){d=h.value,p=!1;const e=d;if(yield yield Nv(e),e.candidates&&(null===(r=e.candidates[0])||void 0===r?void 0:r.content)){b.push(e.candidates[0].content);for(const n of null!==(a=e.candidates[0].content.parts)&&void 0!==a?a:[])if(s<i&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error("Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ".concat(t.keys(),", mising tool: ").concat(n.functionCall.name));{const e=yield Nv(t.get(n.functionCall.name).callTool([n.functionCall]));y.push(...e)}}}}}catch(m){u={error:m}}finally{try{p||l||!(c=f.return)||(yield Nv(c.call(f)))}finally{if(u)throw u.error}}if(!(y.length>0))break;{o=!0;const e=new Nm;e.candidates=[{content:{role:"user",parts:y}}],yield yield Nv(e);const t=[];t.push(...b),t.push({role:"user",parts:y});const r=pg(n.contents).concat(t);n.contents=r}}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=lb(this.apiClient,e);return s=Pf("{model}:generateContent",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=Ub(e),n=new Nm;return Object.assign(n,t),n})}{const t=Hy(this.apiClient,e);return s=Pf("{model}:generateContent",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=Ab(e),n=new Nm;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=lb(this.apiClient,e);s=Pf("{model}:streamGenerateContent?alt=sse",r._url),a=r._query,delete r.config,delete r._url,delete r._query;return o=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),o.then(function(e){return Mv(this,arguments,function*(){var t,n,r,i;try{for(var o,s=!0,a=Dv(e);!(t=(o=yield Nv(a.next())).done);s=!0){i=o.value,s=!1;const e=i,t=Ub(yield Nv(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Nm;Object.assign(n,t),yield yield Nv(n)}}catch(l){n={error:l}}finally{try{s||t||!(r=a.return)||(yield Nv(r.call(a)))}finally{if(n)throw n.error}}})})}{const t=Hy(this.apiClient,e);s=Pf("{model}:streamGenerateContent?alt=sse",t._url),a=t._query,delete t.config,delete t._url,delete t._query;return o=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}),o.then(function(e){return Mv(this,arguments,function*(){var t,n,r,i;try{for(var o,s=!0,a=Dv(e);!(t=(o=yield Nv(a.next())).done);s=!0){i=o.value,s=!1;const e=i,t=Ab(yield Nv(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Nm;Object.assign(n,t),yield yield Nv(n)}}catch(l){n={error:l}}finally{try{s||t||!(r=a.return)||(yield Nv(r.call(a)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=ub(this.apiClient,e);return s=Pf("{model}:predict",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=Bb(e),n=new Mm;return Object.assign(n,t),n})}{const t=Gy(this.apiClient,e);return s=Pf("{model}:batchEmbedContents",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=Ob(e),n=new Mm;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=cb(this.apiClient,e);return s=Pf("{model}:predict",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>zb(e))),Rf(t,["generatedImages"],e)}const i=Nf(e,["positivePromptSafetyAttributes"]);return null!=i&&Rf(t,["positivePromptSafetyAttributes"],qb(i)),t}(e),n=new Dm;return Object.assign(n,t),n})}{const t=Wy(this.apiClient,e);return s=Pf("{model}:predict",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Pb(e))),Rf(t,["generatedImages"],e)}const i=Nf(e,["positivePromptSafetyAttributes"]);return null!=i&&Rf(t,["positivePromptSafetyAttributes"],Ib(i)),t}(e),n=new Dm;return Object.assign(n,t),n})}}async editImageInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=pb(this.apiClient,e);return i=Pf("{model}:predict",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>zb(e))),Rf(t,["generatedImages"],e)}return t}(e),n=new jm;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=fb(this.apiClient,e);return i=Pf("{model}:predict",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>zb(e))),Rf(t,["generatedImages"],e)}return t}(e),n=new Lm;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=gb(this.apiClient,e);return i=Pf("{model}:predict",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=Nf(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>zb(e))),Rf(t,["generatedImages"],e)}return t}(e),n=new Um;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=yb(this.apiClient,e);return i=Pf("{model}:predict",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=Nf(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>Hb(e))),Rf(t,["generatedMasks"],e)}return t}(e),n=new Fm;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","name"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("{name}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o.then(e=>Gb(e))}{const t=function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","name"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o.then(e=>Rb(e))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=bb(this.apiClient,e);return s=Pf("{models_url}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["_self"]);if(null!=i){let e=Tg(i);Array.isArray(e)&&(e=e.map(e=>Gb(e))),Rf(t,["models"],e)}return t}(e),n=new Bm;return Object.assign(n,t),n})}{const t=Jy(this.apiClient,e);return s=Pf("{models_url}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["_self"]);if(null!=i){let e=Tg(i);Array.isArray(e)&&(e=e.map(e=>Rb(e))),Rf(t,["models"],e)}return t}(e),n=new Bm;return Object.assign(n,t),n})}}async update(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=wb(this.apiClient,e);return s=Pf("{model}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o.then(e=>Gb(e))}{const t=Ky(this.apiClient,e);return s=Pf("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o.then(e=>Rb(e))}}async delete(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","name"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("{name}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);return null!=n&&Rf(t,["sdkHttpResponse"],n),t}(e),n=new Vm;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","name"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],i),n}(this.apiClient,e);return s=Pf("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);return null!=n&&Rf(t,["sdkHttpResponse"],n),t}(e),n=new Vm;return Object.assign(n,t),n})}}async countTokens(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=_b(this.apiClient,e);return s=Pf("{model}:countTokens",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["totalTokens"]);return null!=r&&Rf(t,["totalTokens"],r),t}(e),n=new qm;return Object.assign(n,t),n})}{const t=Yy(this.apiClient,e);return s=Pf("{model}:countTokens",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["totalTokens"]);null!=r&&Rf(t,["totalTokens"],r);const i=Nf(e,["cachedContentTokenCount"]);return null!=i&&Rf(t,["cachedContentTokenCount"],i),t}(e),n=new qm;return Object.assign(n,t),n})}}async computeTokens(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["_url","model"],eg(e,r));const i=Nf(t,["contents"]);if(null!=i){let e=pg(i);Array.isArray(e)&&(e=e.map(e=>Zy(e))),Rf(n,["contents"],e)}const o=Nf(t,["config"]);return null!=o&&Rf(n,["config"],o),n}(this.apiClient,e);return i=Pf("{model}:computeTokens",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["tokensInfo"]);return null!=r&&Rf(t,["tokensInfo"],r),t}(e),n=new zm;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Eb(this.apiClient,e);return s=Pf("{model}:predictLongRunning",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o.then(e=>{const t=Jb(e),n=new Hm;return Object.assign(n,t),n})}{const t=$y(this.apiClient,e);return s=Pf("{model}:predictLongRunning",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o.then(e=>{const t=Mb(e),n=new Hm;return Object.assign(n,t),n})}}}class fw extends If{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:i,isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:i,isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=Nf(e,["operationName"]);null!=n&&Rf(t,["_url","operationName"],n);const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);return s=Pf("{operationName}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),o}{const t=function(e){const t={},n=Nf(e,["operationName"]);null!=n&&Rf(t,["_url","operationName"],n);const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);return s=Pf("{operationName}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json()),o}}async fetchPredictVideosOperationInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=function(e){const t={},n=Nf(e,["operationName"]);null!=n&&Rf(t,["operationName"],n);const r=Nf(e,["resourceName"]);null!=r&&Rf(t,["_url","resourceName"],r);const i=Nf(e,["config"]);return null!=i&&Rf(t,["config"],i),t}(e);return i=Pf("{resourceName}:fetchPredictOperation",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r}throw new Error("This method is only supported by the Vertex AI.")}}function mw(e){const t={},n=Nf(e,["prebuiltVoiceConfig"]);return null!=n&&Rf(t,["prebuiltVoiceConfig"],function(e){const t={},n=Nf(e,["voiceName"]);return null!=n&&Rf(t,["voiceName"],n),t}(n)),t}function gw(e){const t={},n=Nf(e,["speakerVoiceConfigs"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["speaker"]);null!=n&&Rf(t,["speaker"],n);const r=Nf(e,["voiceConfig"]);return null!=r&&Rf(t,["voiceConfig"],mw(r)),t}(e))),Rf(t,["speakerVoiceConfigs"],e)}return t}function vw(e){const t={},n=Nf(e,["videoMetadata"]);null!=n&&Rf(t,["videoMetadata"],function(e){const t={},n=Nf(e,["fps"]);null!=n&&Rf(t,["fps"],n);const r=Nf(e,["endOffset"]);null!=r&&Rf(t,["endOffset"],r);const i=Nf(e,["startOffset"]);return null!=i&&Rf(t,["startOffset"],i),t}(n));const r=Nf(e,["thought"]);null!=r&&Rf(t,["thought"],r);const i=Nf(e,["inlineData"]);null!=i&&Rf(t,["inlineData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["data"]);null!=n&&Rf(t,["data"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(i));const o=Nf(e,["fileData"]);null!=o&&Rf(t,["fileData"],function(e){const t={};if(void 0!==Nf(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=Nf(e,["fileUri"]);null!=n&&Rf(t,["fileUri"],n);const r=Nf(e,["mimeType"]);return null!=r&&Rf(t,["mimeType"],r),t}(o));const s=Nf(e,["thoughtSignature"]);null!=s&&Rf(t,["thoughtSignature"],s);const a=Nf(e,["functionCall"]);null!=a&&Rf(t,["functionCall"],function(e){const t={},n=Nf(e,["id"]);null!=n&&Rf(t,["id"],n);const r=Nf(e,["args"]);null!=r&&Rf(t,["args"],r);const i=Nf(e,["name"]);return null!=i&&Rf(t,["name"],i),t}(a));const l=Nf(e,["codeExecutionResult"]);null!=l&&Rf(t,["codeExecutionResult"],l);const u=Nf(e,["executableCode"]);null!=u&&Rf(t,["executableCode"],u);const c=Nf(e,["functionResponse"]);null!=c&&Rf(t,["functionResponse"],c);const d=Nf(e,["text"]);return null!=d&&Rf(t,["text"],d),t}function yw(e){const t={},n=Nf(e,["timeRangeFilter"]);if(null!=n&&Rf(t,["timeRangeFilter"],function(e){const t={},n=Nf(e,["startTime"]);null!=n&&Rf(t,["startTime"],n);const r=Nf(e,["endTime"]);return null!=r&&Rf(t,["endTime"],r),t}(n)),void 0!==Nf(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");return t}function bw(e){const t={},n=Nf(e,["dynamicRetrievalConfig"]);return null!=n&&Rf(t,["dynamicRetrievalConfig"],function(e){const t={},n=Nf(e,["mode"]);null!=n&&Rf(t,["mode"],n);const r=Nf(e,["dynamicThreshold"]);return null!=r&&Rf(t,["dynamicThreshold"],r),t}(n)),t}function ww(e){const t={},n=Nf(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["behavior"]);null!=n&&Rf(t,["behavior"],n);const r=Nf(e,["description"]);null!=r&&Rf(t,["description"],r);const i=Nf(e,["name"]);null!=i&&Rf(t,["name"],i);const o=Nf(e,["parameters"]);null!=o&&Rf(t,["parameters"],o);const s=Nf(e,["parametersJsonSchema"]);null!=s&&Rf(t,["parametersJsonSchema"],s);const a=Nf(e,["response"]);null!=a&&Rf(t,["response"],a);const l=Nf(e,["responseJsonSchema"]);return null!=l&&Rf(t,["responseJsonSchema"],l),t}(e))),Rf(t,["functionDeclarations"],e)}if(void 0!==Nf(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=Nf(e,["googleSearch"]);null!=r&&Rf(t,["googleSearch"],yw(r));const i=Nf(e,["googleSearchRetrieval"]);if(null!=i&&Rf(t,["googleSearchRetrieval"],bw(i)),void 0!==Nf(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Nf(e,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Nf(e,["urlContext"])&&Rf(t,["urlContext"],{});const o=Nf(e,["computerUse"]);null!=o&&Rf(t,["computerUse"],function(e){const t={},n=Nf(e,["environment"]);return null!=n&&Rf(t,["environment"],n),t}(o));const s=Nf(e,["codeExecution"]);return null!=s&&Rf(t,["codeExecution"],s),t}function _w(e){const t={},n=Nf(e,["automaticActivityDetection"]);null!=n&&Rf(t,["automaticActivityDetection"],function(e){const t={},n=Nf(e,["disabled"]);null!=n&&Rf(t,["disabled"],n);const r=Nf(e,["startOfSpeechSensitivity"]);null!=r&&Rf(t,["startOfSpeechSensitivity"],r);const i=Nf(e,["endOfSpeechSensitivity"]);null!=i&&Rf(t,["endOfSpeechSensitivity"],i);const o=Nf(e,["prefixPaddingMs"]);null!=o&&Rf(t,["prefixPaddingMs"],o);const s=Nf(e,["silenceDurationMs"]);return null!=s&&Rf(t,["silenceDurationMs"],s),t}(n));const r=Nf(e,["activityHandling"]);null!=r&&Rf(t,["activityHandling"],r);const i=Nf(e,["turnCoverage"]);return null!=i&&Rf(t,["turnCoverage"],i),t}function xw(e){const t={},n=Nf(e,["triggerTokens"]);null!=n&&Rf(t,["triggerTokens"],n);const r=Nf(e,["slidingWindow"]);return null!=r&&Rf(t,["slidingWindow"],function(e){const t={},n=Nf(e,["targetTokens"]);return null!=n&&Rf(t,["targetTokens"],n),t}(r)),t}function Sw(e,t){const n=Nf(e,["generationConfig"]);void 0!==t&&null!=n&&Rf(t,["setup","generationConfig"],n);const r=Nf(e,["responseModalities"]);void 0!==t&&null!=r&&Rf(t,["setup","generationConfig","responseModalities"],r);const i=Nf(e,["temperature"]);void 0!==t&&null!=i&&Rf(t,["setup","generationConfig","temperature"],i);const o=Nf(e,["topP"]);void 0!==t&&null!=o&&Rf(t,["setup","generationConfig","topP"],o);const s=Nf(e,["topK"]);void 0!==t&&null!=s&&Rf(t,["setup","generationConfig","topK"],s);const a=Nf(e,["maxOutputTokens"]);void 0!==t&&null!=a&&Rf(t,["setup","generationConfig","maxOutputTokens"],a);const l=Nf(e,["mediaResolution"]);void 0!==t&&null!=l&&Rf(t,["setup","generationConfig","mediaResolution"],l);const u=Nf(e,["seed"]);void 0!==t&&null!=u&&Rf(t,["setup","generationConfig","seed"],u);const c=Nf(e,["speechConfig"]);void 0!==t&&null!=c&&Rf(t,["setup","generationConfig","speechConfig"],function(e){const t={},n=Nf(e,["voiceConfig"]);null!=n&&Rf(t,["voiceConfig"],mw(n));const r=Nf(e,["multiSpeakerVoiceConfig"]);null!=r&&Rf(t,["multiSpeakerVoiceConfig"],gw(r));const i=Nf(e,["languageCode"]);return null!=i&&Rf(t,["languageCode"],i),t}(vg(c)));const d=Nf(e,["enableAffectiveDialog"]);void 0!==t&&null!=d&&Rf(t,["setup","generationConfig","enableAffectiveDialog"],d);const h=Nf(e,["systemInstruction"]);void 0!==t&&null!=h&&Rf(t,["setup","systemInstruction"],function(e){const t={},n=Nf(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>vw(e))),Rf(t,["parts"],e)}const r=Nf(e,["role"]);return null!=r&&Rf(t,["role"],r),t}(dg(h)));const p=Nf(e,["tools"]);if(void 0!==t&&null!=p){let e=bg(p);Array.isArray(e)&&(e=e.map(e=>ww(yg(e)))),Rf(t,["setup","tools"],e)}const f=Nf(e,["sessionResumption"]);void 0!==t&&null!=f&&Rf(t,["setup","sessionResumption"],function(e){const t={},n=Nf(e,["handle"]);if(null!=n&&Rf(t,["handle"],n),void 0!==Nf(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(f));const m=Nf(e,["inputAudioTranscription"]);void 0!==t&&null!=m&&Rf(t,["setup","inputAudioTranscription"],{});const g=Nf(e,["outputAudioTranscription"]);void 0!==t&&null!=g&&Rf(t,["setup","outputAudioTranscription"],{});const v=Nf(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&Rf(t,["setup","realtimeInputConfig"],_w(v));const y=Nf(e,["contextWindowCompression"]);void 0!==t&&null!=y&&Rf(t,["setup","contextWindowCompression"],xw(y));const b=Nf(e,["proactivity"]);return void 0!==t&&null!=b&&Rf(t,["setup","proactivity"],function(e){const t={},n=Nf(e,["proactiveAudio"]);return null!=n&&Rf(t,["proactiveAudio"],n),t}(b)),{}}function Ew(e,t,n){const r=Nf(t,["expireTime"]);void 0!==n&&null!=r&&Rf(n,["expireTime"],r);const i=Nf(t,["newSessionExpireTime"]);void 0!==n&&null!=i&&Rf(n,["newSessionExpireTime"],i);const o=Nf(t,["uses"]);void 0!==n&&null!=o&&Rf(n,["uses"],o);const s=Nf(t,["liveConnectConstraints"]);void 0!==n&&null!=s&&Rf(n,["bidiGenerateContentSetup"],function(e,t){const n={},r=Nf(t,["model"]);null!=r&&Rf(n,["setup","model"],eg(e,r));const i=Nf(t,["config"]);return null!=i&&Rf(n,["config"],Sw(i,n)),n}(e,s));const a=Nf(t,["lockAdditionalFields"]);return void 0!==n&&null!=a&&Rf(n,["fieldMask"],a),{}}function Tw(e,t){let n=null;const r=e.bidiGenerateContentSetup;if("object"===typeof r&&null!==r&&"setup"in r){const t=r.setup;"object"===typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==r&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const r=function(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if("object"===typeof r&&null!=r&&Object.keys(r).length>0){const e=Object.keys(r).map(e=>"".concat(n,".").concat(e));t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null===t||void 0===t?void 0:t.lockAdditionalFields)&&0===(null===t||void 0===t?void 0:t.lockAdditionalFields.length))r?e.fieldMask=r:delete e.fieldMask;else if((null===t||void 0===t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==i&&Array.isArray(i)&&i.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];i.length>0&&(n=i.map(e=>t.includes(e)?"generationConfig.".concat(e):e));const o=[];r&&o.push(r),n.length>0&&o.push(...n),o.length>0?e.fieldMask=o.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==i&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class Cw extends If{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},r=Nf(t,["config"]);return null!=r&&Rf(n,["config"],Ew(e,r,n)),n}(this.apiClient,e);i=Pf("auth_tokens",s._url),o=s._query,delete s.config,delete s._url,delete s._query;const a=Tw(s,e.config);return r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>function(e){const t={},n=Nf(e,["name"]);return null!=n&&Rf(t,["name"],n),t}(e))}}}function kw(e){const t={},n=Nf(e,["config"]);return null!=n&&Rf(t,["config"],function(e,t){const n=Nf(e,["pageSize"]);void 0!==t&&null!=n&&Rf(t,["_query","pageSize"],n);const r=Nf(e,["pageToken"]);void 0!==t&&null!=r&&Rf(t,["_query","pageToken"],r);const i=Nf(e,["filter"]);return void 0!==t&&null!=i&&Rf(t,["_query","filter"],i),{}}(n,t)),t}function Aw(e){const t={};if(void 0!==Nf(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==Nf(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=Nf(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["textInput"]);null!=n&&Rf(t,["textInput"],n);const r=Nf(e,["output"]);return null!=r&&Rf(t,["output"],r),t}(e))),Rf(t,["examples","examples"],e)}return t}function Ow(e){const t={},n=Nf(e,["baseModel"]);null!=n&&Rf(t,["baseModel"],n);const r=Nf(e,["preTunedModel"]);null!=r&&Rf(t,["preTunedModel"],r);const i=Nf(e,["trainingDataset"]);null!=i&&Rf(t,["tuningTask","trainingData"],Aw(i));const o=Nf(e,["config"]);return null!=o&&Rf(t,["config"],function(e,t){const n={};if(void 0!==Nf(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const r=Nf(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=r&&Rf(t,["displayName"],r),void 0!==Nf(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const i=Nf(e,["epochCount"]);void 0!==t&&null!=i&&Rf(t,["tuningTask","hyperparameters","epochCount"],i);const o=Nf(e,["learningRateMultiplier"]);if(null!=o&&Rf(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),void 0!==Nf(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==Nf(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==Nf(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const s=Nf(e,["batchSize"]);void 0!==t&&null!=s&&Rf(t,["tuningTask","hyperparameters","batchSize"],s);const a=Nf(e,["learningRate"]);if(void 0!==t&&null!=a&&Rf(t,["tuningTask","hyperparameters","learningRate"],a),void 0!==Nf(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");return n}(o,t)),t}function Iw(e){const t={},n=Nf(e,["config"]);return null!=n&&Rf(t,["config"],function(e,t){const n=Nf(e,["pageSize"]);void 0!==t&&null!=n&&Rf(t,["_query","pageSize"],n);const r=Nf(e,["pageToken"]);void 0!==t&&null!=r&&Rf(t,["_query","pageToken"],r);const i=Nf(e,["filter"]);return void 0!==t&&null!=i&&Rf(t,["_query","filter"],i),{}}(n,t)),t}function Pw(e,t){const n={},r=Nf(e,["validationDataset"]);void 0!==t&&null!=r&&Rf(t,["supervisedTuningSpec"],function(e,t){const n={},r=Nf(e,["gcsUri"]);null!=r&&Rf(n,["validationDatasetUri"],r);const i=Nf(e,["vertexDatasetResource"]);return void 0!==t&&null!=i&&Rf(t,["supervisedTuningSpec","trainingDatasetUri"],i),n}(r,n));const i=Nf(e,["tunedModelDisplayName"]);void 0!==t&&null!=i&&Rf(t,["tunedModelDisplayName"],i);const o=Nf(e,["description"]);void 0!==t&&null!=o&&Rf(t,["description"],o);const s=Nf(e,["epochCount"]);void 0!==t&&null!=s&&Rf(t,["supervisedTuningSpec","hyperParameters","epochCount"],s);const a=Nf(e,["learningRateMultiplier"]);void 0!==t&&null!=a&&Rf(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=Nf(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=l&&Rf(t,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=Nf(e,["preTunedModelCheckpointId"]);null!=u&&Rf(n,["preTunedModel","checkpointId"],u);const c=Nf(e,["adapterSize"]);if(void 0!==t&&null!=c&&Rf(t,["supervisedTuningSpec","hyperParameters","adapterSize"],c),void 0!==Nf(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==Nf(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const d=Nf(e,["labels"]);return void 0!==t&&null!=d&&Rf(t,["labels"],d),n}function Rw(e){const t={},n=Nf(e,["baseModel"]);null!=n&&Rf(t,["baseModel"],n);const r=Nf(e,["preTunedModel"]);null!=r&&Rf(t,["preTunedModel"],r);const i=Nf(e,["trainingDataset"]);null!=i&&Rf(t,["supervisedTuningSpec","trainingDatasetUri"],function(e,t){const n=Nf(e,["gcsUri"]);void 0!==t&&null!=n&&Rf(t,["supervisedTuningSpec","trainingDatasetUri"],n);const r=Nf(e,["vertexDatasetResource"]);if(void 0!==t&&null!=r&&Rf(t,["supervisedTuningSpec","trainingDatasetUri"],r),void 0!==Nf(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.");return{}}(i,t));const o=Nf(e,["config"]);return null!=o&&Rf(t,["config"],Pw(o,t)),t}function Nw(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["name"]);null!=r&&Rf(t,["name"],r);const i=Nf(e,["state"]);null!=i&&Rf(t,["state"],_g(i));const o=Nf(e,["createTime"]);null!=o&&Rf(t,["createTime"],o);const s=Nf(e,["tuningTask","startTime"]);null!=s&&Rf(t,["startTime"],s);const a=Nf(e,["tuningTask","completeTime"]);null!=a&&Rf(t,["endTime"],a);const l=Nf(e,["updateTime"]);null!=l&&Rf(t,["updateTime"],l);const u=Nf(e,["description"]);null!=u&&Rf(t,["description"],u);const c=Nf(e,["baseModel"]);null!=c&&Rf(t,["baseModel"],c);const d=Nf(e,["_self"]);null!=d&&Rf(t,["tunedModel"],function(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["model"],n);const r=Nf(e,["name"]);return null!=r&&Rf(t,["endpoint"],r),t}(d));const h=Nf(e,["customBaseModel"]);null!=h&&Rf(t,["customBaseModel"],h);const p=Nf(e,["experiment"]);null!=p&&Rf(t,["experiment"],p);const f=Nf(e,["labels"]);null!=f&&Rf(t,["labels"],f);const m=Nf(e,["outputUri"]);null!=m&&Rf(t,["outputUri"],m);const g=Nf(e,["pipelineJob"]);null!=g&&Rf(t,["pipelineJob"],g);const v=Nf(e,["serviceAccount"]);null!=v&&Rf(t,["serviceAccount"],v);const y=Nf(e,["tunedModelDisplayName"]);return null!=y&&Rf(t,["tunedModelDisplayName"],y),t}function Mw(e){const t={},n=Nf(e,["model"]);null!=n&&Rf(t,["model"],n);const r=Nf(e,["endpoint"]);null!=r&&Rf(t,["endpoint"],r);const i=Nf(e,["checkpoints"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=Nf(e,["checkpointId"]);null!=n&&Rf(t,["checkpointId"],n);const r=Nf(e,["epoch"]);null!=r&&Rf(t,["epoch"],r);const i=Nf(e,["step"]);null!=i&&Rf(t,["step"],i);const o=Nf(e,["endpoint"]);return null!=o&&Rf(t,["endpoint"],o),t}(e))),Rf(t,["checkpoints"],e)}return t}function Dw(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["name"]);null!=r&&Rf(t,["name"],r);const i=Nf(e,["state"]);null!=i&&Rf(t,["state"],_g(i));const o=Nf(e,["createTime"]);null!=o&&Rf(t,["createTime"],o);const s=Nf(e,["startTime"]);null!=s&&Rf(t,["startTime"],s);const a=Nf(e,["endTime"]);null!=a&&Rf(t,["endTime"],a);const l=Nf(e,["updateTime"]);null!=l&&Rf(t,["updateTime"],l);const u=Nf(e,["error"]);null!=u&&Rf(t,["error"],u);const c=Nf(e,["description"]);null!=c&&Rf(t,["description"],c);const d=Nf(e,["baseModel"]);null!=d&&Rf(t,["baseModel"],d);const h=Nf(e,["tunedModel"]);null!=h&&Rf(t,["tunedModel"],Mw(h));const p=Nf(e,["preTunedModel"]);null!=p&&Rf(t,["preTunedModel"],p);const f=Nf(e,["supervisedTuningSpec"]);null!=f&&Rf(t,["supervisedTuningSpec"],f);const m=Nf(e,["tuningDataStats"]);null!=m&&Rf(t,["tuningDataStats"],m);const g=Nf(e,["encryptionSpec"]);null!=g&&Rf(t,["encryptionSpec"],g);const v=Nf(e,["partnerModelTuningSpec"]);null!=v&&Rf(t,["partnerModelTuningSpec"],v);const y=Nf(e,["customBaseModel"]);null!=y&&Rf(t,["customBaseModel"],y);const b=Nf(e,["experiment"]);null!=b&&Rf(t,["experiment"],b);const w=Nf(e,["labels"]);null!=w&&Rf(t,["labels"],w);const _=Nf(e,["outputUri"]);null!=_&&Rf(t,["outputUri"],_);const x=Nf(e,["pipelineJob"]);null!=x&&Rf(t,["pipelineJob"],x);const S=Nf(e,["serviceAccount"]);null!=S&&Rf(t,["serviceAccount"],S);const E=Nf(e,["tunedModelDisplayName"]);return null!=E&&Rf(t,["tunedModelDisplayName"],E),t}class jw extends If{constructor(e){var t;super(),t=this,this.apiClient=e,this.get=async e=>await this.getInternal(e),this.list=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sv(Pm.PAGED_ITEM_TUNING_JOBS,e=>t.listInternal(e),await t.listInternal(e),e)},this.tune=async e=>{if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const t={tunedModelName:e.baseModel},n=Object.assign(Object.assign({},e),{preTunedModel:t});return n.baseModel=void 0,await this.tuneInternal(n)}{const t=Object.assign({},e);return await this.tuneInternal(t)}}{const t=Object.assign({},e),n=await this.tuneMldevInternal(t);let r="";void 0!==n.metadata&&void 0!==n.metadata.tunedModel?r=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(r=n.name.split("/operations/")[0]);return{name:r,state:nm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["_url","name"],n);const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);return s=Pf("{name}",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>Dw(e))}{const t=function(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["_url","name"],n);const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);return s=Pf("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>Nw(e))}}async listInternal(e){var t,n,r,i;let o,s="",a={};if(this.apiClient.isVertexAI()){const r=Iw(e);return s=Pf("tuningJobs",r._url),a=r._query,delete r.config,delete r._url,delete r._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["tuningJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Dw(e))),Rf(t,["tuningJobs"],e)}return t}(e),n=new Gm;return Object.assign(n,t),n})}{const t=kw(e);return s=Pf("tunedModels",t._url),a=t._query,delete t.config,delete t._url,delete t._query,o=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),o.then(e=>{const t=function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["nextPageToken"]);null!=r&&Rf(t,["nextPageToken"],r);const i=Nf(e,["tunedModels"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>Nw(e))),Rf(t,["tuningJobs"],e)}return t}(e),n=new Gm;return Object.assign(n,t),n})}}async cancel(e){var t,n,r,i;let o="",s={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["_url","name"],n);const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);o=Pf("{name}:cancel",r._url),s=r._query,delete r.config,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e){const t={},n=Nf(e,["name"]);null!=n&&Rf(t,["_url","name"],n);const r=Nf(e,["config"]);return null!=r&&Rf(t,["config"],r),t}(e);o=Pf("{name}:cancel",t._url),s=t._query,delete t.config,delete t._url,delete t._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal})}}async tuneInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI()){const s=Rw(e);return i=Pf("tuningJobs",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>Dw(e))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Ow(e);return i=Pf("tunedModels",s._url),o=s._query,delete s.config,delete s._url,delete s._query,r=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>function(e){const t={},n=Nf(e,["sdkHttpResponse"]);null!=n&&Rf(t,["sdkHttpResponse"],n);const r=Nf(e,["name"]);null!=r&&Rf(t,["name"],r);const i=Nf(e,["metadata"]);null!=i&&Rf(t,["metadata"],i);const o=Nf(e,["done"]);null!=o&&Rf(t,["done"],o);const s=Nf(e,["error"]);return null!=s&&Rf(t,["error"],s),t}(e))}}}class Lw{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Uw="x-goog-upload-status";function Fw(e){return new Promise(t=>setTimeout(t,e))}class Bw{async upload(e,t,n){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r,i,o;let s=0,a=0,l=new Rm(new Response),u="upload";for(s=e.size;a<s;){const o=Math.min(8388608,s-a),c=e.slice(a,a+o);a+o>=s&&(u+=", finalize");let d=0,h=1e3;for(;d<3&&(l=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(o)}}}),!(null===(r=null===l||void 0===l?void 0:l.headers)||void 0===r?void 0:r[Uw]));)d++,await Fw(h),h*=2;if(a+=o,"active"!==(null===(i=null===l||void 0===l?void 0:l.headers)||void 0===i?void 0:i[Uw]))break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const c=await(null===l||void 0===l?void 0:l.json());if("final"!==(null===(o=null===l||void 0===l?void 0:l.headers)||void 0===o?void 0:o[Uw]))throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}(e,t,n)}async stat(e){if("string"===typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}class Vw{create(e,t,n){return new qw(e,t,n)}}class qw{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const zw="x-goog-api-key";class Hw{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(null===e.get(zw)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(zw,this.apiKey)}}}class Gw{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=Of(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const r=new Hw(this.apiKey);this.apiClient=new $b({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:"gl-node/web",uploader:new Bw,downloader:new Lw}),this.models=new pw(this.apiClient),this.live=new aw(this.apiClient,r,new Vw),this.batches=new av(this.apiClient),this.chats=new Fv(this.models,this.apiClient),this.caches=new Pv(this.apiClient),this.files=new Gv(this.apiClient),this.operations=new fw(this.apiClient),this.authTokens=new Cw(this.apiClient),this.tunings=new jw(this.apiClient)}}class Ww extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class Jw extends Ww{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Kw extends Ww{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Yw extends Ww{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xw;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Xw||(Xw={}));var $w=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(nT){o(nT)}}function a(e){try{l(r.throw(e))}catch(nT){o(nT)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};class Qw{constructor(e){let{headers:t={},customFetch:r,region:i=Xw.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return $w(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let s={},{region:a}=t;a||(a=this.region);const l=new URL("".concat(this.url,"/").concat(e));let u;a&&"any"!==a&&(s["x-region"]=a,l.searchParams.set("forceFunctionRegion",a)),o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",u=o):"string"===typeof o?(s["Content-Type"]="text/plain",u=o):"undefined"!==typeof FormData&&o instanceof FormData?u=o:(s["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),r),body:u}).catch(e=>{throw new Jw(e)}),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new Kw(c);if(!c.ok)throw new Yw(c);let h,p=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===p?yield c.json():"application/octet-stream"===p?yield c.blob():"text/event-stream"===p?c:"multipart/form-data"===p?yield c.formData():yield c.text(),{data:h,error:null,response:c}}catch(r){return{data:null,error:r,response:r instanceof Yw||r instanceof Kw?r.context:void 0}}})}}var Zw=n(980);const{PostgrestClient:e_,PostgrestQueryBuilder:t_,PostgrestFilterBuilder:n_,PostgrestTransformBuilder:r_,PostgrestBuilder:i_,PostgrestError:o_}=Zw;const s_=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(rT){return!1}}},a_="realtime-js/".concat("2.15.5"),l_=1e4;var u_,c_,d_,h_,p_,f_;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(u_||(u_={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(c_||(c_={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(d_||(d_={})),function(e){e.websocket="websocket"}(h_||(h_={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(p_||(p_={}));class m_{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const s=n.decode(e.slice(o,o+r));o+=r;const a=n.decode(e.slice(o,o+i));o+=i;return{ref:null,topic:s,event:a,payload:JSON.parse(n.decode(e.slice(o,e.byteLength)))}}}class g_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(f_||(f_={}));const v_=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,i)=>(n[i]=y_(i,e,t,r),n),{})},y_=(e,t,n,r)=>{const i=t.find(t=>t.name===e),o=null===i||void 0===i?void 0:i.type,s=n[e];return o&&!r.includes(o)?b_(o,s):w_(s)},b_=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return E_(t,n)}switch(e){case f_.bool:return __(t);case f_.float4:case f_.float8:case f_.int2:case f_.int4:case f_.int8:case f_.numeric:case f_.oid:return x_(t);case f_.json:case f_.jsonb:return S_(t);case f_.timestamp:return T_(t);case f_.abstime:case f_.date:case f_.daterange:case f_.int4range:case f_.int8range:case f_.money:case f_.reltime:case f_.text:case f_.time:case f_.timestamptz:case f_.timetz:case f_.tsrange:case f_.tstzrange:default:return w_(t)}},w_=e=>e,__=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},x_=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},S_=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},E_=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const o=e.slice(1,n);try{r=JSON.parse("["+o+"]")}catch(i){r=o?o.split(","):[]}return r.map(e=>b_(t,e))}return e},T_=e=>"string"===typeof e?e.replace(" ","T"):e,C_=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class k_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l_;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var A_,O_,I_,P_;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(A_||(A_={}));class R_{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=R_.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=R_.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=R_.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),s={},a={};return this.map(i,(e,t)=>{o[e]||(a[e]=t)}),this.map(o,(e,t)=>{const n=i[e];if(n){const r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),o=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);o.length>0&&(s[e]=o),l.length>0&&(a[e]=l)}else s[e]=t}),this.syncDiff(i,{joins:s,leaves:a},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const o=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),o.length>0){const n=e[t].map(e=>e.presence_ref),r=o.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,o,r)}),this.map(o,(t,n)=>{let i=e[t];if(!i)return;const o=n.map(e=>e.presence_ref);i=i.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(O_||(O_={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(I_||(I_={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(P_||(P_={}));class N_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=c_.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new k_(this,d_.join,this.params,this.timeout),this.rejoinTimer=new g_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=c_.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=c_.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=c_.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=c_.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=c_.errored,this.rejoinTimer.scheduleTimeout())}),this._on(d_.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new R_(this),this.broadcastEndpointURL=C_(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==c_.closed){const{config:{broadcast:o,presence:s,private:a}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],u=!!this.bindings[I_.PRESENCE]&&this.bindings[I_.PRESENCE].length>0||!0===(null===(i=this.params.config.presence)||void 0===i?void 0:i.enabled),c={},d={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:u}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(P_.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(P_.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,i=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,o=[];for(let r=0;r<i;r++){const i=t[r],{filter:{event:s,schema:a,table:l,filter:u}}=i,c=n&&n[r];if(!c||c.event!==s||c.schema!==a||c.table!==l||c.filter!==u)return this.unsubscribe(),this.state=c_.errored,void(null===e||void 0===e||e(P_.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},i),{id:c.id}))}return this.bindings.postgres_changes=o,void(e&&e(P_.SUBSCRIBED))}null===e||void 0===e||e(P_.SUBSCRIBED)}).receive("error",t=>{this.state=c_.errored,null===e||void 0===e||e(P_.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(P_.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===c_.joined&&e===I_.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,i,o;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===o?void 0:o.ack)||n("ok"),s.receive("ok",()=>n("ok")),s.receive("error",()=>n("error")),s.receive("timeout",()=>n("timed out"))});{const{event:o,payload:s}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=c_.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(d_.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new k_(this,d_.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=c_.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new k_(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:s,error:a,leave:l,join:u}=d_;if(n&&[s,a,l,u].indexOf(o)>=0&&n!==this._joinRef())return;let c=this._onMessage(o,t,n);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===o}).map(e=>e.callback(c,n)):null===(i=this.bindings[o])||void 0===i||i.filter(e=>{var n,r,i,s,a,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,s=null===(n=e.filter)||void 0===n?void 0:n.event;return o&&(null===(r=t.ids)||void 0===r?void 0:r.includes(o))&&("*"===s||(null===s||void 0===s?void 0:s.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(a=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"===typeof c&&"ids"in c){const e=c.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:o}=e,s={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:o};c=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(c,n)})}_isClosed(){return this.state===c_.closed}_isJoined(){return this.state===c_.joined}_isJoining(){return this.state===c_.joining}_isLeaving(){return this.state===c_.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&N_.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(d_.close,{},e)}_onError(e){this._on(d_.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=c_.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=v_(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=v_(e.columns,e.old_record)),t}}const M_=()=>{},D_=25e3,j_=10,L_=100,U_=[1e3,2e3,5e3,1e4];class F_{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=l_,this.transport=null,this.heartbeatIntervalMs=D_,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=M_,this.ref=0,this.reconnectTimer=null,this.logger=M_,this.conn=null,this.sendBuffer=[],this.serializer=new m_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(h_.websocket),this.httpEndpoint=C_(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=s_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case u_.connecting:return p_.Connecting;case u_.open:return p_.Open;case u_.closing:return p_.Closing;default:return p_.Closed}}isConnected(){return this.connectionState()===p_.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new N_("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(i,")"),r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(nT){this.log("error","error in heartbeat callback",nT)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},L_)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(nT){this.log("error","error in heartbeat callback",nT)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(nT){this.log("error","error in heartbeat callback",nT)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(nT){this.log("error","error in heartbeat callback",nT)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:i}=e,o=i?"(".concat(i,")"):"",s=r.status||"";this.log("receive","".concat(s," ").concat(t," ").concat(n," ").concat(o).trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(d_.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:a_};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(d_.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(nT){this.log("error","error in ".concat(e," callback"),nT)}})}catch(nT){this.log("error","error triggering ".concat(e," callbacks"),nT)}}_setupReconnectionTimer(){this.reconnectTimer=new g_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},j_)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,i,o,s,a,l,u;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:l_,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:D_,this.worker=null!==(i=null===e||void 0===e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(o=null===e||void 0===e?void 0:e.accessToken)&&void 0!==o?o:null,this.heartbeatCallback=null!==(s=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==s?s:M_,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>U_[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null===e||void 0===e?void 0:e.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class B_ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function V_(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class q_ extends B_{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class z_ extends B_{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var H_=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(nT){o(nT)}}function a(e){try{l(r.throw(e))}catch(nT){o(nT)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const G_=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},W_=e=>{if(Array.isArray(e))return e.map(e=>W_(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const i=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[i]=W_(r)}),t};var J_=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(nT){o(nT)}}function a(e){try{l(r.throw(e))}catch(nT){o(nT)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const K_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Y_=(e,t,r)=>J_(void 0,void 0,void 0,function*(){const i=yield H_(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof i&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{const r=e.status||500,i=(null===n||void 0===n?void 0:n.statusCode)||r+"";t(new q_(K_(n),r,i))}).catch(e=>{t(new z_(K_(e),e))}):t(new z_(K_(e),e))}),X_=(e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,(null===t||void 0===t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n)):i};function $_(e,t,n,r,i,o){return J_(this,void 0,void 0,function*(){return new Promise((s,a)=>{e(n,X_(t,r,i,o)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>Y_(e,a,r))})})}function Q_(e,t,n,r){return J_(this,void 0,void 0,function*(){return $_(e,"GET",t,n,r)})}function Z_(e,t,n,r,i){return J_(this,void 0,void 0,function*(){return $_(e,"POST",t,r,i,n)})}function ex(e,t,n,r,i){return J_(this,void 0,void 0,function*(){return $_(e,"PUT",t,r,i,n)})}function tx(e,t,n,r,i){return J_(this,void 0,void 0,function*(){return $_(e,"DELETE",t,r,i,n)})}var nx=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(nT){o(nT)}}function a(e){try{l(r.throw(e))}catch(nT){o(nT)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const rx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ix={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ox{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=G_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return nx(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ix),r);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const a=o.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=n,s["cache-control"]="max-age=".concat(o.cacheControl),s["content-type"]=o.contentType,a&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null===r||void 0===r?void 0:r.headers)&&(s=Object.assign(Object.assign({},s),r.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield("PUT"==e?ex:Z_)(this.fetch,"".concat(this.url,"/object/").concat(u),i,Object.assign({headers:s},(null===o||void 0===o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{data:{path:l,id:c.Id,fullPath:c.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(V_(i))return{data:null,error:i};throw i}})}upload(e,t,n){return nx(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return nx(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),s=new URL(this.url+"/object/upload/sign/".concat(o));s.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ix.upsert},r),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]="max-age=".concat(t.cacheControl),o["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield ex(this.fetch,s.toString(),e,{headers:o})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(V_(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return nx(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield Z_(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),o=new URL(this.url+i.url),s=o.searchParams.get("token");if(!s)throw new B_("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(V_(n))return{data:null,error:n};throw n}})}update(e,t,n){return nx(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return nx(this,void 0,void 0,function*(){try{return{data:yield Z_(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(V_(r))return{data:null,error:r};throw r}})}copy(e,t,n){return nx(this,void 0,void 0,function*(){try{return{data:{path:(yield Z_(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(V_(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return nx(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Z_(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const o=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return i={signedUrl:encodeURI("".concat(this.url).concat(i.signedURL).concat(o))},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(V_(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return nx(this,void 0,void 0,function*(){try{const r=yield Z_(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(i)):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(V_(r))return{data:null,error:r};throw r}})}download(e,t){return nx(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield Q_(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(i),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(V_(o))return{data:null,error:o};throw o}})}info(e){return nx(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Q_(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:W_(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(V_(n))return{data:null,error:n};throw n}})}exists(e){return nx(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return J_(this,void 0,void 0,function*(){return $_(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(V_(n)&&n instanceof z_){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==i&&r.push(i);const o="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&r.push(s);let a=r.join("&");return""!==a&&(a="?".concat(a)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(o,"/public/").concat(n).concat(a))}}}remove(e){return nx(this,void 0,void 0,function*(){try{return{data:yield tx(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(V_(t))return{data:null,error:t};throw t}})}list(e,t,n){return nx(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},rx),t),{prefix:e||""});return{data:yield Z_(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(V_(r))return{data:null,error:r};throw r}})}listV2(e,t){return nx(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Z_(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(V_(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const sx={"X-Client-Info":"storage-js/".concat("2.12.1")};var ax=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(nT){o(nT)}}function a(e){try{l(r.throw(e))}catch(nT){o(nT)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};class lx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const i=new URL(e);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href,this.headers=Object.assign(Object.assign({},sx),t),this.fetch=G_(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ax(this,void 0,void 0,function*(){try{return{data:yield Q_(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(V_(e))return{data:null,error:e};throw e}})}getBucket(e){return ax(this,void 0,void 0,function*(){try{return{data:yield Q_(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(V_(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ax(this,void 0,void 0,function*(){try{return{data:yield Z_(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(V_(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ax(this,void 0,void 0,function*(){try{return{data:yield ex(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(V_(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ax(this,void 0,void 0,function*(){try{return{data:yield Z_(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(V_(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ax(this,void 0,void 0,function*(){try{return{data:yield tx(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(V_(t))return{data:null,error:t};throw t}})}}class ux extends lx{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ox(this.url,this.headers,e,this.fetch)}}let cx="";cx="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const dx={headers:{"X-Client-Info":"supabase-js-".concat(cx,"/").concat("2.57.4")}},hx={schema:"public"},px={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fx={};var mx=n(630),gx=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(nT){o(nT)}}function a(e){try{l(r.throw(e))}catch(nT){o(nT)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const vx=e=>{let t;return t=e||("undefined"===typeof fetch?mx.default:fetch),function(){return t(...arguments)}},yx=(e,t,n)=>{const r=vx(n),i="undefined"===typeof Headers?mx.Headers:Headers;return(n,o)=>gx(void 0,void 0,void 0,function*(){var s;const a=null!==(s=yield t())&&void 0!==s?s:e;let l=new i(null===o||void 0===o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(a)),r(n,Object.assign(Object.assign({},o),{headers:l}))})};var bx=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(nT){o(nT)}}function a(e){try{l(r.throw(e))}catch(nT){o(nT)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const wx="2.71.1",_x=3e4,xx=9e4,Sx={"X-Client-Info":"gotrue-js/".concat(wx)},Ex="X-Supabase-Api-Version",Tx={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Cx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class kx extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Ax(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Ox extends kx{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Ix extends kx{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Px extends kx{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Rx extends Px{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Nx extends Px{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mx extends Px{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Dx extends Px{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jx extends Px{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lx extends Px{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ux(e){return Ax(e)&&"AuthRetryableFetchError"===e.name}class Fx extends Px{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Bx extends Px{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qx=" \t\n\r=".split(""),zx=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qx.length;t+=1)e[qx[t].charCodeAt(0)]=-2;for(let t=0;t<Vx.length;t+=1)e[Vx[t].charCodeAt(0)]=t;return e})();function Hx(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Vx[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Vx[e]),t.queuedBits-=6}}function Gx(e,t,n){const r=zx[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Wx(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let s=0;s<e.length;s+=1)Gx(e.charCodeAt(s),i,o);return t.join("")}function Jx(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Kx(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Jx(r,t)}}function Yx(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)Gx(e.charCodeAt(i),n,r);return new Uint8Array(t)}function Xx(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Hx(e,n,r)),Hx(null,n,r),t.join("")}const $x=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Qx={tested:!1,writable:!1},Zx=()=>{if(!$x())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(nT){return!1}if(Qx.tested)return Qx.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qx.tested=!0,Qx.writable=!0}catch(nT){Qx.tested=!0,Qx.writable=!1}return Qx.writable};const eS=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},tS=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},nS=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(rT){return n}},rS=async(e,t)=>{await e.removeItem(t)};class iS{constructor(){this.promise=new iS.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function oS(e){const t=e.split(".");if(3!==t.length)throw new Bx("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Cx.test(t[n]))throw new Bx("JWT not in base64url format");return{header:JSON.parse(Wx(t[0])),payload:JSON.parse(Wx(t[1])),signature:Yx(t[2]),raw:{header:t[0],payload:t[1]}}}function sS(e){return("0"+e.toString(16)).substr(-2)}async function aS(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,sS).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await tS(e,"".concat(t,"-code-verifier"),i);const o=await aS(r);return[o,r===o?"plain":"s256"]}iS.promiseConstructor=Promise;const uS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const cS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function dS(e){if(!cS.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hS(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function pS(e){return JSON.parse(JSON.stringify(e))}var fS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const mS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gS=[502,503,504];async function vS(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Lx(mS(e),0);if(gS.includes(e.status))throw new Lx(mS(e),e.status);let r,i;try{r=await e.json()}catch(nT){throw new Ix(mS(nT),nT)}const o=function(e){const t=e.headers.get(Ex);if(!t)return null;if(!t.match(uS))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(nT){return null}}(e);if(o&&o.getTime()>=Tx.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?i=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new Fx(mS(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Rx}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Fx(mS(r),e.status,r.weak_password.reasons);throw new Ox(mS(r),e.status||500,i)}async function yS(e,t,n,r){var i;const o=Object.assign({},null===r||void 0===r?void 0:r.headers);o[Ex]||(o[Ex]=Tx.name),(null===r||void 0===r?void 0:r.jwt)&&(o.Authorization="Bearer ".concat(r.jwt));const s=null!==(i=null===r||void 0===r?void 0:r.query)&&void 0!==i?i:{};(null===r||void 0===r?void 0:r.redirectTo)&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await async function(e,t,n,r,i,o){const s=((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,o);let a;try{a=await e(n,Object.assign({},s))}catch(nT){throw console.error(nT),new Lx(mS(nT),0)}a.ok||await vS(a);if(null===r||void 0===r?void 0:r.noResolveJson)return a;try{return await a.json()}catch(nT){await vS(nT)}}(e,t,n+a,{headers:o,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function bS(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function wS(e){const t=bS(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function _S(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function xS(e){return{data:e,error:null}}function SS(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,s=fS(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},user:Object.assign({},s)},error:null}}function ES(e){return e}const TS=["global","local","others"];var CS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class kS{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=eS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TS[0];if(TS.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(TS.join(", ")));try{return await yS(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ax(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await yS(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:_S})}catch(n){if(Ax(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=CS(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await yS(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:SS,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Ax(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await yS(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:_S})}catch(t){if(Ax(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,s,a;try{const l={nextPage:null,lastPage:0,total:0},u=await yS(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:ES});if(u.error)throw u.error;const c=await u.json(),d=null!==(o=u.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(a=null===(s=u.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(l){if(Ax(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){dS(e);try{return await yS(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:_S})}catch(t){if(Ax(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){dS(e);try{return await yS(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:_S})}catch(n){if(Ax(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];dS(e);try{return await yS(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:_S})}catch(n){if(Ax(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){dS(e.userId);try{const{data:t,error:n}=await yS(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Ax(t))return{data:null,error:t};throw t}}async _deleteFactor(e){dS(e.userId),dS(e.id);try{return{data:await yS(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Ax(t))return{data:null,error:t};throw t}}}function AS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const OS=!!(globalThis&&Zx()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class IS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PS extends IS{}async function RS(e,t,n){OS&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),OS&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw OS&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new PS('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(OS)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(nT){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",nT)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}OS&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{OS&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(nT){"undefined"!==typeof self&&(self.globalThis=self)}}();const NS={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function MS(e,t,n){return await n()}const DS={};class jS{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jS.nextInstanceID,jS.nextInstanceID+=1,this.instanceID>0&&$x()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},NS),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new kS({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=eS(r.fetch),this.lock=r.lock||MS,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:$x()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=RS:this.lock=MS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Zx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=AS(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=AS(this.memoryStorage)),$x()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(nT){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",nT)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=DS[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){DS[this.storageKey]=Object.assign(Object.assign({},DS[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=DS[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){DS[this.storageKey]=Object.assign(Object.assign({},DS[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(wx,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(nT){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),$x()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Ax(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ax(t)?{error:t}:{error:new Ix("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await yS(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:bS}),{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};const a=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(Ax(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:o}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await lS(this.storage,this.storageKey)),i=await yS(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:s,code_challenge_method:a},xform:bS})}else{if(!("phone"in e))throw new Mx("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:s}=e;i=await yS(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:o,data:null!==(n=null===s||void 0===s?void 0:s.data)&&void 0!==n?n:{},channel:null!==(r=null===s||void 0===s?void 0:s.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:bS})}}const{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};const a=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(Ax(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await yS(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:wS})}else{if(!("phone"in e))throw new Mx("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await yS(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:wS})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Nx}}catch(t){if(Ax(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,r,i,o,s,a,l,u,c,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let v;if($x())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(y.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(y.href),"Issued At: ".concat(null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(c=null===(u=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===u?void 0:u.resources)||void 0===c?void 0:c.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await yS(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Xx(f)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:bS});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Nx}}catch(m){if(Ax(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await nS(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:i}=await yS(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:bS});if(await rS(this.storage,"".concat(this.storageKey,"-code-verifier")),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new Nx}}catch(i){if(Ax(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,s=await yS(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:bS}),{data:a,error:l}=s;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new Nx}}catch(t){if(Ax(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:r,options:i}=e;let o=null,s=null;"pkce"===this.flowType&&([o,s]=await lS(this.storage,this.storageKey));const{error:a}=await yS(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:s},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:n}=e,{data:s,error:a}=await yS(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(o=null===n||void 0===n?void 0:n.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:a}}throw new Mx("You must provide either an email or phone number.")}catch(s){if(Ax(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:o,error:s}=await yS(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:bS});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,l=o.user;return(null===a||void 0===a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(r){if(Ax(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return"pkce"===this.flowType&&([i,o]=await lS(this.storage,this.storageKey)),await yS(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:xS})}catch(i){if(Ax(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Rx;const{error:r}=await yS(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Ax(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await yS(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:s}=await yS(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:s}}throw new Mx("You must provide either an email or phone number and a type")}catch(t){if(Ax(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(nT){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(nT){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await nS(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<xx;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await nS(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=hS()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await yS(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:_S}):await this._useSession(async e=>{var t,n,r;const{data:i,error:o}=e;if(o)throw o;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await yS(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:_S}):{data:{user:null},error:new Rx}})}catch(t){if(Ax(t))return function(e){return Ax(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await rS(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Rx;const o=r.session;let s=null,a=null;"pkce"===this.flowType&&null!=e.email&&([s,a]=await lS(this.storage,this.storageKey));const{data:l,error:u}=await yS(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:a}),jwt:o.access_token,xform:_S});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ax(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rx;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=oS(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Ax(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Rx;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ax(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!$x())throw new Dx("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Dx(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new jx("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Dx("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jx("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:s,expires_at:a,token_type:l}=e;if(!i||!s||!o||!l)throw new Dx("No session defined in URL");const u=Math.round(Date.now()/1e3),c=parseInt(s);let d=u+c;a&&(d=parseInt(a));const h=d-u;1e3*h<=_x&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(c,"s"));const p=d-c;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:f,error:m}=await this._getUser(i);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:c,expires_at:d,refresh_token:o,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(Ax(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await nS(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=null===(n=r.session)||void 0===n?void 0:n.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return Ax(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await rS(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await lS(this.storage,this.storageKey,!0));try{return await yS(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Ax(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Ax(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,i,o,s;const{data:a,error:l}=t;if(l)throw l;const u=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await yS(this.fetch,"GET",u,{headers:this.headers,jwt:null!==(s=null===(o=a.session)||void 0===o?void 0:o.access_token)&&void 0!==s?s:void 0})});if(r)throw r;return $x()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Ax(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await yS(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Ax(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await yS(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:bS})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ux(t)&&Date.now()+n-i<_x},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(nT){if(!r(i,nT))return void t(nT)}})()}))}catch(i){if(this._debug(t,"error",i),Ax(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),$x()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await nS(this.storage,this.storageKey);if(i&&this.userStorage){let t=await nS(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await tS(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:hS()}else if(i&&!i.user&&!i.user){const e=await nS(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(i.user=e.user,await rS(this.storage,this.storageKey+"-user"),await tS(this.storage,this.storageKey,i)):i.user=hS()}if(this._debug(n,"session from storage",i),!this._isValidSession(i))return this._debug(n,"session is not valid"),void(null!==i&&await this._removeSession());const o=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<xx;if(this._debug(n,"session has".concat(o?"":" not"," expired with margin of ").concat(xx,"s")),o){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),Ux(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return this._debug(n,"error",i),void console.error(i)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Rx;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new iS;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Rx;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),Ax(i)){const e={session:null,error:i};return Ux(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(nT){r.push(nT)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await tS(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=pS(e);await tS(this.storage,this.storageKey,r)}else{const e=pS(t);await tS(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await rS(this.storage,this.storageKey),await rS(this.storage,this.storageKey+"-code-verifier"),await rS(this.storage,this.storageKey+"-user"),this.userStorage&&await rS(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$x()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(nT){console.error("removing visibilitychange callback failed",nT)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_x);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/_x);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(_x,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(nT){console.error("Auto refresh tick failed with error. This is likely a transient error.",nT)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(nT){if(!(nT.isAcquireTimeout||nT instanceof IS))throw nT;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$x()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await lS(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await yS(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Ax(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await yS(this.fetch,"POST","".concat(this.url,"/factors"),{body:s,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===a||void 0===a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code="data:image/svg+xml;utf-8,".concat(a.totp.qr_code)),{data:a,error:null})})}catch(t){if(Ax(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:s}=await yS(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})})}catch(t){if(Ax(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await yS(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Ax(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=oS(r.access_token);let s=null;o.aal&&(s=o.aal);let a=s;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(a="aal2");return{data:{currentLevel:s,nextLevel:a,currentAuthenticationMethods:o.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:i}=await yS(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(i)throw i;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:i,signature:o,raw:{header:s,payload:a}}=oS(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:o},error:null}}const u=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,c,o,function(e){const t=[];return Kx(e,e=>t.push(e)),new Uint8Array(t)}("".concat(s,".").concat(a))))throw new Bx("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(Ax(n))return{data:null,error:n};throw n}}}jS.nextInstanceID=0;const LS=jS;class US extends LS{constructor(e){super(e)}}var FS=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(nT){o(nT)}}function a(e){try{l(r.throw(e))}catch(nT){o(nT)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};class BS{constructor(e,t,n){var r,i,o;this.supabaseUrl=e,this.supabaseKey=t;const s=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a="sb-".concat(s.hostname.split(".")[0],"-auth-token"),l=function(e,t){var n,r;const{db:i,auth:o,realtime:s,global:a}=e,{db:l,auth:u,realtime:c,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},c),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===a||void 0===a?void 0:a.headers)&&void 0!==r?r:{})}),accessToken:()=>bx(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:hx,realtime:fx,auth:Object.assign(Object.assign({},px),{storageKey:a}),global:dx});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=l.global.headers)&&void 0!==i?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(o=l.auth)&&void 0!==o?o:{},this.headers,l.global.fetch),this.fetch=yx(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new e_(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new ux(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Qw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return FS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:s,userStorage:a,storageKey:l,flowType:u,lock:c,debug:d}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new US({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:s,userStorage:a,flowType:u,lock:c,debug:d,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new F_(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const VS=(e,t,n)=>new BS(e,t,n);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qS="https://imkpvbwxngyeqzkknssp.supabase.co",zS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlta3B2Ynd4bmd5ZXF6a2tuc3NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMzQ5NDcsImV4cCI6MjA3MzYxMDk0N30.I9h5KZuI7dBGkUS3eHwab8fyIIJMDQqk_2MVoRQr-1M",HS="AIzaSyB0MmJjgLLRDCSs89VkUTGRLLCeoP0djEc";const GS=qS&&zS?VS(qS,zS):null,WS=HS?new Gw({apiKey:HS}):null;async function JS(e){if(!WS)return console.error("Gemini API not configured"),null;for(let i=1;i<=3;i++)try{var t,n;return(null===(t=(await WS.models.embedContent({model:"gemini-embedding-001",contents:[e]})).embeddings)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.values)||null}catch(r){if(console.error("Error embedding text (attempt ".concat(i,"/").concat(3,"):"),r),3===i)return console.error("Failed to embed text after all retries"),null;await new Promise(e=>setTimeout(e,1e3*i))}return null}async function KS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!GS)return console.error("Supabase not configured"),[];try{const r=await async function(e){if(!GS)return console.error("Supabase not configured"),[];try{const{data:t,error:n}=await GS.rpc("get_pinned_memories_for_user",{user_id_param:e});return n?(console.error("Error fetching pinned memories:",n),[]):t||[]}catch(t){return console.error("Error in getPinnedMemories:",t),[]}}(t),i=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!GS)return console.error("Supabase not configured"),[];try{const r=await JS(e);if(!r)return console.error("Failed to generate query embedding"),[];const{data:i,error:o}=await GS.rpc("match_memories_for_user",{query_embedding:r,user_id_param:t,match_threshold:.3,match_count:n});return o?(console.error("Error fetching relevant memories:",o),[]):i||[]}catch(r){return console.error("Error in fetchRelevantMemories:",r),[]}}(e,t,n),o=new Set(r.map(e=>e.id)),s=i.filter(e=>!o.has(e.id));return[...r,...s.slice(0,n-r.length)]}catch(r){return console.error("Error in getMemoryContext:",r),[]}}const YS="https://imkpvbwxngyeqzkknssp.supabase.co",XS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlta3B2Ynd4bmd5ZXF6a2tuc3NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMzQ5NDcsImV4cCI6MjA3MzYxMDk0N30.I9h5KZuI7dBGkUS3eHwab8fyIIJMDQqk_2MVoRQr-1M",$S="AIzaSyB0MmJjgLLRDCSs89VkUTGRLLCeoP0djEc";const QS=YS&&XS?VS(YS,XS):null,ZS=$S?new Gw({apiKey:$S}):null;async function eE(e){if(!ZS||0===e.length)return"New Conversation";try{var t;const n=e.slice(0,5).map(e=>"".concat("user"===e.role?"User":"Assistant",": ").concat(e.content)).join("\n"),r="Based on this conversation preview, generate a short, descriptive title (max 50 characters) that captures the main topic or theme. Be concise and specific.\n\nConversation preview:\n".concat(n,'\n\nGenerate a title that would help someone quickly identify what this conversation is about. Examples:\n- "React Component Help"\n- "Database Setup Questions" \n- "Bug Fix Discussion"\n- "Project Planning"\n\nTitle:'),i=(null===(t=(await ZS.models.generateContent({model:"gemini-2.5-flash",contents:[{text:r}]})).text)||void 0===t?void 0:t.trim())||"New Conversation";return i.replace(/^["']|["']$/g,"").replace(/^Title:\s*/i,"").substring(0,50).trim()||"New Conversation"}catch(n){return console.error("Error generating conversation title:",n),"New Conversation"}}async function tE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"New Conversation";if(!QS)return console.error("Supabase not configured"),null;try{const{data:n,error:r}=await QS.rpc("create_conversation",{user_id_param:e,title_param:t});return r?(console.error("Error creating conversation:",r),null):n[0]}catch(n){return console.error("Error creating conversation:",n),null}}async function nE(e){if(!QS)return console.error("Supabase not configured"),[];try{const{data:t,error:n}=await QS.rpc("get_conversations_for_user",{user_id_param:e});return n?(console.error("Error getting conversations:",n),[]):t||[]}catch(t){return console.error("Error getting conversations:",t),[]}}async function rE(e){if(!QS)return console.error("Supabase not configured"),[];try{const{data:t,error:n}=await QS.rpc("get_messages_for_conversation",{conversation_id_param:e});return n?(console.error("Error getting messages:",n),[]):t||[]}catch(t){return console.error("Error getting messages:",t),[]}}async function iE(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!QS)return console.error("Supabase not configured"),null;try{const{data:o,error:s}=await QS.rpc("add_message_to_conversation",{conversation_id_param:e,user_id_param:t,role_param:n,content_param:r,metadata_param:i});if(s)return console.error("Error adding message:",s),console.error("Error details:",JSON.stringify(s,null,2)),console.error("Parameters:",{conversation_id_param:e,user_id_param:t,role_param:n,content_param:r.substring(0,100)+"...",metadata_param:i}),null;const a=await rE(e);console.log("[Conversation] Total messages: ".concat(a.length));let l=null;if(a.length>=3&&a.every(e=>"user"===e.role||"assistant"===e.role)){console.log("[Conversation] Triggering AI title generation...");const n=await eE(a);if(console.log('[Conversation] Generated title: "'.concat(n,'"')),"New Conversation"!==n){const r=await oE(e,t,n);console.log("[Conversation] Title update success: ".concat(r)),r&&(l=n)}}return{message:o[0],updatedTitle:l||void 0}}catch(o){return console.error("Error adding message:",o),null}}async function oE(e,t,n){if(!QS)return console.error("Supabase not configured"),!1;try{const{data:r,error:i}=await QS.rpc("update_conversation_title",{conversation_id_param:e,user_id_param:t,new_title:n});return i?(console.error("Error updating conversation title:",i),!1):r}catch(r){return console.error("Error updating conversation title:",r),!1}}async function sE(e){const t=await nE(e);if(0===t.length)return[];const n=t.find(e=>e.is_active)||t[0];return await rE(n.id)}async function aE(e,t){let n=(await nE(e)).find(e=>e.is_active);if(!n){const t=await tE(e,"New Conversation");if(!t)return void console.error("Failed to create conversation");n=t}await iE(n.id,e,t.role,t.content)}const lE="https://imkpvbwxngyeqzkknssp.supabase.co",uE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlta3B2Ynd4bmd5ZXF6a2tuc3NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMzQ5NDcsImV4cCI6MjA3MzYxMDk0N30.I9h5KZuI7dBGkUS3eHwab8fyIIJMDQqk_2MVoRQr-1M";const cE=lE&&uE?VS(lE,uE):null;async function dE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"medium";if(!cE)return console.error("Supabase not configured"),null;try{const{data:o,error:s}=await cE.from("tasks").insert([{user_id:e,title:t,description:n,due_date:r,priority:i}]).select();if(s)throw console.error("Error adding task:",s),s;return o[0]}catch(o){throw console.error("Error adding task:",o),o}}async function hE(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!cE)return console.error("Supabase not configured"),[];try{const{data:n,error:r}=await cE.rpc("get_tasks_for_user",{user_id_param:e,include_completed:t});if(r)throw console.error("Error getting tasks:",r),r;return n||[]}catch(n){throw console.error("Error getting tasks:",n),n}}async function pE(e){if(!cE)return console.error("Supabase not configured"),[];try{const{data:t,error:n}=await cE.rpc("get_overdue_tasks_for_user",{user_id_param:e});if(n)throw console.error("Error getting overdue tasks:",n),n;return t||[]}catch(t){throw console.error("Error getting overdue tasks:",t),t}}async function fE(e,t){if(!cE)return console.error("Supabase not configured"),null;try{const{data:n,error:r}=await cE.from("tasks").update({completed:!0,updated_at:(new Date).toISOString()}).eq("id",e).eq("user_id",t).select();if(r)throw console.error("Error completing task:",r),r;return n[0]}catch(n){throw console.error("Error completing task:",n),n}}function mE(e){const t=new Date,n=e.toLowerCase();if("today"===n)return t.toISOString();if("tomorrow"===n){const e=new Date(t);return e.setDate(e.getDate()+1),e.toISOString()}const r=n.match(/in\s+(\d+)\s+(minute|hour|day|week)s?/i);if(r){const e=parseInt(r[1]),n=r[2],i=new Date(t);switch(n){case"minute":i.setMinutes(i.getMinutes()+e);break;case"hour":i.setHours(i.getHours()+e);break;case"day":i.setDate(i.getDate()+e);break;case"week":i.setDate(i.getDate()+7*e)}return i.toISOString()}if(n.startsWith("next ")){const e=n.match(/next\s+(\w+)/i);if(e){const n=e[1];if("week"===n){const e=new Date(t);return e.setDate(e.getDate()+7),e.toISOString()}const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(n);if(-1!==r){const e=new Date(t);let n=(r-e.getDay()+7)%7;return 0===n&&(n=7),e.setDate(e.getDate()+n),e.toISOString()}}}const i=n.match(/(\w+)\s+(\d{1,2})/i)||n.match(/(\d{1,2})\/(\d{1,2})/);if(i){const e=new Date(t);if(i[1]&&isNaN(parseInt(i[1]))){const t=["january","february","march","april","may","june","july","august","september","october","november","december"].indexOf(i[1].toLowerCase());-1!==t&&(e.setMonth(t),e.setDate(parseInt(i[2])))}else e.setMonth(parseInt(i[1])-1),e.setDate(parseInt(i[2]));return e<t&&e.setFullYear(e.getFullYear()+1),e.toISOString()}return null}const gE=new class{constructor(){this.ai=void 0,this.models=["gemini-2.5-pro","gemini-2.5-flash","gemini-2.5-flash-lite"],this.currentModelIndex=0,this.systemPrompt="";const e="AIzaSyB0MmJjgLLRDCSs89VkUTGRLLCeoP0djEc";this.ai=new Gw({apiKey:e}),this.loadSystemPrompt()}async classifyImageAction(e,t){try{const n=e.trim(),r="You are a classifier. Decide if the user's prompt is asking to generate a new image or to edit an existing/attached image.\nContext: imageAvailable=".concat(t?"YES":"NO",'\n\nRules:\n- If imageAvailable=YES and the user mentions visual effects, filters, color grading, editing, modifications, transformations, or style changes, choose EDIT.\n- If the user asks to modify, transform, add effects, apply filters, change colors, add grading, or edit "this image" or refers to an existing image, choose EDIT.\n- If the user describes a scene to create or requests a new image without referring to editing an existing one, choose GENERATE.\n- If imageAvailable=YES and the request could apply to the existing image (like "add cinematic color grading", "make it darker", "apply vintage filter"), choose EDIT.\n- If unclear or not image-related, choose NONE.\n\nImage editing keywords: edit, modify, transform, filter, grading, color, cinematic, vintage, effect, adjust, enhance, change, apply, add to image, make it, turn it\n\nUser prompt: ').concat(n,'\n\nReturn ONLY compact JSON like {"action":"generate|edit|none","instruction":"..."}.'),i=(await this.callGeminiClassification(r)).match(/\{[\s\S]*\}/);if(i){const e=JSON.parse(i[0]),t=(e.action||"").toString().toLowerCase();return{action:"generate"===t?"generate":"edit"===t?"edit":"none",instruction:(e.instruction||n).toString().trim()}}}catch(nT){console.warn("classifyImageAction fallback:",nT)}return{action:"none",instruction:e.trim()}}async callGeminiClassification(e){try{console.log("[Kimi] Using gemini-2.0-flash-lite for classification...");const t=(await this.ai.models.generateContent({model:"gemini-2.0-flash-lite",contents:[{role:"user",parts:[{text:e}]}],config:{temperature:.1,maxOutputTokens:100}})).text||"";if(t.trim())return console.log("[Kimi] gemini-2.0-flash-lite classification successful"),t;console.log("[Kimi] gemini-2.0-flash-lite classification returned empty response")}catch(t){return console.log("[Kimi] gemini-2.0-flash-lite classification failed:",t),this.fallbackClassification(e)}throw new Error("Classification failed")}fallbackClassification(e){const t=e.toLowerCase(),n=t.includes("imageavailable=yes"),r=e.match(/User prompt: (.+)/i),i=r?r[1].toLowerCase():t,o=["edit","modify","transform","filter","grading","color","cinematic","vintage","effect","adjust","enhance","change","apply","add to","make it","turn it","darker","brighter","moody","vibrant"].some(e=>i.includes(e)),s=["generate","create","make a","draw","design","show me","picture of"].some(e=>i.includes(e));return n&&o?JSON.stringify({action:"edit",instruction:i}):s&&!n?JSON.stringify({action:"generate",instruction:i}):JSON.stringify({action:"none",instruction:i})}async loadSystemPrompt(){try{const e=await fetch("/kimiv2-prompt.txt");e.ok?(this.systemPrompt=await e.text(),this.systemPrompt+="\n\nStyle guidelines for responses:\n- default: casual lower-case\n- avoid punctuation most of the time; only use when necessary for clarity\n- prefer short lines and line breaks over commas and periods\n- no emojis unless the user uses them first\n- keep it friendly and concise\n\nTone switching rules:\n- if the user requests formality or the task is an email, report, proposal, cover letter, resume/cv, press release, meeting minutes, policy, contract, or similar business/legal doc: switch to a formal professional tone\n- when formal: expand slang and obvious abbreviations, use standard capitalization and punctuation, maintain clarity and professionalism\n- otherwise stay in the default casual tone"):this.systemPrompt="You are Kimi V2, an advanced AI assistant designed to help users with a wide range of tasks. You are helpful, knowledgeable, and engaging in your responses.\n\nKey characteristics:\n- You are friendly and approachable while maintaining professionalism\n- You provide accurate and helpful information\n- You can assist with coding, general knowledge, creative tasks, and problem-solving\n- You maintain context throughout conversations\n- You ask clarifying questions when needed to provide better assistance\n- You acknowledge limitations and suggest alternatives when appropriate\n\nWhen responding:\n- Be concise but thorough\n- Use clear and understandable language\n- Provide examples when helpful\n- Maintain a positive and encouraging tone\n- Adapt your communication style to match the user's needs\n\nRemember: You are here to assist and make the user's experience as helpful and enjoyable as possible.\n\nStyle guidelines for responses:\n- default: casual lower-case\n- avoid punctuation most of the time; only use when absolutely necessary for clarity\n- prefer short lines and line breaks over commas and periods\n- no emojis unless the user uses them first\n- keep it friendly and concise\n\nTone switching rules:\n- if the user requests formality or the task is an email, report, proposal, cover letter, resume/cv, press release, meeting minutes, policy, contract, or similar business/legal doc: switch to a formal professional tone\n- when formal: expand slang and obvious abbreviations, use standard capitalization and punctuation, maintain clarity and professionalism\n- otherwise stay in the default casual tone"}catch(e){console.warn("Could not load system prompt from file, using fallback:",e),this.systemPrompt="You are Kimi V2, an advanced AI assistant designed to help users with a wide range of tasks. You are helpful, knowledgeable, and engaging in your responses.\n\nStyle guidelines for responses:\n- default: casual lower-case\n- avoid punctuation most of the time; only use when absolutely necessary for clarity\n- prefer short lines and line breaks over commas and periods\n- no emojis unless the user uses them first\n- keep it friendly and concise\n\nTone switching rules:\n- if the user requests formality or the task is an email, report, proposal, cover letter, resume/cv, press release, meeting minutes, policy, contract, or similar business/legal doc: switch to a formal professional tone\n- when formal: expand slang and obvious abbreviations, use standard capitalization and punctuation, maintain clarity and professionalism\n- otherwise stay in the default casual tone"}}async generateResponse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";try{aE(n,{role:"user",content:e});const r=await KS(e,n,10),i=async function(e){return(await sE(e)).map(e=>"".concat("user"===e.role?"User":"Assistant",": ").concat(e.content)).join("\n")}(n),o=r.length>0?"\n--- Memory Context (Pinned + Relevant) ---\n".concat(r.map(e=>e.text).join("\n")):"",s=this.shouldUseFormal(e)?"\n\nTone for this reply: formal professional. Expand any slang or abbreviations. Use proper capitalization and punctuation.":"\n\nTone for this reply: casual minimal punctuation. lower-case. prefer line breaks over commas/periods.",a="".concat(this.systemPrompt).concat(s,"\n\n--- Recent Conversation ---\n").concat(i).concat(o,"\n\nUser: ").concat(e,"\nAssistant:"),l=await this.callGeminiWithFallback(a,t);let u=await this.processTaskMarkers(l,n);return u=this.applyTone(e,u),aE(n,{role:"assistant",content:u}),await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(GS)try{if(e.includes("Sorry, there was an error")||e.includes("Sorry, I could not generate")||e.includes("Memory search results for")||e.startsWith("[AI]")||e.startsWith("[Venice]"))return;const r=await JS(e);if(!r)return void console.error("Failed to generate embedding for:",e);const{error:i}=await GS.from("memories").insert([{text:e,embedding:r,pinned:n,user_id:t}]);i?(console.error("Error adding memory to Supabase:",i),console.error("Error details:",JSON.stringify(i,null,2)),console.error("Data being inserted:",{text:e.substring(0,100)+"...",embedding:r?"[".concat(r.length," dimensions]"):"null",pinned:n,user_id:t})):console.log("Memory added for user ".concat(t).concat(n?" (PINNED)":"",":"),e.substring(0,50)+"...")}catch(r){console.error("Error in addMemory:",r)}else console.error("Supabase not configured")}(u,n),this.processAndSplitResponse(u)}catch(r){throw console.error("Error generating AI response:",r),new Error("Failed to generate AI response. Please try again.")}}shouldUseFormal(e){const t=(e||"").toLowerCase();if(t.startsWith("formal:")||t.includes("[formal]"))return!0;if(/(make|write|sound|be) (this|it)?\s*(more\s*)?formal/.test(t))return!0;if(/professional tone|business tone|corporate tone/.test(t))return!0;return["formal","professional","email","cover letter","proposal","report","summary","executive summary","press release","meeting minutes","policy","contract","legal","cv","resume","letter","client","stakeholder","invoice","quotation","memo"].some(e=>t.includes(e))}formalizeText(e){if(!e)return e;let t=e;const n=[[/\bur\b/g,"your"],[/\bu\b/g,"you"],[/\bidk\b/gi,"I don't know"],[/\bbtw\b/gi,"by the way"],[/\bomw\b/gi,"on my way"],[/\bimo\b/gi,"in my opinion"],[/\btbh\b/gi,"to be honest"],[/\blol\b/gi,""],[/\blmk\b/gi,"let me know"],[/\bthx\b/gi,"thanks"],[/\bpls\b/gi,"please"],[/\bfr\b/gi,""],[/\bngl\b/gi,""],[/\bwanna\b/gi,"want to"],[/\bgonna\b/gi,"going to"],[/\bkinda\b/gi,"somewhat"],[/\bsorta\b/gi,"somewhat"]];for(const[r,i]of n)t=t.replace(r,i).replace(/\s{2,}/g," ").trim();return t.split(/(?<=\S)\s*\n+|(?<=[.!?])\s+/).map(e=>e.trim()).filter(Boolean).map(e=>{const t=e.charAt(0).toUpperCase()+e.slice(1);return/[.!?]$/.test(t)?t:t+"."}).join(" ")}applyTone(e,t){return t&&this.shouldUseFormal(e)?this.formalizeText(t):t}async callGeminiWithFallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n={tools:[{googleSearch:{}}]},r=[{role:"user",parts:[{text:this.systemPrompt}]},{role:"model",parts:[{text:"I understand. I am Kimi V2, ready to assist you with any questions or tasks you have."}]},...t,{role:"user",parts:[{text:e}]}];for(let o=this.currentModelIndex;o<this.models.length;o++){const e=this.models[o];try{console.log("[Kimi] Trying ".concat(e,"..."));const t=(await this.ai.models.generateContent({model:e,contents:r,config:n})).text||"";if(t.trim())return console.log("[Kimi] ".concat(e," response successful")),this.currentModelIndex=0,this.cleanResponse(t);console.log("[Kimi] ".concat(e," returned empty response"))}catch(i){console.warn("[Kimi] ".concat(e," failed:"),i);const t=i instanceof Error?i.message.toLowerCase():"";if((t.includes("overloaded")||t.includes("quota")||t.includes("rate limit")||t.includes("unavailable")||t.includes("timeout"))&&o<this.models.length-1){console.log("[Kimi] Falling back to next model due to: ".concat(t)),this.currentModelIndex=o+1;continue}if(o===this.models.length-1)return console.error("[Kimi] All models failed:",i),"I'm having trouble thinking of what to say right now. Can you tell me more about that?";throw i}}return"I'm having trouble thinking of what to say right now. Can you tell me more about that?"}cleanResponse(e){if(!e)return"I'm not sure what to say to that.";let t=e.replace(/```[\s\S]*?```/g,"").trim();if(t=t.replace(/^\[.*?\]/g,"").trim(),t=t.replace(/^(User|Assistant|Bot|AI|Kimi):/gi,"").trim(),t=t.replace(/\n+/g," ").trim(),t.length>200){t=t.substring(0,200).trim();const e=t.lastIndexOf("."),n=t.lastIndexOf("?"),r=t.lastIndexOf("!"),i=Math.max(e,n,r);i>100&&(t=t.substring(0,i+1))}return t||(t="I'm not sure what to say to that."),t}processAndSplitResponse(e){var t,n=this;return(t=function*(){const t=n.processAndSplitText(e);for(let e=0;e<t.length;e++){const r=t[e],i=r.split(" ");for(let e=0;e<i.length;e++){const t=i[e];yield{text:e===i.length-1?t:t+" ",isComplete:!1},yield Tf(new Promise(e=>setTimeout(e,50+100*Math.random())))}if(e<t.length-1){const e=n.calculateTypingDelay(r.length);yield Tf(new Promise(t=>setTimeout(t,e)))}}yield{text:"",isComplete:!0}},function(){return new Cf(t.apply(this,arguments))})()}processAndSplitText(e){let t=e.split(/\n+/).map(e=>e.trim()).filter(Boolean);let n=[];for(const i of t)if(i.length>140){let e=0;for(;e<i.length;){let t=Math.min(e+140,i.length),r=-1;const o=/[.!?](?=\s|$)/g;let s,a=-1;for(;null!==(s=o.exec(i.slice(e,t)));)a=e+s.index+1;if(-1!==a&&a>e&&(r=a),-1===r){const n=/\b(and|but|so|or|because|then|still|yet)\b/gi;let o=-1;for(;null!==(s=n.exec(i.slice(e,t)));)o=e+s.index+s[0].length;-1!==o&&(r=o)}(-1===r||r<=e)&&(r=i.length);let l=i.slice(e,r).trim();l&&!/^[.!?]+$/.test(l)&&n.push(l),e=r}}else n.push(i);const r=[];for(let i=0;i<n.length;i++)r.length>0&&n[i].length<20?r[r.length-1]+=" "+n[i]:r.push(n[i]);return r}calculateTypingDelay(e){const t=500+1500*Math.random(),n=Math.min(e/50,3),r=.5+1*Math.random();return Math.floor(t*n*r)}async performWebSearch(e){try{const t="https://www.google.com/search?q=".concat(encodeURIComponent(e)),n=await fetch("https://api.allorigins.win/get?url=".concat(encodeURIComponent(t))),r=await n.json();if(r.contents){const e=r.contents.match(/<title[^>]*>([^<]+)<\/title>/i),t=e?e[1]:"Search results";return"Found: ".concat(t)}return"Search results for: ".concat(e)}catch(t){return console.error("Web search error:",t),"Couldn't search for: ".concat(e)}}formatConversationHistory(e){return e.map(e=>({role:e.isUser?"user":"model",parts:[{text:e.text}]}))}getCurrentModel(){return this.models[this.currentModelIndex]}getAvailableModels(){return[...this.models]}resetToPrimaryModel(){this.currentModelIndex=0}async processTaskMarkers(e,t){let n=e;const r=/\[TASKADD\](.*?)(?=\[TASKADD\]|$)/g,i=[];let o;for(;null!==(o=r.exec(e));)i.push(o);if(i.length>0)try{for(const e of i){const n=e[1].trim();if(n){let e=null,r=n;const i=[/(?:due|by|on)\s+(tomorrow|today|next\s+\w+|in\s+\d+\s+\w+)/i,/(?:due|by|on)\s+(\d{1,2}\/\d{1,2}|\d{1,2}-\d{1,2})/,/(?:due|by|on)\s+(\w+\s+\d{1,2})/,/(?:in|after)\s+(\d+)\s+(minute|hour|day|week)s?/i];for(const t of i){const i=n.match(t);if(i){e=mE(i[1]),r=n.replace(t,"").trim();break}}let o="medium";r.toLowerCase().includes("urgent")||r.toLowerCase().includes("asap")||r.toLowerCase().includes("emergency")?o="high":(r.toLowerCase().includes("low priority")||r.toLowerCase().includes("when you can"))&&(o="low"),await dE(t,r,null,e,o)}}n=n.replace(/\[TASKADD\].*?(?=\[TASKADD\]|$)/g,"").trim()}catch(u){console.error("Error adding tasks:",u)}if(n.includes("[TASKCHECK]"))try{const e=await async function(e){if(!cE)return console.error("Supabase not configured"),{total:0,overdue:0,highPriority:0,dueToday:0,overdueTasks:[],highPriorityTasks:[],dueTodayTasks:[]};try{const[t,n]=await Promise.all([hE(e,!1),pE(e)]),r=t.length,i=n.length,o=t.filter(e=>"high"===e.priority&&!e.completed),s=t.filter(e=>{if(!e.due_date)return!1;const t=new Date;return new Date(e.due_date).toDateString()===t.toDateString()});return{total:r,overdue:i,highPriority:o.length,dueToday:s.length,overdueTasks:n,highPriorityTasks:o,dueTodayTasks:s}}catch(u){throw console.error("Error getting task summary:",u),u}}(t);let r="";0===e.total?r="USER_TASK_STATUS: No tasks found. User is all caught up with no pending tasks or deadlines.":(r="USER_TASK_STATUS: User has ".concat(e.total," active tasks."),e.overdue>0&&(r+="\nOVERDUE_TASKS (".concat(e.overdue,"):\n"),e.overdueTasks.forEach(e=>{const t=Math.floor(((new Date).getTime()-new Date(e.due_date).getTime())/864e5);r+="- ".concat(e.title," (").concat(t," day").concat(t>1?"s":""," overdue)\n")})),e.dueToday>0&&(r+="\nDUE_TODAY (".concat(e.dueToday,"):\n"),e.dueTodayTasks.forEach(e=>{r+="- ".concat(e.title,"\n")})),e.highPriority>0&&(r+="\nHIGH_PRIORITY (".concat(e.highPriority,"):\n"),e.highPriorityTasks.forEach(e=>{const t=e.due_date?" (due ".concat(new Date(e.due_date).toLocaleDateString(),")"):"";r+="- ".concat(e.title).concat(t,"\n")})));const i="".concat(this.systemPrompt,"\n\n--- Task Information ---\n").concat(r,"\n\nUser: ").concat(n.replace("[TASKCHECK]",""),"\nAssistant:");n=await this.callGeminiWithFallback(i,[]),n=n.replace(/\[TASKCHECK\]/g,"").trim()}catch(u){console.error("Error checking tasks:",u)}const s=/\[TASKMARK\](.*?)(?=\[TASKMARK\]|$)/g,a=[];let l;for(;null!==(l=s.exec(n));)a.push(l);if(a.length>0)try{for(const e of a){const n=e[1].trim();if(n){const e=await hE(t,!1);let r=null,i=0;for(const t of e){const e=t.title.toLowerCase(),o=n.toLowerCase();let s=0;if(e===o)s=100;else if(e.includes(o)||o.includes(e))s=80;else{const t=o.split(/\s+/),n=e.split(/\s+/);for(const e of t)n.some(t=>t.includes(e)||e.includes(t))&&(s+=20)}s>i&&(i=s,r=t)}r&&i>=20?(await fE(r.id,t),console.log('[TASK] Marked task "'.concat(r.title,'" as completed'))):console.log('[TASK] Could not find matching task for "'.concat(n,'"'))}}n=n.replace(/\[TASKMARK\].*?(?=\[TASKMARK\]|$)/g,"").trim()}catch(u){console.error("Error marking tasks as completed:",u)}return n}},vE=gE;function yE(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}catch(e){return"UTC"}}function bE(e){const t={"content-type":"application/json",platform:"nano-banana-free",timezone:yE()},n="d334e6fc9b4142379f13490805c58a6d";return n&&(t.token=n),c(c({},t),e||{})}async function wE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.nanobananafree.ai/site/nanobananaApi/v1/generateContent",n=arguments.length>2?arguments[2]:void 0;const r=await fetch(t,{method:"POST",headers:bE(n),body:JSON.stringify(e)});if(!r.ok){let e="";try{e=await r.text()}catch(o){}throw new Error("NanoBananaFree request failed (".concat(r.status,"): ").concat(e||r.statusText))}const i=await r.json();if(!i.success)throw new Error("NanoBananaFree API error: ".concat(i.errMessage||"Unknown error"," (Code: ").concat(i.errCode||"N/A",")"));return i.data?c({candidates:i.data.candidates,createTime:i.data.createTime,modelVersion:i.data.modelVersion,responseId:i.data.responseId,usageMetadata:i.data.usageMetadata},i.data):i}function _E(e){const t=[],n=[],r=e.candidates||[];for(const s of r){var i;const e=(null===s||void 0===s||null===(i=s.content)||void 0===i?void 0:i.parts)||[];for(const r of e){var o;if(null!==(o=r.inlineData)&&void 0!==o&&o.data){const e=r.inlineData.mimeType||"image/png",n=r.inlineData.data;if(n&&n.length>0){const r="data:".concat(e,";base64,").concat(n);t.push({mimeType:e,dataUrl:r})}}r.text&&r.text.trim().length>0&&n.push(r.text)}}return{images:t,texts:n,raw:e}}async function xE(e,t){const n={contents:{role:"user",parts:[{text:e}]},config:{responseModalities:(null===t||void 0===t?void 0:t.modalities)||["IMAGE","TEXT"]}};try{const e=await wE(n,null===t||void 0===t?void 0:t.baseUrl);return null!==t&&void 0!==t&&t.debug&&TE(e,"generateImageFromText"),_E(e)}catch(r){throw console.error("[NanoBanana] Image generation failed:",r),r}}async function SE(e,t,n,r){const i=function(e){const t=e.toLowerCase();if(t.includes("cinematic")&&(t.includes("color")||t.includes("grading")))return"Apply professional cinematic color grading to this image. Create a film-like aesthetic with:\n- Enhanced contrast with deeper shadows and brighter highlights\n- Warm highlights (slight orange/yellow tint) and cool shadows (slight blue/teal tint)\n- Desaturated mid-tones for a more cinematic look\n- Subtle vignette around the edges\n- Film grain texture for authentic cinema feel\n- Color temperature adjustment for dramatic mood\n- Professional color curve adjustments\n- Make it look like a high-budget movie scene\n\nOriginal request: ".concat(e);if(t.includes("color grading")||t.includes("color grade"))return"Apply professional color grading to this image with enhanced contrast, saturation adjustments, and mood-appropriate color temperature. ".concat(e);if(t.includes("vintage")||t.includes("retro"))return"Apply vintage film effects including warm color tones, film grain, slight sepia tinting, and classic photography characteristics. ".concat(e);if(t.includes("dark")||t.includes("moody"))return"Create a dark, moody atmosphere with deeper shadows, dramatic lighting, and enhanced contrast for a cinematic effect. ".concat(e);if(t.includes("bright")||t.includes("vibrant"))return"Enhance brightness and vibrancy with increased saturation, improved highlights, and more vivid colors while maintaining natural tones. ".concat(e);if(t.includes("enhance")||t.includes("improve"))return"Enhance this image with improved lighting, color balance, sharpness, and overall visual appeal while maintaining natural characteristics. ".concat(e);return e}(n),o={contents:{role:"user",parts:[{inlineData:{mimeType:t,data:e}},{text:i}]},config:{responseModalities:(null===r||void 0===r?void 0:r.modalities)||["IMAGE","TEXT"]}};try{const e=await wE(o,null===r||void 0===r?void 0:r.baseUrl);return null!==r&&void 0!==r&&r.debug&&TE(e,"editImageBase64"),_E(e)}catch(s){throw console.error("[NanoBanana] Image editing failed:",s),s}}function EE(e){const t=e.match(/^data:([^;]+);base64,(.*)$/);if(!t)throw new Error("Invalid data URL");return{mimeType:t[1],base64:t[2]}}function TE(e,t){var n,r,i,o;console.log("[NanoBanana] ".concat(t," response:"),{success:null===e||void 0===e?void 0:e.success,errCode:null===e||void 0===e?void 0:e.errCode,errMessage:null===e||void 0===e?void 0:e.errMessage,requestId:null===e||void 0===e?void 0:e.requestId,modelVersion:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.modelVersion,candidatesCount:(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(i=r.candidates)||void 0===i?void 0:i.length)||0,usageMetadata:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.usageMetadata});const s=function(e){const t=[];let n=0,r=0;if("object"!==typeof e||null===e)return t.push("Response is not a valid object"),{isValid:!1,errors:t,imageCount:n,textCount:r};if(!0!==e.success&&(t.push("API returned success: ".concat(e.success)),e.errMessage&&t.push("Error message: ".concat(e.errMessage))),!e.data)return t.push("Missing data field in response"),{isValid:!1,errors:t,imageCount:n,textCount:r};const i=e.data.candidates;if(!Array.isArray(i))return t.push("Missing or invalid candidates array"),{isValid:!1,errors:t,imageCount:n,textCount:r};for(const a of i){var o;const e=(null===a||void 0===a||null===(o=a.content)||void 0===o?void 0:o.parts)||[];for(const i of e){var s;null!==(s=i.inlineData)&&void 0!==s&&s.data&&(n++,i.inlineData.mimeType||t.push("Image data missing mimeType"),"string"===typeof i.inlineData.data&&0!==i.inlineData.data.length||t.push("Invalid or empty image data")),i.text&&"string"===typeof i.text&&i.text.trim().length>0&&r++}}return{isValid:0===t.length,errors:t,imageCount:n,textCount:r}}(e);s.isValid?console.log("[NanoBanana] Successfully extracted ".concat(s.imageCount," images and ").concat(s.textCount," texts")):console.warn("[NanoBanana] Validation errors:",s.errors)}const CE="https://imkpvbwxngyeqzkknssp.supabase.co",kE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlta3B2Ynd4bmd5ZXF6a2tuc3NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMzQ5NDcsImV4cCI6MjA3MzYxMDk0N30.I9h5KZuI7dBGkUS3eHwab8fyIIJMDQqk_2MVoRQr-1M";const AE=CE&&kE?VS(CE,kE):null;class OE{constructor(){this.listeners=new Set,this.currentAuthState={user:null,session:null,loading:!0},this.initializeAuth()}static getInstance(){return OE.instance||(OE.instance=new OE),OE.instance}async initializeAuth(){if(!AE)return this.currentAuthState.loading=!1,void this.notifyListeners();try{const{data:{session:e},error:t}=await AE.auth.getSession();t&&console.error("Error getting session:",t),this.currentAuthState={user:null!==e&&void 0!==e&&e.user?this.transformUser(e.user):null,session:e,loading:!1},this.notifyListeners(),AE.auth.onAuthStateChange((e,t)=>{this.currentAuthState={user:null!==t&&void 0!==t&&t.user?this.transformUser(t.user):null,session:t,loading:!1},this.notifyListeners()})}catch(e){console.error("Error initializing auth:",e),this.currentAuthState.loading=!1,this.notifyListeners()}}transformUser(e){return{id:e.id,email:e.email,user_metadata:e.user_metadata}}notifyListeners(){this.listeners.forEach(e=>e(this.currentAuthState))}subscribe(e){return this.listeners.add(e),e(this.currentAuthState),()=>{this.listeners.delete(e)}}getCurrentAuthState(){return this.currentAuthState}async signUp(e,t,n){if(!AE)throw new Error("Supabase not configured");const{data:r,error:i}=await AE.auth.signUp({email:e,password:t,options:{data:{full_name:n}}});if(i)throw i;return r}async signIn(e,t){if(!AE)throw new Error("Supabase not configured");const{data:n,error:r}=await AE.auth.signInWithPassword({email:e,password:t});if(r)throw r;return n}async signInWithGoogle(){if(!AE)throw new Error("Supabase not configured");const{data:e,error:t}=await AE.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t;return e}async signInWithDiscord(){if(!AE)throw new Error("Supabase not configured");const{data:e,error:t}=await AE.auth.signInWithOAuth({provider:"discord",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t;return e}async signOut(){if(!AE)throw new Error("Supabase not configured");const{error:e}=await AE.auth.signOut();if(e)throw e}async resetPassword(e){if(!AE)throw new Error("Supabase not configured");const{data:t,error:n}=await AE.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(n)throw n;return t}async updatePassword(e){if(!AE)throw new Error("Supabase not configured");const{data:t,error:n}=await AE.auth.updateUser({password:e});if(n)throw n;return t}async updateProfile(e){if(!AE)throw new Error("Supabase not configured");const{data:t,error:n}=await AE.auth.updateUser({data:e});if(n)throw n;return t}}OE.instance=void 0;const IE=OE.getInstance(),PE=(0,r.createContext)(void 0),RE=e=>{let{children:t}=e;const[n,i]=(0,r.useState)({user:null,session:null,loading:!0});(0,r.useEffect)(()=>IE.subscribe(e=>{i(e)}),[]);const o=c(c({},n),{},{signUp:IE.signUp.bind(IE),signIn:IE.signIn.bind(IE),signInWithGoogle:IE.signInWithGoogle.bind(IE),signInWithDiscord:IE.signInWithDiscord.bind(IE),signOut:IE.signOut.bind(IE),resetPassword:IE.resetPassword.bind(IE),updatePassword:IE.updatePassword.bind(IE),updateProfile:IE.updateProfile.bind(IE)});return(0,gn.jsx)(PE.Provider,{value:o,children:t})},NE=()=>{const e=(0,r.useContext)(PE);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},ME="AIzaSyB0MmJjgLLRDCSs89VkUTGRLLCeoP0djEc",DE=ME?new Gw({apiKey:ME}):null;async function jE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"media";if(!DE)return console.error("Gemini API not configured"),"[".concat(t," analysis failed - API not configured]");try{console.log("[Kimi] Using Gemini 2.5 Pro for ".concat(t," analysis"));const n={tools:[{googleSearch:{}}]},r=(await DE.models.generateContent({model:"gemini-2.5-pro",contents:e,config:n})).text||"";if(r.trim())return console.log("[Kimi] Gemini 2.5 Pro ".concat(t," analysis successful")),r;console.log("[Kimi] Gemini 2.5 Pro ".concat(t," analysis returned empty response"))}catch(n){console.log("[Kimi] Gemini 2.5 Pro ".concat(t," analysis failed:"),n);try{console.log("[Kimi] Falling back to Gemini 2.5 Flash for ".concat(t," analysis"));const n={tools:[{googleSearch:{}}]},r=(await DE.models.generateContent({model:"gemini-2.5-flash",contents:e,config:n})).text||"";if(r.trim())return console.log("[Kimi] Gemini 2.5 Flash ".concat(t," analysis successful")),r;console.log("[Kimi] Gemini 2.5 Flash ".concat(t," analysis returned empty response"))}catch(r){console.error("[Kimi] Gemini 2.5 Flash ".concat(t," analysis also failed:"),r)}}return"[".concat(t," analysis failed]")}function LE(e){return new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const e=r.result.split(",")[1];t(e)},r.onerror=e=>n(e)})}async function UE(e){switch(e.type.split("/")[0]){case"image":return await async function(e){try{const t=await LE(e),n=[{inlineData:{mimeType:e.type,data:t}},{text:"You are Kimi V2, an advanced AI assistant. Analyze this image and respond naturally like a helpful assistant would.\n\nAnalyze this image in detail. Provide a comprehensive description including:\n\n1. **Content Type**: What kind of image is this? (photo, meme, artwork, screenshot, etc.)\n2. **Subject Matter**: What or who is in the image? Be specific about people, objects, scenes, etc.\n3. **Visual Details**: Describe colors, lighting, composition, angles, poses, expressions, etc.\n4. **Context & Purpose**: What is the intent or purpose of this image?\n5. **Mood/Tone**: What emotion or atmosphere does it convey?\n6. **Text/Symbols**: Any visible text, emojis, or symbols?\n7. **Quality**: Image quality, filters, effects, etc.\n\n**SCHOOL SCHEDULE DETECTION:**\nIf this image contains a school schedule, assessment table, project dates, academic calendar, or any educational deadlines, extract all tasks and add [TASKADD] for each one.\n\nBe detailed and descriptive. Use web search if needed to identify specific people, places, or cultural references.\n\nKeep your response concise but informative."}];return await jE(n,"image analysis")}catch(t){return console.error("Image processing error:",t),"Image processing error"}}(e);case"video":return await async function(e){try{const t=await LE(e),n=[{inlineData:{mimeType:e.type,data:t}},{text:"You are Kimi V2, an advanced AI assistant. Analyze this video and respond naturally like a helpful assistant would.\n\nSummarize this video and list key moments. Provide a comprehensive analysis including:\n\n1. **Content Overview**: What is this video about?\n2. **Key Moments**: Important scenes, events, or highlights\n3. **People/Characters**: Who appears in the video?\n4. **Setting/Location**: Where does this take place?\n5. **Audio/Speech**: What is being said or heard?\n6. **Purpose**: What is the intent of this video?\n\nUse web search if needed for additional context about people, places, events, or cultural references.\n\nKeep your response concise but informative."}];return await jE(n,"video analysis")}catch(t){return console.error("Video processing error:",t),"Video processing error"}}(e);case"audio":return await async function(e){try{const t=await LE(e),n=[{inlineData:{mimeType:e.type,data:t}},{text:"You are Kimi V2, an advanced AI assistant. Analyze this audio and respond naturally like a helpful assistant would.\n\nPlease analyze this audio file thoroughly. Provide:\n\n1. **Audio Type**: Is this music, speech, voice memo, or other audio content?\n\n2. **If it's MUSIC**:\n   - **LYRICS**: Extract and transcribe ALL the lyrics/words being sung. This is CRITICAL - I need the actual words!\n   - **Genre/Style**: What type of music is this?\n   - **Mood/Vibe**: How does it sound? (catchy, smooth, energetic, etc.)\n   - **Instrumentation**: What instruments do you hear?\n   - **Vocal Style**: How are the vocals delivered?\n\n3. **If it's SPEECH/VOICE MEMO**:\n   - **Transcription**: What is being said word-for-word\n   - **Speaker**: Who is speaking (if identifiable)\n   - **Topic**: What is being discussed\n   - **Tone**: How does the speaker sound (excited, serious, etc.)\n\n4. **Audio Quality**: Clarity, background noise, volume levels\n\n**IMPORTANT**: For music files, ALWAYS extract the lyrics first - that's what the user wants to know about! Don't just say \"I can't hear lyrics\" - actually transcribe what's being sung.\n\nKeep your response detailed and helpful."}];return await jE(n,"audio analysis")}catch(t){return console.error("Audio processing error:",t),"Audio processing error"}}(e);default:return await async function(e){try{if("text/plain"===e.type){const t=await e.text();return"Document content:\n\n".concat(t)}return"Document file: ".concat(e.name," (").concat(e.type,") - Content extraction not yet implemented for this file type.")}catch(t){return console.error("Document processing error:",t),"Document processing error"}}(e)}}const FE=e=>{if(!e)return"";const t=e.indexOf("\n\nFile Analysis:");return(t>=0?e.slice(0,t):e).trimEnd()},BE=e=>(e||"").replace(/\s+/g,"").trim(),VE=e=>(e||"").toLowerCase().replace(/[\s\.,!?;:'"()\[\]{}<>\-_/\\|@#$%^&*`~]+/g,"").trim(),qE=e=>((e||"").match(/\n/g)||[]).length,zE=e=>{const t=[];for(const n of e){const e=t[t.length-1];if(!e){t.push(n);continue}const r=e.isUser===n.isUser,i=VE(e.text)===VE(n.text);if(r&&i){const r=qE(e.text);qE(n.text)<r&&(t[t.length-1]=n);continue}t.push(n)}return t},HE=r.memo(e=>{let{message:t,formatTime:n,isMobile:i=!1}=e;const[o,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>()=>{a&&(a.pause(),a.currentTime=0)},[a]),(0,gn.jsx)("div",{className:"flex ".concat(t.isUser?"justify-end":"justify-start"," mb-4 md:mb-6"),children:(0,gn.jsx)("div",{className:"".concat(i?"max-w-[85%]":"max-w-[80%]"," ").concat(t.isUser?"order-2":"order-1"),children:(0,gn.jsxs)("div",{className:"rounded-2xl ".concat(i?"px-3 py-2.5":"px-4 py-3"," shadow-lg ").concat(t.isUser?"bg-gradient-to-r from-galaxy-purple to-galaxy-blue text-white shadow-purple-500/20":"bg-white/20 text-white border border-white/30 backdrop-blur-sm shadow-black/20"),style:{willChange:"auto"},children:[(0,gn.jsx)("div",{className:"".concat(i?"text-sm":"text-sm md:text-base"," font-lato leading-relaxed whitespace-pre-wrap mb-2 md:mb-3"),children:FE(t.text).replace(/\ud83d\udcce .+\.(mp3|wav|ogg|mpeg|aac|flac).*$/i,"").trim()}),(0,gn.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 mb-2",children:[(0,gn.jsx)("button",{onClick:()=>{if(o&&a)a.pause(),s(!1);else{if(a)a.play();else{const e=new Audio(t.audioData);l(e),e.play()}s(!0)}},className:"".concat(i?"w-8 h-8":"w-8 h-8 md:w-10 md:h-10"," bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-200 touch-manipulation shadow-lg"),"aria-label":o?"Pause audio":"Play audio",children:o?(0,gn.jsx)("svg",{className:"".concat(i?"w-4 h-4":"w-4 h-4 md:w-5 md:h-5"," text-white"),fill:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):(0,gn.jsx)("svg",{className:"".concat(i?"w-4 h-4":"w-4 h-4 md:w-5 md:h-5"," text-white"),fill:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,gn.jsx)("div",{className:"flex-1 ".concat(i?"text-sm":"text-sm md:text-base"," font-lato text-white/80"),children:o?"Playing...":"Click to play audio"})]}),(0,gn.jsxs)("div",{className:"".concat(i?"text-xs":"text-xs md:text-sm"," font-lato text-white/70 mb-1 md:mb-2"),children:["\ud83d\udcce ",t.fileName]}),(0,gn.jsx)("div",{className:"text-xs ".concat(i?"mt-1.5":"mt-1 md:mt-2"," opacity-70 ").concat(t.isUser?"text-white/80":"text-gray-400"),children:n(t.timestamp)})]})})})}),GE=r.memo(e=>{let{message:t,formatTime:n,isMobile:r=!1}=e;return t.audioData&&t.fileName&&t.isUser?(0,gn.jsx)(HE,{message:t,formatTime:n,isMobile:r}):(0,gn.jsx)("div",{className:"flex ".concat(t.isUser?"justify-end":"justify-start"," mb-4 md:mb-6"),children:(0,gn.jsxs)("div",{className:"".concat(r?"max-w-[85%]":"max-w-[80%]"," ").concat(t.isUser?"order-2":"order-1"),children:[!t.isUser&&(0,gn.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,gn.jsx)("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-gradient-to-r from-galaxy-purple to-galaxy-blue rounded-full flex items-center justify-center shadow-lg",children:(0,gn.jsx)("span",{className:"text-white font-bold text-xs md:text-sm",children:"K"})}),(0,gn.jsx)("span",{className:"text-white font-lato font-medium text-sm md:text-base",children:"Kimi V2"})]}),(0,gn.jsxs)("div",{className:"rounded-2xl ".concat(r?"px-3 py-2.5":"px-4 py-3"," shadow-lg ").concat(t.isUser?"bg-gradient-to-r from-galaxy-purple to-galaxy-blue text-white shadow-purple-500/20":"bg-white/20 text-white border border-white/30 backdrop-blur-sm shadow-black/20"),style:{willChange:"auto"},children:[(0,gn.jsx)("div",{className:"".concat(r?"text-sm":"text-sm md:text-base"," font-lato leading-relaxed whitespace-pre-wrap"),children:t.isUser?FE(t.text):t.text}),t.imageData&&(0,gn.jsx)("div",{className:"".concat(r?"mt-2":"mt-2 md:mt-3"),children:(0,gn.jsx)("img",{src:t.imageData,alt:t.isUser?"uploaded image":"generated image",className:"rounded-lg h-auto object-cover shadow-lg ".concat(r?"max-w-[280px]":"max-w-[300px] md:max-w-[400px]")})}),(0,gn.jsx)("div",{className:"text-xs ".concat(r?"mt-1.5":"mt-1 md:mt-2"," opacity-70 ").concat(t.isUser?"text-white/80":"text-gray-400"),children:n(t.timestamp)})]})]})})}),WE=r.memo(e=>{let{conversation:t,isActive:n,onSelect:r,onDelete:i,formatDate:o,isMobile:s=!1}=e;return(0,gn.jsx)("div",{className:"group relative p-3 rounded-xl cursor-pointer transition-all duration-300 touch-manipulation ".concat(n?"bg-white/20 border border-white/30 shadow-lg":"bg-white/5 hover:bg-white/10 active:bg-white/15 border border-transparent hover:border-white/20"),onClick:r,children:(0,gn.jsxs)("div",{className:"flex items-start justify-between",children:[(0,gn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,gn.jsx)("h3",{className:"text-white font-lato font-medium truncate ".concat("text-sm"),children:t.title}),(0,gn.jsx)("p",{className:"text-gray-400 mt-1 ".concat("text-xs"),children:o(t.updatedAt)})]}),(0,gn.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 active:text-red-500 transition-all duration-300 touch-manipulation ".concat(s?"p-2":"p-1"," hover:bg-red-500/10 rounded-lg"),"aria-label":"Delete conversation",children:(0,gn.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),JE=r.memo(e=>{let{value:t,onChange:n,onSend:i,onKeyPress:o,disabled:s,isUploading:a,onFileUpload:l,isMobile:u}=e;const c=(0,r.useRef)(null),d=(0,r.useRef)(null),h=(0,r.useCallback)(e=>{n(e.target.value);const t=e.target;t.style.height="auto";const r=Math.min(t.scrollHeight,u?120:140);t.style.height="".concat(r,"px")},[n,u]),p=(0,r.useCallback)(()=>{var e;null===(e=c.current)||void 0===e||e.click()},[]),f=(0,r.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i(),d.current&&(d.current.style.height="auto"))},[i]);return(0,r.useEffect)(()=>{if(d.current){d.current.style.height="auto";const e=Math.min(d.current.scrollHeight,u?120:140);d.current.style.height="".concat(e,"px")}},[t,u]),(0,gn.jsx)("div",{className:"relative z-10 bg-black/30 backdrop-blur-sm border-t border-white/20 ".concat(u?"p-3":"p-3 md:p-4"," safe-area-inset-bottom"),children:(0,gn.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,gn.jsxs)("div",{className:"relative",children:[(0,gn.jsx)("textarea",{ref:d,value:t,onChange:h,onKeyDown:f,placeholder:"Message Kimi V2...",className:"w-full bg-white/10 backdrop-blur-sm border border-white/30 rounded-xl ".concat(u?"px-3 py-3 pr-16 text-sm":"px-3 md:px-4 py-3 pr-16 md:pr-20 text-sm md:text-base"," text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-galaxy-purple focus:border-transparent font-lato resize-none transition-all duration-200 touch-manipulation"),disabled:s,rows:1,style:{minHeight:u?"48px":"50px",maxHeight:u?"120px":"140px"}}),(0,gn.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1 ".concat(u?"":"md:gap-2"),children:[(0,gn.jsx)("input",{ref:c,type:"file",accept:"image/*,video/*,audio/*,.pdf,.txt,.doc,.docx",onChange:l,className:"hidden"}),(0,gn.jsx)("button",{onClick:p,disabled:s||a,className:"bg-white/10 hover:bg-white/20 active:bg-white/30 disabled:bg-gray-600 text-white ".concat("p-2"," rounded-lg disabled:cursor-not-allowed transition-all duration-200 touch-manipulation shadow-lg"),title:"Upload file","aria-label":"Upload file",children:a?(0,gn.jsx)("svg",{className:"".concat(u?"w-5 h-5":"w-4 h-4 md:w-5 md:h-5"," animate-spin"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):(0,gn.jsx)("svg",{className:"".concat(u?"w-5 h-5":"w-4 h-4 md:w-5 md:h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),(0,gn.jsx)("button",{onClick:i,disabled:!t.trim()||s,className:"bg-gradient-to-r from-galaxy-purple to-galaxy-blue hover:from-purple-600 hover:to-blue-600 active:from-purple-700 active:to-blue-700 disabled:from-gray-600 disabled:to-gray-700 text-white font-bold ".concat("p-2"," rounded-lg disabled:cursor-not-allowed transition-all duration-200 touch-manipulation shadow-lg"),"aria-label":"Send message",children:(0,gn.jsx)("svg",{className:"".concat(u?"w-5 h-5":"w-4 h-4 md:w-5 md:h-5"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]}),(0,gn.jsx)("div",{className:"text-center ".concat("mt-2"),children:(0,gn.jsx)("p",{className:"text-gray-400 font-lato ".concat("text-xs"),children:u?"":"Kimi V2 can make mistakes. Consider checking important information."})})]})})}),KE=()=>{var e;const[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)(""),[l,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!0),[m,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),[_,x]=(0,r.useState)(null),[S,E]=(0,r.useState)(0),[T,C]=(0,r.useState)(Date.now()),[k,A]=(0,r.useState)(!1),O=(0,r.useRef)(null),I=(0,r.useRef)(null),P=(0,r.useRef)(null),{signOut:R,user:N}=NE(),M=(()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e})();(0,r.useEffect)(()=>{if(null!==N&&void 0!==N&&N.id){localStorage.getItem("kimi-welcome-seen-".concat(N.id))||A(!0)}},[null===N||void 0===N?void 0:N.id]);(0,r.useEffect)(()=>{f(!M)},[M]);const D=(0,r.useCallback)(()=>{M&&!p&&f(!0)},[M,p]),j=(0,r.useCallback)(()=>{M&&p&&f(!1)},[M,p]),{handleTouchStart:L,handleTouchMove:U,handleTouchEnd:F}=((e,t)=>{const n=(0,r.useRef)(0),i=(0,r.useRef)(0),o=(0,r.useRef)(0),s=(0,r.useRef)(0);return{handleTouchStart:(0,r.useCallback)(e=>{n.current=e.touches[0].clientX,i.current=e.touches[0].clientY},[]),handleTouchMove:(0,r.useCallback)(e=>{o.current=e.touches[0].clientX,s.current=e.touches[0].clientY},[]),handleTouchEnd:(0,r.useCallback)(()=>{const r=o.current-n.current,a=s.current-i.current,l=Math.abs(r);l>Math.abs(a)&&l>50&&(r>0?e():t())},[e,t])}})(D,j);(0,r.useEffect)(()=>{const e=P.current;if(e&&M)return e.addEventListener("touchstart",L,{passive:!0}),e.addEventListener("touchmove",U,{passive:!0}),e.addEventListener("touchend",F,{passive:!0}),()=>{e.removeEventListener("touchstart",L),e.removeEventListener("touchmove",U),e.removeEventListener("touchend",F)}},[M,L,U,F]),(0,r.useEffect)(()=>{if(M)return document.body.style.overflow=p?"hidden":"unset",()=>{document.body.style.overflow="unset"}},[M,p]);const B=async()=>{try{await R()}catch(e){console.error("Error signing out:",e)}},V=t.find(e=>e.id===i),q=()=>{const e=Date.now();return e-T>=36e5?(E(0),C(e),!0):S<2},z=()=>{E(e=>e+1)},H=()=>{const e=36e5-(Date.now()-T),t=Math.ceil(e/6e4);return"".concat(t," minute").concat(1!==t?"s":"")},G=async()=>{if(null!==N&&void 0!==N&&N.id)try{const e=await nE(N.id),t=await Promise.all(e.map(async e=>((e,t)=>({id:e.id.toString(),title:e.title,messages:zE(t.map(e=>{var t,n,r;return{id:e.id.toString(),text:e.content,isUser:"user"===e.role,timestamp:new Date(e.created_at),audioData:null===(t=e.metadata)||void 0===t?void 0:t.audioData,fileName:null===(n=e.metadata)||void 0===n?void 0:n.fileName,imageData:null===(r=e.metadata)||void 0===r?void 0:r.imageData}})),createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}))(e,await rE(e.id))));n(t.map(e=>c(c({},e),{},{messages:zE(e.messages)}))),0===t.length?(console.log("No conversations found, creating new chat automatically"),await K()):i||o(t[0].id)}catch(e){console.error("Error loading conversations:",e)}};(0,r.useEffect)(()=>{(()=>{var e;null===(e=O.current)||void 0===e||e.scrollIntoView({behavior:"auto"})})()},[null===V||void 0===V?void 0:V.messages]),(0,r.useEffect)(()=>{null!==N&&void 0!==N&&N.id&&G()},[null===N||void 0===N?void 0:N.id]);const W=(0,r.useCallback)(async()=>{if(!s.trim()&&!m||!V)return;const e=s.trim();a(""),u(!0);const t=m;g(null),y(null);const r=V.messages[V.messages.length-1],o=(()=>{let t=e;return m&&(t=m?e?"".concat(e,"\n\n\ud83d\udcce ").concat(m.name):"\ud83d\udcce ".concat(m.name):e),BE(t)})();if(r&&r.isUser&&BE(r.text)===o)return void u(!1);let l,d,p,f=e;t&&(t.type.startsWith("image/")&&v?(p=v,f=e||"Shared an image"):t.type.startsWith("audio/")?(l=v,d=t.name,f=e?"".concat(e,"\n\n\ud83d\udcce ").concat(t.name):"\ud83d\udcce ".concat(t.name)):(d=t.name,f=e?"".concat(e,"\n\n\ud83d\udcce ").concat(t.name):"\ud83d\udcce ".concat(t.name)));const b={id:"temp_user_".concat(Date.now()),text:f,isUser:!0,timestamp:new Date,audioData:l,fileName:d,imageData:p};n(e=>e.map(e=>e.id===i?c(c({},e),{},{messages:zE([...e.messages,b]),updatedAt:new Date}):e));try{const r=/\[generate\]/i.test(e),o=/\[edit\]/i.test(e);if(r||o){if(o&&!q()){const e=H();throw new Error("Image edit limit reached (2 per hour). Please try again in ".concat(e,"."))}const s=e.replace(/\[(generate|edit)\]/i,"").trim(),a=()=>{if(t&&t.type.startsWith("image/")&&v)return v;for(let e=V.messages.length-1;e>=0;e--){const t=V.messages[e];if(t.imageData)return t.imageData}return null};let l,d="";if(r){var w;const e=await xE(s||"");l=null===(w=e.images[0])||void 0===w?void 0:w.dataUrl,d=e.texts[0]||"Generated image"}else{var _;const e=a();if(!e)throw new Error("No image found to edit. Generate an image first or attach one, then you can edit it.");const{mimeType:t,base64:n}=EE(e),r=await SE(n,t,s||"");l=null===(_=r.images[0])||void 0===_?void 0:_.dataUrl,d=r.texts[0]||"Edited image",z()}if(!l)throw new Error("Image service returned no image data.");const h={id:"temp_ai_".concat(Date.now()),text:d,isUser:!1,timestamp:new Date,imageData:l};n(e=>e.map(e=>e.id===i?c(c({},e),{},{messages:zE([...e.messages,h]),updatedAt:new Date}):e));return!i.startsWith("temp_")&&null!==N&&void 0!==N&&N.id&&iE(parseInt(i),N.id,"assistant",d,{imageData:l}).then(e=>{null!==e&&void 0!==e&&e.updatedTitle&&n(t=>t.map(t=>t.id===i?c(c({},t),{},{title:e.updatedTitle}):t))}).catch(console.error),void u(!1)}const s=!!(t&&t.type.startsWith("image/")&&v||V.messages.some(e=>!!e.imageData));console.log("[Image Classification Debug]",{userInput:e,hasAttachedOrRecentImage:s,fileToProcess:null===t||void 0===t?void 0:t.name,hasFilePreview:!!v,recentImageCount:V.messages.filter(e=>!!e.imageData).length});const a=await vE.classifyImageAction(e,s);if(console.log("[Image Classification Result]",a),"generate"===a.action||"edit"===a.action){if("edit"===a.action&&!q()){const e=H();throw new Error("Image edit limit reached (2 per hour). Please try again in ".concat(e,"."))}const e=a.instruction,r=()=>{if(t&&t.type.startsWith("image/")&&v)return v;const e=V.messages.filter(e=>!!e.imageData).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());return e.length>0?(console.log("[Image Memory] Using most recent generated image for editing"),e[0].imageData):null};let o,s="";if("generate"===a.action){var x;const t=await xE(e||"");o=null===(x=t.images[0])||void 0===x?void 0:x.dataUrl,s=t.texts[0]||"Generated image"}else{var S;const t=r();if(!t)throw new Error("No image found to edit. Generate an image first or attach one, then you can edit it.");const{mimeType:n,base64:i}=EE(t),a=await SE(i,n,e||"");o=null===(S=a.images[0])||void 0===S?void 0:S.dataUrl,s=a.texts[0]||"Edited image",z()}if(!o)throw new Error("Image service returned no image data.");const l={id:"temp_ai_".concat(Date.now()),text:s,isUser:!1,timestamp:new Date,imageData:o};n(e=>e.map(e=>e.id===i?c(c({},e),{},{messages:zE([...e.messages,l]),updatedAt:new Date}):e));return!i.startsWith("temp_")&&null!==N&&void 0!==N&&N.id&&iE(parseInt(i),N.id,"assistant",s,{imageData:o}).then(e=>{null!==e&&void 0!==e&&e.updatedTitle&&n(t=>t.map(t=>t.id===i?c(c({},t),{},{title:e.updatedTitle}):t))}).catch(console.error),void u(!1)}const f=i.startsWith("temp_");if(!f&&null!==N&&void 0!==N&&N.id){const t={audioData:l,fileName:d,imageData:p};iE(parseInt(i),N.id,"user",e,t).then(e=>{null!==e&&void 0!==e&&e.updatedTitle&&n(t=>t.map(t=>t.id===i?c(c({},t),{},{title:e.updatedTitle}):t))}).catch(console.error)}let m="";if(t){h(!0);try{m=await UE(t)}catch(O){console.error("File processing error:",O),m="Error processing ".concat(t.name)}finally{h(!1)}}const g=zE([...V.messages,b]),y=vE.formatConversationHistory(g.map(e=>({text:e.text,isUser:e.isUser})));let P=e;t&&m&&(P=e?"".concat(e,"\n\nFile Analysis:\n").concat(m):"Please analyze this ".concat(t.type.split("/")[0],": ").concat(m));const R=await vE.generateResponse(P,y,(null===N||void 0===N?void 0:N.id)||"default");let M="";var E,T=!1,C=!1;try{for(var k,A=function(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new gf(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(R);T=!(k=await A.next()).done;T=!1){const e=k.value;if(e.isComplete)break;M+=e.text}}catch(I){C=!0,E=I}finally{try{T&&null!=A.return&&await A.return()}finally{if(C)throw E}}if(M){const e=V.messages[V.messages.length-1],t=V.messages[V.messages.length-2],r=VE(M);if(e&&!e.isUser&&VE(e.text)===r)return void u(!1);if(t&&!t.isUser&&VE(t.text)===r)return void u(!1);const o={id:"temp_ai_".concat(Date.now()),text:M,isUser:!1,timestamp:new Date};n(e=>e.map(e=>e.id===i?c(c({},e),{},{messages:zE([...e.messages,o]),updatedAt:new Date}):e))}M&&!f&&null!==N&&void 0!==N&&N.id&&iE(parseInt(i),N.id,"assistant",M).then(e=>{null!==e&&void 0!==e&&e.updatedTitle&&n(t=>t.map(t=>t.id===i?c(c({},t),{},{title:e.updatedTitle}):t))}).catch(console.error),u(!1)}catch(O){console.error("Error generating AI response:",O);const e={id:"temp_error_".concat(Date.now()),text:"Sorry, I encountered an error while processing your request. Please try again.",isUser:!1,timestamp:new Date};n(t=>t.map(t=>t.id===i?c(c({},t),{},{messages:[...t.messages,e],updatedAt:new Date}):t));!i.startsWith("temp_")&&null!==N&&void 0!==N&&N.id&&iE(parseInt(i),N.id,"assistant",e.text).then(e=>{null!==e&&void 0!==e&&e.updatedTitle&&n(t=>t.map(t=>t.id===i?c(c({},t),{},{title:e.updatedTitle}):t))}).catch(console.error),u(!1)}},[s,V,i]),J=(0,r.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),W())},[W]),K=async()=>{const e="temp_".concat(Date.now()),t={id:e,title:"New Chat",messages:[],createdAt:new Date,updatedAt:new Date};n(e=>[t,...e]),o(e);try{if(null===N||void 0===N||!N.id)return;const t=await tE(N.id,"New Chat");t&&(n(n=>n.map(n=>n.id===e?c(c({},n),{},{id:t.id.toString()}):n)),o(t.id.toString()))}catch(r){console.error("Error creating new chat:",r),n(t=>t.filter(t=>t.id!==e)),o("")}},Y=async e=>{try{if(null===N||void 0===N||!N.id)return;console.log("Deleting conversation with ID:",e),console.log("Current conversations:",t.length);const r=await async function(e,t){if(!QS)return console.error("Supabase not configured"),!1;try{console.log("[ConversationService] Attempting to delete conversation ".concat(e," for user ").concat(t));const{data:n,error:r}=await QS.rpc("delete_conversation",{conversation_id_param:e,user_id_param:t});return r?(console.error("Error deleting conversation:",r),console.error("Error details:",JSON.stringify(r,null,2)),!1):(console.log("[ConversationService] Delete result:",n),n)}catch(n){return console.error("Error deleting conversation:",n),!1}}(parseInt(e),N.id);if(console.log("Delete result:",r),r){if(n(t=>{const n=t.filter(t=>t.id!==e);return console.log("Conversations after filtering:",n.length),n}),i===e){const n=t.filter(t=>t.id!==e),r=n.length>0?n[0].id:"";console.log("Switching to conversation:",r),o(r)}setTimeout(async()=>{try{await G()}catch(e){console.error("Error reloading conversations after delete:",e)}},1e3)}else console.error("Failed to delete conversation from database"),alert("Failed to delete conversation. Please try again.")}catch(r){console.error("Error deleting conversation:",r),alert("Error deleting conversation. Please try again.")}},X=(0,r.useCallback)(e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),[]),$=(0,r.useCallback)(e=>{const t=new Date,n=new Date(t);return n.setDate(n.getDate()-1),e.toDateString()===t.toDateString()?"Today":e.toDateString()===n.toDateString()?"Yesterday":e.toLocaleDateString()},[]);return(0,gn.jsxs)("div",{className:"h-screen bg-galaxy-dark relative overflow-hidden flex",children:[(0,gn.jsx)(Sf,{isOpen:k,onClose:()=>{A(!1),null!==N&&void 0!==N&&N.id&&localStorage.setItem("kimi-welcome-seen-".concat(N.id),"true")},onAccessDenied:()=>{A(!1),B()}}),(0,gn.jsxs)("div",{className:"fixed inset-0 z-0",children:[(0,gn.jsx)(xf,{color:[.5,.6,.8],speed:.8,amplitude:.15,mouseReact:!0}),(0,gn.jsx)("div",{className:"absolute inset-0 bg-black/60 pointer-events-none"})]}),M&&p&&(0,gn.jsx)("div",{className:"fixed inset-0 bg-black/50 z-20 md:hidden",onClick:()=>f(!1)}),(0,gn.jsx)("div",{className:"".concat(M?"fixed top-0 left-0 h-full z-30 transform transition-all duration-300 ease-out ".concat(p?"translate-x-0":"-translate-x-full"," w-80 shadow-2xl"):"".concat(p?"w-80":"w-0"," transition-all duration-300 ease-out relative z-10")," bg-black/30 backdrop-blur-md border-r border-white/20 overflow-hidden"),children:(0,gn.jsxs)("div",{className:"h-full flex flex-col",children:[(0,gn.jsxs)("div",{className:"p-4 border-b border-white/20",children:[M&&(0,gn.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gn.jsx)("h2",{className:"text-white font-lato font-bold text-lg",children:"Menu"}),(0,gn.jsx)("button",{onClick:()=>f(!1),className:"text-white hover:text-gray-300 p-2 hover:bg-white/10 rounded-lg transition-all duration-200 touch-manipulation","aria-label":"Close menu",children:(0,gn.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,gn.jsxs)("button",{onClick:K,className:"w-full bg-gradient-to-r from-galaxy-purple to-galaxy-blue hover:from-purple-600 hover:to-blue-600 active:from-purple-700 active:to-blue-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 active:scale-95 font-lato flex items-center justify-center gap-2 shadow-lg touch-manipulation",children:[(0,gn.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Chat"]})]}),(0,gn.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:t.map(e=>(0,gn.jsx)(WE,{conversation:e,isActive:i===e.id,onSelect:()=>{o(e.id),M&&f(!1)},onDelete:()=>Y(e.id),formatDate:$,isMobile:M},e.id))}),(0,gn.jsxs)("div",{className:"p-4 border-t border-white/20 space-y-3",children:[(0,gn.jsx)("div",{className:"flex items-center justify-start mb-3",children:(0,gn.jsxs)("div",{className:"bg-orange-500/20 text-orange-300 px-3 py-1.5 rounded-full text-xs font-medium border border-orange-500/30 flex items-center gap-2",children:[(0,gn.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),(0,gn.jsx)("span",{children:"Development Beta"})]})}),N&&(0,gn.jsx)("div",{className:"text-left mb-3",children:(0,gn.jsxs)("div",{className:"text-white font-lato text-sm truncate",children:[(0,gn.jsx)("span",{className:"text-white/70",children:"Signed in as: "}),(0,gn.jsx)("span",{className:"font-medium",children:(null===(e=N.user_metadata)||void 0===e?void 0:e.full_name)||N.email})]})}),(0,gn.jsxs)("button",{onClick:B,className:"w-full bg-red-500/20 hover:bg-red-500/30 border border-red-500/50 text-red-200 font-semibold py-2 px-4 rounded-lg transition-all duration-200 hover:scale-105 flex items-center justify-center gap-2",style:{fontFamily:"Old Standard TT, serif"},children:[(0,gn.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]}),(0,gn.jsx)("div",{className:"text-left pt-2",children:(0,gn.jsx)("div",{className:"text-white font-lato font-bold text-lg",children:"KIMI V2"})})]})]})}),(0,gn.jsxs)("div",{className:"flex-1 relative z-10 flex flex-col",children:[(0,gn.jsx)("div",{className:"relative z-10 bg-black/30 backdrop-blur-sm border-b border-white/20 p-3 md:p-4",children:(0,gn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gn.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[!M&&(0,gn.jsx)("button",{onClick:()=>f(!p),className:"text-white hover:text-gray-300 p-2 hover:bg-white/10 rounded-lg transition-all duration-200 touch-manipulation","aria-label":"Toggle sidebar",children:(0,gn.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),M&&(0,gn.jsx)("button",{onClick:()=>f(!0),className:"text-white hover:text-gray-300 p-2 hover:bg-white/10 rounded-lg transition-all duration-200 touch-manipulation","aria-label":"Open menu",children:(0,gn.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,gn.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,gn.jsx)("h1",{className:"text-white font-lato font-bold text-lg md:text-xl truncate",children:(null===V||void 0===V?void 0:V.title)||"Chat"}),(0,gn.jsx)("p",{className:"text-gray-400 text-xs md:text-sm",children:l?"Kimi is typing...":"".concat((null===V||void 0===V?void 0:V.messages.length)||0," messages")})]})]}),M&&(0,gn.jsx)("div",{className:"flex items-center gap-2 ml-2",children:(0,gn.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse",title:"Online"})})]})}),(0,gn.jsxs)("div",{ref:P,className:"relative z-10 flex-1 overflow-y-auto ".concat(M?"p-3 pb-4":"p-4 md:p-6"," ").concat(M?"space-y-1":"space-y-2"),style:{contain:"layout style paint"},children:[0===(null===V||void 0===V?void 0:V.messages.length)?(0,gn.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,gn.jsxs)("div",{className:"text-center",children:[(0,gn.jsx)(pf,{text:"Start chatting with Kimi",className:"text-2xl sm:text-4xl md:text-5xl lg:text-6xl text-white font-lato font-black",animateBy:"letters",delay:50,direction:"top",stepDuration:.2}),M&&(0,gn.jsx)("p",{className:"text-gray-400 text-sm mt-4 font-lato",children:"\ud83d\udc46 Swipe right to open the sidebar"})]})}):zE((null===V||void 0===V?void 0:V.messages)||[]).map(e=>(0,gn.jsx)(GE,{message:e,formatTime:X,isMobile:M},e.id)),l&&(0,gn.jsx)("div",{className:"flex justify-start mb-4 animate-fade-in",children:(0,gn.jsxs)("div",{className:"flex items-start gap-3",children:[(0,gn.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-galaxy-purple to-galaxy-blue rounded-full flex items-center justify-center shadow-lg animate-pulse",children:(0,gn.jsx)("span",{className:"text-white font-bold text-sm",children:"K"})}),(0,gn.jsxs)("div",{className:"flex flex-col",children:[(0,gn.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,gn.jsx)("span",{className:"text-white font-lato font-medium text-sm",children:"Kimi V2"})}),(0,gn.jsx)("div",{className:"bg-white/20 backdrop-blur-sm text-white border border-white/30 rounded-2xl px-4 py-3 shadow-lg",children:(0,gn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,gn.jsxs)("div",{className:"flex space-x-1",children:[(0,gn.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce shadow-sm"}),(0,gn.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce shadow-sm",style:{animationDelay:"0.1s"}}),(0,gn.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce shadow-sm",style:{animationDelay:"0.2s"}})]}),(0,gn.jsx)("span",{className:"text-xs text-gray-300 ml-2 font-lato animate-pulse",children:"Kimi is thinking..."})]})})]})]})}),(0,gn.jsx)("div",{ref:O})]}),m&&(0,gn.jsx)("div",{className:"relative z-10 bg-black/20 backdrop-blur-sm border-t border-white/20 p-4 animate-fade-in",children:(0,gn.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,gn.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/10 backdrop-blur-sm rounded-lg border border-white/20 shadow-lg",children:[(0,gn.jsx)("button",{onClick:()=>{_&&(_.pause(),_.currentTime=0),x(null),w(!1),g(null),y(null)},className:"text-gray-400 hover:text-white active:text-gray-300 transition-all duration-200 p-1 hover:bg-white/10 rounded touch-manipulation","aria-label":"Remove file",children:(0,gn.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m.type.startsWith("image/")&&v?(0,gn.jsx)("img",{src:v,alt:m.name,className:"w-12 h-12 object-cover rounded shadow-sm"}):m.type.startsWith("audio/")&&v?(0,gn.jsx)("div",{className:"flex items-center gap-2",children:(0,gn.jsx)("button",{onClick:()=>{if(b&&_)_.pause(),w(!1);else{if(_)_.play();else{const e=new Audio(v);x(e),e.play()}w(!0)}},className:"w-8 h-8 bg-white/20 hover:bg-white/30 active:bg-white/40 rounded-full flex items-center justify-center transition-all duration-200 touch-manipulation shadow-lg","aria-label":b?"Pause preview":"Play preview",children:b?(0,gn.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):(0,gn.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{d:"M8 5v14l11-7z"})})})}):(0,gn.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded flex items-center justify-center shadow-sm",children:(0,gn.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,gn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,gn.jsx)("p",{className:"text-white font-medium text-sm truncate font-lato",children:m.name}),(0,gn.jsxs)("p",{className:"text-gray-400 text-xs font-lato",children:[(m.size/1024/1024).toFixed(2)," MB"]})]}),d&&(0,gn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gn.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-galaxy-purple border-t-transparent rounded-full"}),(0,gn.jsx)("span",{className:"text-xs text-gray-400 font-lato",children:"Processing..."})]})]})})}),(0,gn.jsx)(JE,{value:s,onChange:a,onSend:W,onKeyPress:J,disabled:l,isUploading:d,onFileUpload:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n)if(function(e){return["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","video/quicktime","audio/mp3","audio/wav","audio/ogg","audio/mpeg","text/plain","application/pdf"].includes(e.type)}(n))if(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return function(e){return e.size/1048576}(e)<=t}(n,20)){if(g(n),n.type.startsWith("image/")){const e=new FileReader;e.onload=e=>{var t;return y(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(n)}else if(n.type.startsWith("audio/")){const e=new FileReader;e.onload=e=>{var t;return y(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(n)}else y(n.name);I.current&&(I.current.value="")}else alert("File too large. Please upload files smaller than 20MB.");else alert("File type not supported. Please upload images, videos, audio files, or documents.")},isMobile:M})]})]})},YE=()=>(0,gn.jsxs)("div",{className:"min-h-screen bg-galaxy-dark relative overflow-hidden",children:[(0,gn.jsxs)("div",{className:"fixed inset-0 z-0",children:[(0,gn.jsx)(xf,{color:[.5,.6,.8],speed:.8,amplitude:.15,mouseReact:!0}),(0,gn.jsx)("div",{className:"absolute inset-0 bg-black/60 pointer-events-none"})]}),(0,gn.jsx)("main",{className:"relative z-10 pt-20 px-6 sm:px-8 lg:px-12",children:(0,gn.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,gn.jsxs)("div",{className:"text-center mb-20",children:[(0,gn.jsx)(pf,{text:"FEATURES",className:"text-4xl sm:text-5xl md:text-6xl mb-6 text-white font-lato font-black",animateBy:"letters",delay:100,direction:"top"}),(0,gn.jsx)("div",{className:"text-xl sm:text-2xl text-gray-300 font-lato mb-6",children:(0,gn.jsx)(ff,{text:"Discover the power of Kimi V2 AI",className:"text-xl sm:text-2xl font-lato",speed:3})}),(0,gn.jsx)("p",{className:"text-gray-400 text-lg max-w-3xl mx-auto font-lato leading-relaxed",children:"Kimi V2 is your intelligent AI assistant that can help with everything from coding questions to file analysis, task management, and creative projects. Experience the future of AI-powered assistance."})]}),(0,gn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-20",children:[{title:"Advanced AI Chat",description:"Experience intelligent conversations with Kimi V2, powered by cutting-edge AI technology. Get accurate, helpful responses to all your questions.",icon:"\ud83e\udd16",color:"from-galaxy-purple to-galaxy-blue"},{title:"File Analysis",description:"Upload images, videos, audio files, and documents for AI analysis. Get detailed insights, transcriptions, and intelligent summaries.",icon:"\ud83d\udcc1",color:"from-galaxy-blue to-galaxy-purple"},{title:"Memory & Context",description:"Kimi remembers your conversations and maintains context throughout your chat sessions. No need to repeat information.",icon:"\ud83e\udde0",color:"from-green-500 to-blue-500"},{title:"Task Management",description:"Create, track, and manage tasks directly in your conversations. Kimi can help organize your workflow and set reminders.",icon:"\u2705",color:"from-purple-500 to-pink-500"},{title:"Audio Playback",description:"Upload and play audio files directly in the chat interface. Perfect for music analysis, voice memos, and audio content review.",icon:"\ud83c\udfb5",color:"from-yellow-500 to-orange-500"},{title:"Secure & Private",description:"Your conversations are encrypted and secure. Kimi respects your privacy while providing powerful AI assistance.",icon:"\ud83d\udd12",color:"from-indigo-500 to-purple-500"}].map((e,t)=>(0,gn.jsxs)("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-8 hover:bg-white/15 transition-all duration-300 hover:scale-105 group",children:[(0,gn.jsxs)("div",{className:"flex items-center mb-6",children:[(0,gn.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r ".concat(e.color," rounded-xl flex items-center justify-center mr-5 group-hover:scale-110 transition-transform duration-300 text-3xl"),children:e.icon}),(0,gn.jsx)("h3",{className:"text-xl font-bold text-white font-lato",children:e.title})]}),(0,gn.jsx)("p",{className:"text-gray-300 font-lato leading-relaxed text-lg",children:e.description})]},t))}),(0,gn.jsxs)("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-xl p-10 mb-20",children:[(0,gn.jsx)("h2",{className:"text-4xl font-bold text-white mb-12 text-center font-lato",children:"Why Choose Kimi V2?"}),(0,gn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[(0,gn.jsxs)("div",{className:"text-center group",children:[(0,gn.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-galaxy-purple to-galaxy-blue rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,gn.jsx)("span",{className:"text-4xl",children:"\ud83c\udfaf"})}),(0,gn.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 font-lato",children:"Intelligent & Accurate"}),(0,gn.jsx)("p",{className:"text-gray-300 font-lato text-lg leading-relaxed",children:"Powered by advanced AI technology to provide accurate, helpful responses to all your questions and tasks."})]}),(0,gn.jsxs)("div",{className:"text-center group",children:[(0,gn.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-galaxy-blue to-galaxy-purple rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,gn.jsx)("span",{className:"text-4xl",children:"\u26a1"})}),(0,gn.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 font-lato",children:"Lightning Fast"}),(0,gn.jsx)("p",{className:"text-gray-300 font-lato text-lg leading-relaxed",children:"Get instant responses and real-time assistance without waiting. Kimi is always ready to help."})]}),(0,gn.jsxs)("div",{className:"text-center group",children:[(0,gn.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,gn.jsx)("span",{className:"text-4xl",children:"\ud83d\udd12"})}),(0,gn.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 font-lato",children:"Secure & Private"}),(0,gn.jsx)("p",{className:"text-gray-300 font-lato text-lg leading-relaxed",children:"Your conversations and data are protected with enterprise-grade security and privacy."})]})]})]}),(0,gn.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-20",children:[(0,gn.jsxs)("div",{className:"text-center bg-white/5 backdrop-blur-md border border-white/10 rounded-xl p-8 hover:bg-white/10 transition-all duration-300",children:[(0,gn.jsx)("div",{className:"text-4xl font-bold text-white mb-3 font-lato",children:"24/7"}),(0,gn.jsx)("div",{className:"text-gray-300 font-lato text-lg",children:"Always Available"})]}),(0,gn.jsxs)("div",{className:"text-center bg-white/5 backdrop-blur-md border border-white/10 rounded-xl p-8 hover:bg-white/10 transition-all duration-300",children:[(0,gn.jsx)("div",{className:"text-4xl font-bold text-white mb-3 font-lato",children:"\u221e"}),(0,gn.jsx)("div",{className:"text-gray-300 font-lato text-lg",children:"Conversations"})]}),(0,gn.jsxs)("div",{className:"text-center bg-white/5 backdrop-blur-md border border-white/10 rounded-xl p-8 hover:bg-white/10 transition-all duration-300",children:[(0,gn.jsx)("div",{className:"text-4xl font-bold text-white mb-3 font-lato",children:"100%"}),(0,gn.jsx)("div",{className:"text-gray-300 font-lato text-lg",children:"Privacy Focused"})]}),(0,gn.jsxs)("div",{className:"text-center bg-white/5 backdrop-blur-md border border-white/10 rounded-xl p-8 hover:bg-white/10 transition-all duration-300",children:[(0,gn.jsx)("div",{className:"text-4xl font-bold text-white mb-3 font-lato",children:"\ud83d\ude80"}),(0,gn.jsx)("div",{className:"text-gray-300 font-lato text-lg",children:"AI Powered"})]})]}),(0,gn.jsxs)("div",{className:"text-center bg-gradient-to-r from-galaxy-purple/20 to-galaxy-blue/20 backdrop-blur-md border border-white/20 rounded-xl p-12",children:[(0,gn.jsx)("h2",{className:"text-3xl font-bold text-white mb-6 font-lato",children:"Ready to Experience Kimi V2?"}),(0,gn.jsx)("p",{className:"text-gray-300 mb-8 font-lato text-lg max-w-2xl mx-auto leading-relaxed",children:"Start chatting with your intelligent AI assistant today and discover what's possible."}),(0,gn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:[(0,gn.jsx)("a",{href:"/chat",className:"bg-gradient-to-r from-galaxy-purple to-galaxy-blue hover:from-purple-600 hover:to-blue-600 text-white font-bold py-4 px-10 rounded-full text-xl font-lato transition-all duration-300 transform hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/25",children:"Start Chatting"}),(0,gn.jsx)("a",{href:"/features",className:"border-2 border-white/30 hover:border-white/60 text-white font-bold py-4 px-10 rounded-full text-xl font-lato transition-all duration-300 hover:bg-white/10",children:"Explore Features"})]})]})]})})]}),XE=["baseColor","speed","amplitude","frequencyX","frequencyY","interactive"],$E=e=>{let{baseColor:t=[.1,.1,.1],speed:n=.2,amplitude:i=.5,frequencyX:s=3,frequencyY:a=2,interactive:l=!0}=e,u=o(e,XE);const d=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!d.current)return;const e=d.current,r=new Dt({antialias:!0}),o=r.gl;o.clearColor(1,1,1,1);const u=new Vt(o),c=new Ht(o,{vertex:"\n      attribute vec2 position;\n      attribute vec2 uv;\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = vec4(position, 0.0, 1.0);\n      }\n    ",fragment:"\n      precision highp float;\n      uniform float uTime;\n      uniform vec3 uResolution;\n      uniform vec3 uBaseColor;\n      uniform float uAmplitude;\n      uniform float uFrequencyX;\n      uniform float uFrequencyY;\n      uniform vec2 uMouse;\n      varying vec2 vUv;\n\n      vec4 renderImage(vec2 uvCoord) {\n          vec2 fragCoord = uvCoord * uResolution.xy;\n          vec2 uv = (2.0 * fragCoord - uResolution.xy) / min(uResolution.x, uResolution.y);\n\n          for (float i = 1.0; i < 10.0; i++){\n              uv.x += uAmplitude / i * cos(i * uFrequencyX * uv.y + uTime + uMouse.x * 3.14159);\n              uv.y += uAmplitude / i * cos(i * uFrequencyY * uv.x + uTime + uMouse.y * 3.14159);\n          }\n\n          vec2 diff = (uvCoord - uMouse);\n          float dist = length(diff);\n          float falloff = exp(-dist * 20.0);\n          float ripple = sin(10.0 * dist - uTime * 2.0) * 0.03;\n          uv += (diff / (dist + 0.0001)) * ripple * falloff;\n\n          vec3 color = uBaseColor / abs(sin(uTime - uv.y - uv.x));\n          return vec4(color, 1.0);\n      }\n\n      void main() {\n          vec4 col = vec4(0.0);\n          int samples = 0;\n          for (int i = -1; i <= 1; i++){\n              for (int j = -1; j <= 1; j++){\n                  vec2 offset = vec2(float(i), float(j)) * (1.0 / min(uResolution.x, uResolution.y));\n                  col += renderImage(vUv + offset);\n                  samples++;\n              }\n          }\n          gl_FragColor = col / float(samples);\n      }\n    ",uniforms:{uTime:{value:0},uResolution:{value:new Float32Array([o.canvas.width,o.canvas.height,o.canvas.width/o.canvas.height])},uBaseColor:{value:new Float32Array(t)},uAmplitude:{value:i},uFrequencyX:{value:s},uFrequencyY:{value:a},uMouse:{value:new Float32Array([0,0])}}}),h=new mn(o,{geometry:u,program:c});function p(){r.setSize(1*e.offsetWidth,1*e.offsetHeight);const t=c.uniforms.uResolution.value;t[0]=o.canvas.width,t[1]=o.canvas.height,t[2]=o.canvas.width/o.canvas.height}function f(t){const n=e.getBoundingClientRect(),r=(t.clientX-n.left)/n.width,i=1-(t.clientY-n.top)/n.height,o=c.uniforms.uMouse.value;o[0]=r,o[1]=i}function m(t){if(t.touches.length>0){const n=t.touches[0],r=e.getBoundingClientRect(),i=(n.clientX-r.left)/r.width,o=1-(n.clientY-r.top)/r.height,s=c.uniforms.uMouse.value;s[0]=i,s[1]=o}}let g;return window.addEventListener("resize",p),p(),l&&(document.addEventListener("mousemove",f),document.addEventListener("touchmove",m)),g=requestAnimationFrame(function e(t){g=requestAnimationFrame(e),c.uniforms.uTime.value=.001*t*n,r.render({scene:h})}),e.appendChild(o.canvas),()=>{var e;cancelAnimationFrame(g),window.removeEventListener("resize",p),l&&(document.removeEventListener("mousemove",f),document.removeEventListener("touchmove",m)),o.canvas.parentElement&&o.canvas.parentElement.removeChild(o.canvas),null===(e=o.getExtension("WEBGL_lose_context"))||void 0===e||e.loseContext()}},[t,n,i,s,a,l]),(0,gn.jsx)("div",c({ref:d,className:"w-full h-full"},u))},QE=e=>{let{onAuthSuccess:t}=e;const[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[u,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),v=me(),{signUp:y,signIn:b,signInWithGoogle:w,signInWithDiscord:_}=NE();return(0,gn.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[(0,gn.jsxs)("div",{className:"fixed inset-0 z-0",children:[(0,gn.jsx)($E,{baseColor:[.4,.2,.8],speed:.3,amplitude:.4,frequencyX:2,frequencyY:3,interactive:!0}),(0,gn.jsx)("div",{className:"absolute inset-0 bg-black/50 pointer-events-none"})]}),(0,gn.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,gn.jsxs)("div",{className:"text-center mb-8",children:[(0,gn.jsx)(ff,{text:"Kimi V2",className:"text-6xl font-bold mb-4"}),(0,gn.jsx)("p",{className:"text-white/80 text-lg",style:{fontFamily:"Old Standard TT, serif"},children:n?"Create your account":"Welcome back"})]}),(0,gn.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20 shadow-2xl",children:[(0,gn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0),f(null),g(null);try{n?(await y(o,a,u),g("Check your email for a confirmation link!")):(await b(o,a),v("/chat"))}catch(t){f(t.message||"An error occurred")}finally{h(!1)}},className:"space-y-6",style:{pointerEvents:"auto"},children:[n&&(0,gn.jsxs)("div",{children:[(0,gn.jsx)("label",{htmlFor:"fullName",className:"block text-white/90 text-sm font-medium mb-2",style:{fontFamily:"Old Standard TT, serif"},children:"Full Name"}),(0,gn.jsx)("input",{id:"fullName",type:"text",value:u,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your full name",required:n})]}),(0,gn.jsxs)("div",{children:[(0,gn.jsx)("label",{htmlFor:"email",className:"block text-white/90 text-sm font-medium mb-2",style:{fontFamily:"Old Standard TT, serif"},children:"Email Address"}),(0,gn.jsx)("input",{id:"email",type:"email",value:o,onChange:e=>s(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",required:!0})]}),(0,gn.jsxs)("div",{children:[(0,gn.jsx)("label",{htmlFor:"password",className:"block text-white/90 text-sm font-medium mb-2",style:{fontFamily:"Old Standard TT, serif"},children:"Password"}),(0,gn.jsx)("input",{id:"password",type:"password",value:a,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password",required:!0,minLength:6})]}),p&&(0,gn.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3",children:(0,gn.jsx)("p",{className:"text-red-200 text-sm",style:{fontFamily:"Old Standard TT, serif"},children:p})}),m&&(0,gn.jsx)("div",{className:"bg-green-500/20 border border-green-500/50 rounded-lg p-3",children:(0,gn.jsx)("p",{className:"text-green-200 text-sm",style:{fontFamily:"Old Standard TT, serif"},children:m})}),(0,gn.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",style:{fontFamily:"Old Standard TT, serif"},children:d?(0,gn.jsxs)("div",{className:"flex items-center justify-center",children:[(0,gn.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),n?"Creating Account...":"Signing In..."]}):n?"Create Account":"Sign In"})]}),(0,gn.jsxs)("div",{className:"my-6 flex items-center",children:[(0,gn.jsx)("div",{className:"flex-1 border-t border-white/20"}),(0,gn.jsx)("span",{className:"px-4 text-white/60 text-sm",style:{fontFamily:"Old Standard TT, serif"},children:"or"}),(0,gn.jsx)("div",{className:"flex-1 border-t border-white/20"})]}),(0,gn.jsxs)("div",{className:"space-y-3",children:[(0,gn.jsx)("button",{onClick:async()=>{h(!0),f(null);try{await w()}catch(e){f(e.message||"An error occurred"),h(!1)}},disabled:d,className:"w-full bg-white/10 hover:bg-white/20 border border-white/20 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",style:{fontFamily:"Old Standard TT, serif"},children:(0,gn.jsxs)("div",{className:"flex items-center gap-3",children:[(0,gn.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,gn.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,gn.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,gn.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,gn.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,gn.jsx)("span",{className:"leading-none transform translate-y-0.5",children:"Continue with Google"})]})}),(0,gn.jsx)("button",{onClick:async()=>{h(!0),f(null);try{await _()}catch(e){f(e.message||"An error occurred"),h(!1)}},disabled:d,className:"w-full bg-indigo-600/20 hover:bg-indigo-600/30 border border-indigo-500/50 text-indigo-200 font-semibold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",style:{fontFamily:"Old Standard TT, serif"},children:(0,gn.jsxs)("div",{className:"flex items-center gap-3",children:[(0,gn.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gn.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.028zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),(0,gn.jsx)("span",{className:"leading-none transform translate-y-0.5",children:"Continue with Discord"})]})})]}),(0,gn.jsx)("div",{className:"mt-6 text-center",children:(0,gn.jsx)("button",{onClick:()=>{i(!n),f(null),g(null)},className:"text-white/70 hover:text-white transition-colors duration-200 text-sm",style:{fontFamily:"Old Standard TT, serif"},children:n?(0,gn.jsxs)(gn.Fragment,{children:["Already have an account? ",(0,gn.jsx)("span",{className:"text-purple-300 font-semibold",children:"Sign In"})]}):(0,gn.jsxs)(gn.Fragment,{children:["Don't have an account? ",(0,gn.jsx)("span",{className:"text-purple-300 font-semibold",children:"Sign Up"})]})})})]}),(0,gn.jsx)("div",{className:"text-center mt-8",children:(0,gn.jsx)("p",{className:"text-white/50 text-sm",style:{fontFamily:"Old Standard TT, serif"},children:"By continuing, you agree to our Terms of Service and Privacy Policy"})})]})]})},ZE=e=>{let{children:t}=e;const{user:n,loading:r}=NE();return r?(0,gn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,gn.jsxs)("div",{className:"text-center",children:[(0,gn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,gn.jsx)("p",{className:"text-white/80 text-lg",style:{fontFamily:"Old Standard TT, serif"},children:"Loading..."})]})}):n?(0,gn.jsx)(gn.Fragment,{children:t}):(0,gn.jsx)(QE,{})},eT=()=>{const e=me();return(0,r.useEffect)(()=>{(async()=>{try{var t;if(!GS)return void e("/");const n=await GS.auth.getSession();if(n.error)return console.error("Auth callback error:",n.error),void e("/");null!==(t=n.data)&&void 0!==t&&t.session?e("/chat"):e("/")}catch(n){console.error("Auth callback error:",n),e("/")}})()},[e]),(0,gn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:(0,gn.jsxs)("div",{className:"text-center",children:[(0,gn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,gn.jsx)("p",{className:"text-white/80 text-lg",style:{fontFamily:"Old Standard TT, serif"},children:"Completing sign in..."})]})})};const tT=function(){return(0,gn.jsx)(RE,{children:(0,gn.jsx)(pt,{children:(0,gn.jsxs)(Me,{children:[(0,gn.jsx)(Re,{path:"/",element:(0,gn.jsx)(mf,{navItems:[{label:"Home",bgColor:"#0D0716",textColor:"#fff",links:[{label:"Chat",ariaLabel:"Start Chatting",href:"/chat"},{label:"Overview",ariaLabel:"View Overview",href:"/"}]},{label:"Features",bgColor:"#170D27",textColor:"#fff",links:[{label:"Features",ariaLabel:"View Features",href:"/features"},{label:"Chat",ariaLabel:"Start Chatting",href:"/chat"}]}]})}),(0,gn.jsx)(Re,{path:"/auth/callback",element:(0,gn.jsx)(eT,{})}),(0,gn.jsx)(Re,{path:"/chat",element:(0,gn.jsx)(ZE,{children:(0,gn.jsx)(KE,{})})}),(0,gn.jsx)(Re,{path:"/features",element:(0,gn.jsx)(ZE,{children:(0,gn.jsx)(YE,{})})})]})})})};i.createRoot(document.getElementById("root")).render((0,gn.jsx)(tT,{}))})();
//# sourceMappingURL=main.1804f89c.js.map